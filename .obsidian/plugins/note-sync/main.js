/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => NoteSyncPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");

// src/fseditor.ts
var import_obsidian = require("obsidian");
var FsEditor = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
    this.fs = plugin.app.vault.adapter.fs;
    this.path = plugin.app.vault.adapter.path;
  }
  get root() {
    let a = this.plugin.app.vault.adapter;
    return a.basePath.replace(/\\/g, "/");
  }
  get_tfile(path, only_first = true) {
    try {
      path = path.split("|")[0].replace("[[", "").replace("]]", "");
      let tfile = this.app.vault.getFileByPath(path);
      if (tfile) {
        return tfile;
      }
      if (only_first) {
        let tfile2 = this.app.metadataCache.getFirstLinkpathDest(path.split("/").last());
        if (tfile2) {
          return tfile2;
        }
      } else {
        let tfiles = this.app.metadataCache.getLinkpathDest(path.split("/").last());
        if (tfiles && tfiles.length > 0) {
          return tfiles;
        }
      }
      return null;
    } catch (e) {
      return null;
    }
  }
  get_inlinks(tfile, only_md = true) {
    if (tfile == null) {
      return [];
    }
    let res = [];
    let inlinks = this.app.metadataCache.getBacklinksForFile(tfile);
    for (let [k, v] of inlinks.data) {
      let curr = this.app.vault.getFileByPath(k);
      if (curr) {
        res.push(curr);
      }
    }
    return res;
  }
  get_outlinks(tfile, only_md = true) {
    if (tfile == null) {
      return [];
    }
    let mcache = this.app.metadataCache.getFileCache(tfile);
    if (!mcache) {
      return [];
    }
    let res = [];
    if (mcache.links) {
      for (let link of mcache.links) {
        let tfile2 = this.get_tfile(link.link);
        if (tfile2 && !res.contains(tfile2) && !(only_md && tfile2.extension != "md")) {
          res.push(tfile2);
        }
      }
    }
    if (mcache.frontmatterLinks) {
      for (let link of mcache.frontmatterLinks) {
        let tfile2 = this.get_tfile(link.link);
        if (tfile2 && !res.contains(tfile2) && !(only_md && tfile2.extension != "md")) {
          res.push(tfile2);
        }
      }
    }
    if (!only_md && mcache.embeds) {
      for (let link of mcache.embeds) {
        let tfile2 = this.get_tfile(link.link);
        if (tfile2 && !res.contains(tfile2)) {
          res.push(tfile2);
        }
      }
    }
    return res;
  }
  abspath(tfile) {
    if (typeof tfile == "string") {
      return (this.root + "/" + tfile).replace(/\\/g, "/");
    } else if (tfile) {
      return (this.root + "/" + tfile.path).replace(/\\/g, "/");
    } else {
      return null;
    }
  }
  isfile(path) {
    return this.fs.existsSync(path) && this.fs.statSync(path).isFile();
  }
  isdir(path) {
    return this.fs.existsSync(path) && this.fs.statSync(path).isDirectory();
  }
  list_dir(path, as_fullpath = true) {
    if (!this.isdir(path)) {
      return [];
    }
    let items = this.fs.readdirSync(path);
    if (as_fullpath) {
      items = items.map(
        (x) => {
          return path + "/" + x;
        }
      );
    }
    return items;
  }
  first_valid_dir(paths) {
    if (typeof paths == "string") {
      if (this.isdir(paths)) {
        return paths;
      } else {
        return null;
      }
    }
    for (let path of paths) {
      if (this.isdir(path)) {
        return path;
      }
    }
    return null;
  }
  async select_valid_dir(paths, prompt_if_null = false) {
    let xpaths = paths.filter((p) => this.isdir(p));
    let path = null;
    if (xpaths.length > 0) {
      path = await this.plugin.dialog_suggest(xpaths, xpaths);
    }
    if (!path && prompt_if_null) {
      path = await this.plugin.dialog_prompt("Root of vault");
      if (!this.isdir(path)) {
        path = null;
      }
    }
    return path;
  }
  mkdir_recursive(path) {
    if (this.isdir(path)) {
      return true;
    }
    let parent = this.path.dirname(path);
    if (!this.isdir(parent)) {
      this.mkdir_recursive(parent);
    }
    this.fs.mkdirSync(path);
  }
  /**
  * 附件 src 到 dst，不在 vault 中，需要绝对路径
  * overwrite，复盖；mtime，新文件；
  */
  copy_file(src, dst, mode = "pass>overwrite>mtime") {
    let fs = this.fs;
    mode = mode.split(">")[0];
    if (!fs.existsSync(src)) {
      return false;
    }
    if (fs.existsSync(dst)) {
      if (mode === "overwrite") {
        fs.unlinkSync(dst);
        fs.copyFileSync(src, dst);
        console.log("Overwrite: " + src + " to " + dst);
        return true;
      } else if (mode === "mtime") {
        if (fs.statSync(dst).mtimeMs < fs.statSync(src).mtimeMs) {
          fs.unlinkSync(dst);
          fs.copyFileSync(src, dst);
          console.log("Update: " + src + " to " + dst);
          return true;
        }
      }
    } else {
      fs.copyFileSync(src, dst);
      console.log("Copy: " + src + " to " + dst);
      return true;
    }
    return false;
  }
  copy_tfile(tfile, dst, mode = "mtime") {
    if (tfile) {
      let src = this.abspath(tfile);
      return src && this.copy_file(src, dst, mode);
    }
    return false;
  }
  sync_tfile(tfile, vault_root, mode = "mtime", attachment = true, outlink = false) {
    if (tfile) {
      vault_root = vault_root.replace(/\\/g, "/");
      let src = this.root + "/" + tfile.path;
      let dst = vault_root + "/" + tfile.path;
      this.mkdir_recursive(this.path.dirname(dst));
      this.copy_file(src, dst, mode);
      if (attachment) {
        let tfiles = this.get_outlinks(tfile, false);
        for (let t of tfiles) {
          if (!(t.extension === "md")) {
            this.sync_tfile(t, vault_root, mode, false);
          } else if (outlink) {
            this.sync_tfile(t, vault_root, mode, false);
          }
        }
      }
    }
  }
  sync_tfolder(tfolder, vault_root, mode = "mtime", attachment = true, outlink = false, strict = false) {
    if (tfolder) {
      for (let t of tfolder.children) {
        if (t instanceof import_obsidian.TFolder) {
          this.sync_tfolder(t, vault_root, mode, attachment, outlink);
        } else if (t instanceof import_obsidian.TFile) {
          this.sync_tfile(t, vault_root, mode, attachment, outlink);
        }
      }
      if (strict) {
        let dst = vault_root + "/" + tfolder.path;
        let src = this.abspath(tfolder);
        if (src && dst) {
          this.remove_files_not_in_src(src, dst);
        }
      }
    }
  }
  async delete_file_or_dir(path) {
    if (this.isfile(path)) {
      if (await this.plugin.dialog_suggest(["\u274C", "\u2714\uFE0F"], [false, true], path)) {
        console.log(`Delete file: ${path}`);
        this.fs.unlinkSync(path);
      }
    } else if (this.isdir(path)) {
      let items = this.list_dir(path, true);
      if (await this.plugin.dialog_suggest(["\u274C", "\u2714\uFE0F"], [false, true], path)) {
        console.log(`Delete folder: ${path}`);
        this.fs.rmdirSync(path);
      } else {
        return;
      }
      for (let item of items) {
        if (await this.plugin.dialog_suggest(["\u274C", "\u2714\uFE0F"], [false, true], item)) {
          console.log(`Delete file: ${path}`);
          this.delete_file_or_dir(item);
        }
      }
    }
  }
  remove_files_not_in_src(src, dst) {
    if (!this.isdir(src) || !this.isdir(dst)) {
      return;
    }
    let items = this.list_dir(dst, false);
    for (let item of items) {
      let adst = dst + "/" + item;
      let asrc = src + "/" + item;
      if (this.isfile(adst)) {
        if (!this.isfile(asrc)) {
          this.delete_file_or_dir(adst);
        }
      } else if (this.isdir(adst)) {
        if (!this.isdir(asrc)) {
          this.delete_file_or_dir(adst);
        } else {
          this.remove_files_not_in_src(asrc, adst);
        }
      }
    }
  }
  sync_folder(src, dst, mode = "mtime", strict = false) {
    if (!this.isdir(src)) {
      return;
    }
    this.mkdir_recursive(dst);
    if (!this.isdir(dst)) {
      return;
    }
    let items = this.list_dir(src, false);
    for (let item of items) {
      let asrc = this.path.join(src, item);
      let adst = this.path.join(dst, item);
      if (this.isfile(asrc)) {
        this.copy_file(asrc, adst, mode);
      } else if (this.isdir(asrc)) {
        this.sync_folder(asrc, adst, mode, strict);
      }
    }
    if (strict) {
      this.remove_files_not_in_src(src, dst);
    }
  }
  modify(path, callback, encoding = "utf8") {
    let fs = this.fs;
    if (!fs.existsSync(path)) {
      return;
    }
    ;
    fs.readFile(
      path,
      encoding,
      (err, data) => {
        if (err) {
          return;
        }
        let rs = callback(path, data);
        fs.writeFile(path, rs, encoding, (err2) => {
          return;
        });
      }
    );
  }
};

// src/strings.ts
var Strings = class {
  constructor() {
    let lang = window.localStorage.getItem("language");
    if (lang) {
      this.language = lang;
    } else {
      this.language = "en";
    }
  }
  get cmd_export_current_note() {
    if (this.language == "zh") {
      return "\u5BFC\u51FA\u5F53\u524D\u7B14\u8BB0";
    } else {
      return "Export current note";
    }
  }
  get cmd_set_vexporter() {
    if (this.language == "zh") {
      return "\u8BBE\u7F6E\u5BFC\u51FA\u7B14\u8BB0\u9009\u9879";
    } else {
      return "Set config to export note";
    }
  }
  get cmd_export_plugin() {
    if (this.language == "zh") {
      return "\u5BFC\u51FA\u63D2\u4EF6";
    } else {
      return "Export plugin";
    }
  }
  get cmd_download_git_repo() {
    if (this.language == "zh") {
      return "\u4E0B\u8F7D Git \u4ED3\u5E93\u6587\u4EF6";
    } else {
      return "Download git repo";
    }
  }
  get prompt_path_of_folder() {
    if (this.language == "zh") {
      return "\u8F93\u5165\u6587\u4EF6\u5939\u8DEF\u5F84";
    } else {
      return "Input path of folder";
    }
  }
  get notice_output() {
    if (this.language == "zh") {
      return "\u5BFC\u51FA\uFF1A";
    } else {
      return "Output:";
    }
  }
  get notice_nosuchdir() {
    if (this.language == "zh") {
      return "\u65E0\u6548\u76EE\u5F55";
    } else {
      return "Invaid path.";
    }
  }
  get setting_vault_dir() {
    if (this.language == "zh") {
      return "\u5E93\u76EE\u5F55";
    } else {
      return "Root dir of vault";
    }
  }
  get setting_strict_mode() {
    if (this.language == "zh") {
      return "\u4E25\u683C\u6A21\u5F0F?";
    } else {
      return "Strict mode?";
    }
  }
  get setting_strict_mode_desc() {
    if (this.language == "zh") {
      return "\u5371\u9669\uFF01\u540C\u6B65\u65F6\u5220\u9664\u76EE\u6807\u5E93\u4E2D\u591A\u51FA\u7684\u6587\u4EF6";
    } else {
      return "Danger! Delete files or folders in target vault but not in current vault.";
    }
  }
  get setting_git_repo() {
    if (this.language == "zh") {
      return "Git \u4ED3\u5E93";
    } else {
      return "Git repository";
    }
  }
  get item_copy_data_json() {
    if (this.language == "zh") {
      return "\u590D\u5236 data.json";
    } else {
      return "Copy data.json";
    }
  }
  get item_skip_data_json() {
    if (this.language == "zh") {
      return "\u8DF3\u8FC7 data.json";
    } else {
      return "Skip data.json";
    }
  }
  get item_sync_vault() {
    if (this.language == "zh") {
      return "\u540C\u6B65\u5230\u5176\u5B83\u5E93";
    } else {
      return "Sync to other vault";
    }
  }
};
var strings = new Strings();

// src/setting.ts
var import_obsidian2 = require("obsidian");
var DEFAULT_SETTINGS = {
  strict_mode: false,
  vaultDir: "",
  git_repo: "https://github.com/zigholding/ObsidianZ/tree/master\nhttps://gitee.com/zigholding/ObsidianZ/tree/master"
};
var NoteSyncSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  getSettingValue(field) {
    return this.plugin.settings[field];
  }
  add_toggle(name, desc, field) {
    let { containerEl } = this;
    let value = this.plugin.settings[field];
    let item = new import_obsidian2.Setting(containerEl).setName(name).setDesc(desc).addToggle(
      (text) => text.setValue(value).onChange(async (value2) => {
        this.plugin.settings[field] = value2;
        await this.plugin.saveSettings();
      })
    );
    return item;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName(this.plugin.strings.setting_vault_dir).addTextArea((text) => text.setValue(this.plugin.settings.vaultDir).onChange(async (value) => {
      this.plugin.settings.vaultDir = value;
      await this.plugin.saveSettings();
    }));
    this.add_toggle(
      this.plugin.strings.setting_strict_mode,
      this.plugin.strings.setting_strict_mode_desc,
      "strict_mode"
    );
    new import_obsidian2.Setting(containerEl).setName(this.plugin.strings.setting_git_repo).addTextArea((text) => text.setValue(this.plugin.settings.git_repo).onChange(async (value) => {
      this.plugin.settings.git_repo = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/commands.ts
var import_obsidian3 = require("obsidian");
var cmd_export_current_note = (plugin) => ({
  id: "export_current_note",
  name: plugin.strings.cmd_export_current_note,
  callback: async () => {
    let tfile = plugin.app.workspace.getActiveFile();
    await plugin.export_readme(tfile, null);
  }
});
var cmd_set_vexporter = (plugin) => ({
  id: "set_vexporter",
  name: plugin.strings.cmd_set_vexporter,
  callback: async () => {
    let tfile = plugin.app.workspace.getActiveFile();
    if (!tfile) {
      return;
    }
    let dir = await plugin.dialog_prompt(plugin.strings.prompt_path_of_folder);
    let item = {};
    if (plugin.fsEditor.fs.existsSync(dir)) {
      item["Dir"] = dir;
    }
    item["Name"] = "readMe";
    item["Assets"] = "./assets";
    item["RemoveMeta"] = true;
    item["UseGitLink"] = true;
    await plugin.app.fileManager.processFrontMatter(
      tfile,
      async (fm) => {
        fm[plugin.yaml] = item;
      }
    );
  }
});
var cmd_export_plugin = (plugin) => ({
  id: "export_plugin",
  name: plugin.strings.cmd_export_plugin,
  callback: async () => {
    let plugins = Object.keys(plugin.app.plugins.plugins);
    let p = await plugin.dialog_suggest(plugins, plugins);
    let eplugin = plugin.app.plugins.getPlugin(p);
    if (eplugin) {
      let paths = plugin.settings.vaultDir.split("\n");
      let target = await plugin.fsEditor.select_valid_dir(
        paths
      );
      if (target) {
        let items2 = plugin.fsEditor.list_dir(target, false);
        items2 = items2.filter((x) => x.startsWith(".") && x != ".git").filter(
          (x) => {
            let path = plugin.fsEditor.path.join(target, x);
            if (!plugin.fsEditor.isdir(path)) {
              return false;
            }
            let items3 = plugin.fsEditor.list_dir(path, false);
            return items3.contains("plugins");
          }
        );
        if (items2.length == 1) {
          target = plugin.fsEditor.path.join(target, items2[0], "plugins");
        } else if (items2.length > 1) {
          let item = await plugin.dialog_suggest(
            items2,
            items2,
            "config"
          );
          if (item) {
            target = plugin.fsEditor.path.join(target, item, "plugins");
          }
        }
      }
      if (!plugin.fsEditor.fs.existsSync(target) || plugin.fsEditor.path.basename(target) != "plugins") {
        target = await plugin.dialog_prompt(plugin.strings.prompt_path_of_folder);
      }
      target = target.replace(/\\/g, "/");
      if (!target.endsWith("/" + p)) {
        target = target + "/" + p;
      }
      if (!plugin.fsEditor.fs.existsSync(target)) {
        plugin.fsEditor.fs.mkdirSync(target);
      }
      let items = ["main.js", "manifest.json", "styles.css"];
      let dj = await plugin.dialog_suggest(
        [plugin.strings.item_skip_data_json, plugin.strings.item_copy_data_json],
        [false, true],
        ""
      );
      if (dj) {
        items.push("data.json");
      }
      for (let item of items) {
        let src = `${plugin.fsEditor.root}/${eplugin.manifest.dir}/${item}`;
        let dst = `${target}/${item}`;
        let flag = plugin.fsEditor.copy_file(src, dst, "overwrite");
        if (flag) {
          console.log(`Copy ${item} to ${target}`, 5e3);
        }
      }
    }
  }
});
var cmd_download_git_repo = (plugin) => ({
  id: "cmd_download_git_repo",
  name: plugin.strings.cmd_download_git_repo,
  callback: async () => {
    let repos = plugin.settings.git_repo.split("\n");
    let repo = await plugin.dialog_suggest(repos, repos);
    if (!repo) {
      return;
    }
    let match = repo.match(/^https?:\/\/(.*)\.com\/([^/]*)\/([^/]*)\/tree\/([^/]*)\/?(.*)$/);
    if (!match) {
      return;
    }
    let SOURCE = match[1];
    let repoOwner = match[2];
    let repoName = match[3];
    let branch = match[4];
    let path = match[5];
    async function list_files_of_path(repoOwner2, repoName2, path2, branch2 = "master") {
      let url;
      if (SOURCE == "github") {
        url = `https://api.github.com/repos/${repoOwner2}/${repoName2}/contents/${path2}?ref=${branch2}`;
      } else {
        url = `https://gitee.com/api/v5/repos/${repoOwner2}/${repoName2}/contents/${path2}?ref=${branch2}`;
      }
      let req = await window.requestUrl(url);
      req = JSON.parse(req.text);
      if (!Array.isArray(req)) {
        req = [req];
      }
      return req;
    }
    async function download_file(url, folder_path, file_name) {
      let req = await window.requestUrl(url);
      let ctx = req.text;
      let tfile_path = `${folder_path}/${file_name}`;
      if (folder_path.startsWith(".")) {
        let flag = plugin.app.vault.exists(folder_path);
        if (!flag) {
          await plugin.app.vault.createFolder(folder_path);
        }
        flag = plugin.app.vault.exists(tfile_path);
        if (flag) {
          await plugin.app.vault.adapter.remove(tfile_path);
          await plugin.app.vault.create(tfile_path, ctx);
          new import_obsidian3.Notice(`\u66F4\u65B0\uFF1A${tfile_path}`, 5e3);
        } else {
          await plugin.app.vault.create(tfile_path, ctx);
          new import_obsidian3.Notice(`\u4E0B\u8F7D\uFF1A${tfile_path}`, 5e3);
        }
      } else {
        let folder = plugin.app.vault.getFolderByPath(folder_path);
        if (!folder) {
          folder = await plugin.app.vault.createFolder(folder_path);
        }
        let tfile = plugin.app.vault.getFileByPath(tfile_path);
        if (!tfile) {
          await plugin.app.vault.create(tfile_path, ctx);
          new import_obsidian3.Notice(`\u4E0B\u8F7D\uFF1A${tfile_path}`, 5e3);
        } else {
          await plugin.app.vault.modify(tfile, ctx);
          new import_obsidian3.Notice(`\u66F4\u65B0\uFF1A${tfile.path}`, 5e3);
        }
      }
    }
    async function download_file_of_dir(repoOwner2, repoName2, path2, branch2) {
      let items = await list_files_of_path(repoOwner2, repoName2, path2, branch2);
      let nc = this.app.plugins.getPlugin("note-chain");
      let item = await nc.dialog_suggest(
        items.map((x) => (x.type == "file" ? "\u{1F4C3}" : "\u{1F4C1}") + x.path),
        items,
        "",
        true
      );
      if (!item) {
        return;
      }
      if (typeof item == "string" && item == "all") {
        for (let item2 of items) {
          if (item2.type == "file") {
            let file_name = item2.path.split("/").last();
            let folder_path = item2.path.slice(0, item2.path.length - file_name.length - 1);
            await download_file(item2.download_url, folder_path, file_name);
          }
        }
      } else if (item.type == "file") {
        let file_name = item.path.split("/").last();
        let folder_path = item.path.slice(0, item.path.length - file_name.length - 1);
        await download_file(item.download_url, folder_path, file_name);
      } else if (item.type == "dir") {
        await download_file_of_dir(repoOwner2, repoName2, item.path, branch2);
      }
    }
    download_file_of_dir(repoOwner, repoName, path, branch);
  }
});
var commandBuilders = [];
var commandBuildersDesktop = [
  cmd_export_current_note,
  cmd_set_vexporter,
  cmd_export_plugin,
  cmd_download_git_repo
];
function addCommands(plugin) {
  commandBuilders.forEach((c) => {
    plugin.addCommand(c(plugin));
  });
  if (plugin.app.isMobile == false) {
    commandBuildersDesktop.forEach((c) => {
      plugin.addCommand(c(plugin));
    });
  }
}

// src/gui/inputSuggester.ts
var import_obsidian4 = require("obsidian");
var InputSuggester = class extends import_obsidian4.FuzzySuggestModal {
  constructor(app, displayItems, items, options = {}) {
    super(app);
    this.displayItems = displayItems;
    this.items = items;
    this.promise = new Promise((resolve, reject) => {
      this.resolvePromise = resolve;
      this.rejectPromise = reject;
    });
    this.inputEl.addEventListener("keydown", (event) => {
      var _a;
      if (event.code !== "Tab") {
        return;
      }
      const self = this;
      const { values, selectedItem } = self.chooser;
      const { value } = this.inputEl;
      this.inputEl.value = (_a = values[selectedItem].item) != null ? _a : value;
    });
    if (options.placeholder)
      this.setPlaceholder(options.placeholder);
    if (options.limit)
      this.limit = options.limit;
    if (options.emptyStateText)
      this.emptyStateText = options.emptyStateText;
    this.open();
  }
  static Suggest(app, displayItems, items, options = {}) {
    const newSuggester = new InputSuggester(
      app,
      displayItems,
      items,
      options
    );
    return newSuggester.promise;
  }
  getItemText(item) {
    if (item === this.inputEl.value)
      return item;
    return this.displayItems[this.items.indexOf(item)];
  }
  getItems() {
    if (this.inputEl.value === "")
      return this.items;
    return [this.inputEl.value, ...this.items];
  }
  selectSuggestion(value, evt) {
    this.resolved = true;
    super.selectSuggestion(value, evt);
  }
  onChooseItem(item, evt) {
    this.resolved = true;
    this.resolvePromise(item);
  }
  onClose() {
    super.onClose();
    if (!this.resolved)
      this.rejectPromise("no input given.");
  }
};
async function dialog_suggest(displayItems, items, placeholder = "") {
  try {
    return await InputSuggester.Suggest(
      this.app,
      displayItems,
      items,
      {
        placeholder
      }
    );
  } catch (error) {
    return null;
  }
}

// src/gui/inputPrompt.ts
var import_obsidian5 = require("obsidian");
var InputPrompt = class extends import_obsidian5.Modal {
  constructor(app, header, placeholder, value) {
    super(app);
    this.header = header;
    this.didSubmit = false;
    this.submitClickCallback = (evt) => this.submit();
    this.cancelClickCallback = (evt) => this.cancel();
    this.submitEnterCallback = (evt) => {
      if (!evt.isComposing && evt.key === "Enter") {
        evt.preventDefault();
        this.submit();
      }
    };
    this.placeholder = placeholder != null ? placeholder : "";
    this.input = value != null ? value : "";
    this.waitForClose = new Promise((resolve, reject) => {
      this.resolvePromise = resolve;
      this.rejectPromise = reject;
    });
    this.display();
    this.open();
  }
  static Prompt(app, header, placeholder, value) {
    const newPromptModal = new InputPrompt(
      app,
      header,
      placeholder,
      value
    );
    return newPromptModal.waitForClose;
  }
  display() {
    this.containerEl.addClass("quickAddModal", "qaInputPrompt");
    this.contentEl.empty();
    this.titleEl.textContent = this.header;
    const mainContentContainer = this.contentEl.createDiv();
    this.inputComponent = this.createInputField(
      mainContentContainer,
      this.placeholder,
      this.input
    );
    this.createButtonBar(mainContentContainer);
  }
  createInputField(container, placeholder, value) {
    const textComponent = new import_obsidian5.TextComponent(container);
    textComponent.inputEl.classList.add("input-field");
    textComponent.setPlaceholder(placeholder != null ? placeholder : "").setValue(value != null ? value : "").onChange((value2) => this.input = value2).inputEl.addEventListener("keydown", this.submitEnterCallback);
    return textComponent;
  }
  createButton(container, text, callback) {
    const btn = new import_obsidian5.ButtonComponent(container);
    btn.setButtonText(text).onClick(callback);
    return btn;
  }
  createButtonBar(mainContentContainer) {
    const buttonBarContainer = mainContentContainer.createDiv();
    this.createButton(
      buttonBarContainer,
      "Ok",
      this.submitClickCallback
    ).setCta();
    this.createButton(
      buttonBarContainer,
      "Cancel",
      this.cancelClickCallback
    );
    buttonBarContainer.classList.add("button-bar");
  }
  submit() {
    this.didSubmit = true;
    this.close();
  }
  cancel() {
    this.close();
  }
  resolveInput() {
    if (!this.didSubmit)
      this.rejectPromise("No input given.");
    else
      this.resolvePromise(this.input);
  }
  removeInputListener() {
    this.inputComponent.inputEl.removeEventListener(
      "keydown",
      this.submitEnterCallback
    );
  }
  onOpen() {
    super.onOpen();
    this.inputComponent.inputEl.focus();
    this.inputComponent.inputEl.select();
  }
  onClose() {
    super.onClose();
    this.resolveInput();
    this.removeInputListener();
  }
};
async function dialog_prompt(header = "Input", placeholder = "", value = "") {
  try {
    return await InputPrompt.Prompt(
      this.app,
      header,
      placeholder,
      value
    );
  } catch (e) {
    return null;
  }
}

// main.ts
var NoteSyncPlugin = class extends import_obsidian6.Plugin {
  async onload() {
    this.dialog_suggest = dialog_suggest;
    this.dialog_prompt = dialog_prompt;
    this.app.workspace.onLayoutReady(
      async () => {
        await this._onload_();
      }
    );
  }
  async _onload_() {
    this.yaml = "note-sync";
    this.strings = new Strings();
    await this.loadSettings();
    this.fsEditor = new FsEditor(this);
    this.addSettingTab(new NoteSyncSettingTab(this.app, this));
    addCommands(this);
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        menu.addItem((item) => {
          item.setTitle(this.strings.item_sync_vault).setIcon("document").onClick(async () => {
            let dst = await this.fsEditor.select_valid_dir(
              this.settings.vaultDir.split("\n")
            );
            if (!dst) {
              dst = await this.dialog_prompt("Root of vault");
              if (!this.fsEditor.isdir(dst)) {
                new import_obsidian6.Notice("Invalid root: " + dst);
                return;
              }
            }
            if (file instanceof import_obsidian6.TFile) {
              this.fsEditor.sync_tfile(file, dst, "mtime", true, false);
            } else if (file instanceof import_obsidian6.TFolder) {
              this.fsEditor.sync_tfolder(file, dst, "mtime", true, false, this.settings.strict_mode);
            }
          });
        });
      })
    );
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async export_readme(tfile, dst) {
    var _a, _b, _c, _d, _e, _f, _g;
    if (!tfile) {
      tfile = this.app.workspace.getActiveFile();
    }
    if (!tfile) {
      return;
    }
    let mcache = this.app.metadataCache.getFileCache(tfile);
    let ctx = await this.app.vault.read(tfile);
    let fm = {};
    if (mcache && mcache["frontmatter"]) {
      fm = mcache["frontmatter"];
    }
    if (!dst) {
      dst = (_a = fm[this.yaml]) == null ? void 0 : _a.Dir;
      if (!dst) {
        dst = await this.dialog_prompt("Path of LocalGitProject");
      }
    }
    if (!dst || !this.fsEditor.isdir(dst)) {
      new import_obsidian6.Notice(this.strings.notice_nosuchdir, 3e3);
      return;
    }
    dst = dst.replace(/\\/g, "/");
    let target;
    let name = (_b = fm[this.yaml]) == null ? void 0 : _b.Name;
    if (name && !(name == "")) {
      target = dst + "/" + name + ".md";
    } else {
      target = dst + "/" + tfile.basename + ".md";
    }
    if ((_c = fm[this.yaml]) == null ? void 0 : _c.RemoveMeta) {
      if ((_e = (_d = mcache == null ? void 0 : mcache.frontmatterPosition) == null ? void 0 : _d.end) == null ? void 0 : _e.offset) {
        ctx = ctx.slice(mcache.frontmatterPosition.end.offset);
      }
    }
    let assets = (_f = fm[this.yaml]) == null ? void 0 : _f.Assets;
    if (((_g = fm[this.yaml]) == null ? void 0 : _g.UseGitLink) && assets) {
      ctx = ctx.replace(
        /\!\[\[(.*?)\]\]/g,
        (match, filename) => {
          return `![](./${assets}/${filename.replace(/ /g, "%20")})`;
        }
      );
    }
    await this.fsEditor.fs.writeFile(
      target,
      ctx,
      "utf-8",
      (err) => {
        return;
      }
    );
    new import_obsidian6.Notice(`Export to ${target}`, 5e3);
    if (assets) {
      let olinks = this.fsEditor.get_outlinks(tfile, false);
      let adir = this.fsEditor.path.join(dst, assets);
      this.fsEditor.mkdir_recursive(adir);
      for (let f of olinks) {
        if (!(f.extension === "md")) {
          let flag = this.fsEditor.copy_tfile(f, adir + "/" + f.basename + "." + f.extension);
          if (flag) {
            new import_obsidian6.Notice(`Copy ${f.name}`, 5e3);
          }
        }
      }
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvZnNlZGl0b3IudHMiLCAic3JjL3N0cmluZ3MudHMiLCAic3JjL3NldHRpbmcudHMiLCAic3JjL2NvbW1hbmRzLnRzIiwgInNyYy9ndWkvaW5wdXRTdWdnZXN0ZXIudHMiLCAic3JjL2d1aS9pbnB1dFByb21wdC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBGc0VkaXRvciB9IGZyb20gJ3NyYy9mc2VkaXRvcic7XHJcbmltcG9ydCB7IFN0cmluZ3MgfSBmcm9tICdzcmMvc3RyaW5ncyc7XHJcbmltcG9ydCB7TXlTZXR0aW5ncyxOb3RlU3luY1NldHRpbmdUYWIsREVGQVVMVF9TRVRUSU5HU30gZnJvbSAnc3JjL3NldHRpbmcnXHJcblxyXG5pbXBvcnQgeyBhZGRDb21tYW5kcyB9IGZyb20gJ3NyYy9jb21tYW5kcyc7XHJcblxyXG5pbXBvcnQge2RpYWxvZ19zdWdnZXN0fSBmcm9tICdzcmMvZ3VpL2lucHV0U3VnZ2VzdGVyJ1xyXG5pbXBvcnQge2RpYWxvZ19wcm9tcHR9IGZyb20gJ3NyYy9ndWkvaW5wdXRQcm9tcHQnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RlU3luY1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0c3RyaW5ncyA6IFN0cmluZ3M7XHJcblx0c2V0dGluZ3M6IE15U2V0dGluZ3M7XHJcblx0ZnNFZGl0b3IgOiBGc0VkaXRvcjtcclxuXHR5YW1sOiBzdHJpbmc7XHJcblx0ZGlhbG9nX3N1Z2dlc3Q6IEZ1bmN0aW9uXHJcblx0ZGlhbG9nX3Byb21wdDogRnVuY3Rpb25cclxuXHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdHRoaXMuZGlhbG9nX3N1Z2dlc3QgPSBkaWFsb2dfc3VnZ2VzdFxyXG5cdFx0dGhpcy5kaWFsb2dfcHJvbXB0ID0gZGlhbG9nX3Byb21wdFxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoXHJcblx0XHRcdGFzeW5jKCk9PntcclxuXHRcdFx0XHRhd2FpdCB0aGlzLl9vbmxvYWRfKClcclxuXHRcdFx0fVxyXG5cdFx0KVxyXG5cdH1cclxuXHJcblx0YXN5bmMgX29ubG9hZF8oKSB7XHJcblx0XHR0aGlzLnlhbWwgPSAnbm90ZS1zeW5jJ1xyXG5cdFx0dGhpcy5zdHJpbmdzID0gbmV3IFN0cmluZ3MoKTtcclxuXHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cdFx0dGhpcy5mc0VkaXRvciA9IG5ldyBGc0VkaXRvcih0aGlzKTtcclxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IE5vdGVTeW5jU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0YWRkQ29tbWFuZHModGhpcyk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW1lbnVcIiwgKG1lbnUsIGZpbGUpID0+IHtcclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdC5zZXRUaXRsZSh0aGlzLnN0cmluZ3MuaXRlbV9zeW5jX3ZhdWx0KVxyXG5cdFx0XHRcdFx0LnNldEljb24oXCJkb2N1bWVudFwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRsZXQgZHN0ID0gYXdhaXQgdGhpcy5mc0VkaXRvci5zZWxlY3RfdmFsaWRfZGlyKFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MudmF1bHREaXIuc3BsaXQoXCJcXG5cIilcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0aWYoIWRzdCl7XHJcblx0XHRcdFx0XHRcdFx0ZHN0ID0gYXdhaXQgdGhpcy5kaWFsb2dfcHJvbXB0KFwiUm9vdCBvZiB2YXVsdFwiKTtcclxuXHRcdFx0XHRcdFx0XHRpZighdGhpcy5mc0VkaXRvci5pc2Rpcihkc3QpKXtcclxuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJJbnZhbGlkIHJvb3Q6IFwiICsgZHN0KTtcclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKXtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmZzRWRpdG9yLnN5bmNfdGZpbGUoZmlsZSxkc3QsJ210aW1lJyx0cnVlLGZhbHNlKTtcclxuXHJcblx0XHRcdFx0XHRcdH1lbHNlIGlmKGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKXtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmZzRWRpdG9yLnN5bmNfdGZvbGRlcihmaWxlLGRzdCwnbXRpbWUnLHRydWUsZmFsc2UsdGhpcy5zZXR0aW5ncy5zdHJpY3RfbW9kZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cdFxyXG5cdGFzeW5jIGV4cG9ydF9yZWFkbWUodGZpbGU6VEZpbGV8bnVsbCxkc3Q6c3RyaW5nfG51bGwpe1xyXG5cdFx0aWYoIXRmaWxlKXt0ZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7fVxyXG5cdFx0aWYoIXRmaWxlKXtyZXR1cm59XHJcblxyXG5cdFx0bGV0IG1jYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRmaWxlKTtcclxuXHRcdGxldCBjdHggPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRmaWxlKTtcclxuXHJcblx0XHRsZXQgZm06IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7fTtcclxuXHRcdGlmKG1jYWNoZSAmJiBtY2FjaGVbJ2Zyb250bWF0dGVyJ10pe1xyXG5cdFx0XHRmbSA9IG1jYWNoZVsnZnJvbnRtYXR0ZXInXTtcclxuXHRcdH1cclxuXHJcblx0XHRpZighZHN0KXtcclxuXHRcdFx0ZHN0ID0gZm1bdGhpcy55YW1sXT8uRGlyXHJcblx0XHRcdGlmKCFkc3Qpe1xyXG5cdFx0XHRcdGRzdCA9IGF3YWl0IHRoaXMuZGlhbG9nX3Byb21wdCgnUGF0aCBvZiBMb2NhbEdpdFByb2plY3QnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmKCFkc3QgfHwgIXRoaXMuZnNFZGl0b3IuaXNkaXIoZHN0KSl7XHJcblx0XHRcdG5ldyBOb3RpY2UodGhpcy5zdHJpbmdzLm5vdGljZV9ub3N1Y2hkaXIsMzAwMCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblxyXG5cdFx0ZHN0ID0gZHN0LnJlcGxhY2UoL1xcXFwvZywnLycpO1xyXG5cclxuXHRcdC8vIHNldCB0YXJnZXQgZmlsZW5hbWUvXHU2NTg3XHU0RUY2XHU1NDBEXHJcblx0XHRsZXQgdGFyZ2V0O1xyXG5cdFx0bGV0IG5hbWUgPSBmbVt0aGlzLnlhbWxdPy5OYW1lO1xyXG5cdFx0aWYobmFtZSAmJiAhKG5hbWU9PScnKSl7XHJcblx0XHRcdHRhcmdldCA9IGRzdCsnLycrbmFtZSsnLm1kJztcclxuXHRcdH1lbHNle1xyXG5cdFx0XHR0YXJnZXQgPSBkc3QrJy8nK3RmaWxlLmJhc2VuYW1lKycubWQnO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZihmbVt0aGlzLnlhbWxdPy5SZW1vdmVNZXRhKXtcclxuXHRcdFx0aWYobWNhY2hlPy5mcm9udG1hdHRlclBvc2l0aW9uPy5lbmQ/Lm9mZnNldCl7XHJcblx0XHRcdFx0Y3R4ID0gY3R4LnNsaWNlKG1jYWNoZS5mcm9udG1hdHRlclBvc2l0aW9uLmVuZC5vZmZzZXQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGxldCBhc3NldHMgPSBmbVt0aGlzLnlhbWxdPy5Bc3NldHNcclxuXHJcblx0XHRpZihmbVt0aGlzLnlhbWxdPy5Vc2VHaXRMaW5rICYmIGFzc2V0cyl7XHJcblx0XHRcdFxyXG5cdFx0XHRjdHggPSBjdHgucmVwbGFjZShcclxuXHRcdFx0XHQvXFwhXFxbXFxbKC4qPylcXF1cXF0vZywgXHJcblx0XHRcdFx0KG1hdGNoLCBmaWxlbmFtZSkgPT4ge1xyXG5cdFx0XHQgIFx0XHRyZXR1cm4gYCFbXSguLyR7YXNzZXRzfS8ke2ZpbGVuYW1lLnJlcGxhY2UoLyAvZywnJTIwJyl9KWA7XHJcblx0XHRcdH0pXHJcblx0XHR9XHJcblx0XHRhd2FpdCB0aGlzLmZzRWRpdG9yLmZzLndyaXRlRmlsZShcclxuXHRcdFx0dGFyZ2V0LCBjdHgsICd1dGYtOCcsIFxyXG5cdFx0XHQoZXJyOkVycm9yKSA9PiB7cmV0dXJuO31cclxuXHRcdClcclxuXHRcdG5ldyBOb3RpY2UoYEV4cG9ydCB0byAke3RhcmdldH1gLDUwMDApXHJcblx0XHRpZihhc3NldHMpe1xyXG5cdFx0XHRsZXQgb2xpbmtzID0gdGhpcy5mc0VkaXRvci5nZXRfb3V0bGlua3ModGZpbGUsZmFsc2UpO1xyXG5cdFx0XHRsZXQgYWRpciA9IHRoaXMuZnNFZGl0b3IucGF0aC5qb2luKGRzdCxhc3NldHMpO1xyXG5cdFx0XHR0aGlzLmZzRWRpdG9yLm1rZGlyX3JlY3Vyc2l2ZShhZGlyKTtcclxuXHRcdFx0Zm9yKGxldCBmIG9mIG9saW5rcyl7XHJcblx0XHRcdFx0aWYoIShmLmV4dGVuc2lvbj09PSdtZCcpKXtcclxuXHRcdFx0XHRcdGxldCBmbGFnID0gdGhpcy5mc0VkaXRvci5jb3B5X3RmaWxlKGYsYWRpcisnLycrZi5iYXNlbmFtZSsnLicrZi5leHRlbnNpb24pO1xyXG5cdFx0XHRcdFx0aWYoZmxhZyl7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYENvcHkgJHtmLm5hbWV9YCw1MDAwKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiXHJcbmltcG9ydCB7IEFwcCwgRWRpdG9yLCBNYXJrZG93blZpZXcsIE1vZGFsLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBOb3RlU3luY1BsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQgeyBvbiB9IGZyb20gJ25vZGU6ZXZlbnRzJztcclxuZXhwb3J0IGNsYXNzIEZzRWRpdG9ye1xyXG4gICAgZnM7XHJcbiAgICBhcHA6QXBwO1xyXG4gICAgcGF0aDtcclxuICAgIHBsdWdpbiA6Tm90ZVN5bmNQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IocGx1Z2luOk5vdGVTeW5jUGx1Z2luKXtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XHJcbiAgICAgICAgdGhpcy5mcyA9IChwbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5mcztcclxuICAgICAgICB0aGlzLnBhdGggPSAocGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkucGF0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcm9vdCgpe1xyXG4gICAgICAgIGxldCBhID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIgYXMgYW55O1xyXG4gICAgICAgIHJldHVybiBhLmJhc2VQYXRoLnJlcGxhY2UoL1xcXFwvZywnLycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldF90ZmlsZShwYXRoOnN0cmluZyxvbmx5X2ZpcnN0PXRydWUpe1xyXG5cdFx0dHJ5e1xyXG5cdFx0XHRwYXRoID0gcGF0aC5zcGxpdCgnfCcpWzBdLnJlcGxhY2UoJ1tbJywnJykucmVwbGFjZSgnXV0nLCcnKTtcclxuXHRcdFx0bGV0IHRmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZUJ5UGF0aChwYXRoKVxyXG5cdFx0XHRpZih0ZmlsZSl7XHJcblx0XHRcdFx0cmV0dXJuIHRmaWxlO1xyXG5cdFx0XHR9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihvbmx5X2ZpcnN0KXtcclxuICAgICAgICAgICAgICAgIGxldCB0ZmlsZSA9ICh0aGlzLmFwcC5tZXRhZGF0YUNhY2hlIGFzIGFueSkuZ2V0Rmlyc3RMaW5rcGF0aERlc3QocGF0aC5zcGxpdCgnLycpLmxhc3QoKSk7XHJcbiAgICAgICAgICAgICAgICBpZih0ZmlsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRmaWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGxldCB0ZmlsZXMgPSAodGhpcy5hcHAubWV0YWRhdGFDYWNoZSBhcyBhbnkpLmdldExpbmtwYXRoRGVzdChwYXRoLnNwbGl0KCcvJykubGFzdCgpKTtcclxuICAgICAgICAgICAgICAgIGlmKHRmaWxlcyAmJiB0ZmlsZXMubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZmlsZXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9Y2F0Y2h7XHJcblx0XHRcdHJldHVybiBudWxsXHJcblx0XHR9XHJcblx0fVxyXG5cclxuICAgIGdldF9pbmxpbmtzKHRmaWxlOlRGaWxlLG9ubHlfbWQ9dHJ1ZSk6QXJyYXk8VEZpbGU+e1xyXG5cdFx0aWYodGZpbGU9PW51bGwpe3JldHVybiBbXTt9XHJcblx0XHRsZXQgcmVzOkFycmF5PFRGaWxlPiA9IFtdXHJcblxyXG5cdFx0bGV0IGlubGlua3MgPSAodGhpcy5hcHAubWV0YWRhdGFDYWNoZSBhcyBhbnkpLmdldEJhY2tsaW5rc0ZvckZpbGUodGZpbGUpO1xyXG5cdFx0Zm9yKGxldCBbayx2XSBvZiBpbmxpbmtzLmRhdGEpe1xyXG5cdFx0XHRsZXQgY3VyciA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVCeVBhdGgoayk7XHJcblx0XHRcdGlmKGN1cnIpe1xyXG5cdFx0XHRcdHJlcy5wdXNoKGN1cnIpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXM7XHJcblx0fVxyXG5cclxuXHRnZXRfb3V0bGlua3ModGZpbGU6VEZpbGUsb25seV9tZD10cnVlKTpBcnJheTxURmlsZT57XHJcblx0XHRpZih0ZmlsZT09bnVsbCl7cmV0dXJuIFtdO31cclxuXHJcblx0XHRsZXQgbWNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodGZpbGUpO1xyXG5cdFx0aWYoIW1jYWNoZSl7cmV0dXJuIFtdO31cclxuXHJcblx0XHRsZXQgcmVzOkFycmF5PFRGaWxlPiA9IFtdO1xyXG5cdFx0aWYobWNhY2hlLmxpbmtzKXtcclxuXHRcdFx0Zm9yKGxldCBsaW5rIG9mIG1jYWNoZS5saW5rcyl7XHJcblx0XHRcdFx0bGV0IHRmaWxlID0gdGhpcy5nZXRfdGZpbGUobGluay5saW5rKTtcclxuXHRcdFx0XHRpZih0ZmlsZSAmJiAhcmVzLmNvbnRhaW5zKHRmaWxlKSAmJiAhKG9ubHlfbWQgJiYgdGZpbGUuZXh0ZW5zaW9uIT0nbWQnKSl7XHJcblx0XHRcdFx0XHRyZXMucHVzaCh0ZmlsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZihtY2FjaGUuZnJvbnRtYXR0ZXJMaW5rcyl7XHJcblx0XHRcdGZvcihsZXQgbGluayBvZiBtY2FjaGUuZnJvbnRtYXR0ZXJMaW5rcyl7XHJcblx0XHRcdFx0bGV0IHRmaWxlID0gdGhpcy5nZXRfdGZpbGUobGluay5saW5rKTtcclxuXHRcdFx0XHRpZih0ZmlsZSAmJiAhcmVzLmNvbnRhaW5zKHRmaWxlKSAmJiAhKG9ubHlfbWQgJiYgdGZpbGUuZXh0ZW5zaW9uIT0nbWQnKSl7XHJcblx0XHRcdFx0XHRyZXMucHVzaCh0ZmlsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZighb25seV9tZCAmJiBtY2FjaGUuZW1iZWRzKXtcclxuXHRcdFx0Zm9yKGxldCBsaW5rIG9mIG1jYWNoZS5lbWJlZHMpe1xyXG5cdFx0XHRcdGxldCB0ZmlsZSA9IHRoaXMuZ2V0X3RmaWxlKGxpbmsubGluayk7XHJcblx0XHRcdFx0aWYodGZpbGUgJiYgIXJlcy5jb250YWlucyh0ZmlsZSkpe1xyXG5cdFx0XHRcdFx0cmVzLnB1c2godGZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlcztcclxuXHR9XHJcblxyXG5cclxuICAgIGFic3BhdGgodGZpbGU6VEZpbGV8VEZvbGRlcnxzdHJpbmcpe1xyXG4gICAgICAgIGlmKHR5cGVvZiB0ZmlsZSA9PSAnc3RyaW5nJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5yb290KycvJyt0ZmlsZSkucmVwbGFjZSgvXFxcXC9nLCcvJyk7XHJcbiAgICAgICAgfVxyXG5cdFx0ZWxzZSBpZih0ZmlsZSl7XHJcblx0XHRcdHJldHVybiAodGhpcy5yb290KycvJyt0ZmlsZS5wYXRoKS5yZXBsYWNlKC9cXFxcL2csJy8nKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG4gICAgaXNmaWxlKHBhdGg6c3RyaW5nKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcy5leGlzdHNTeW5jKHBhdGgpICYmIHRoaXMuZnMuc3RhdFN5bmMocGF0aCkuaXNGaWxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNkaXIocGF0aDpzdHJpbmcpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZzLmV4aXN0c1N5bmMocGF0aCkgJiYgdGhpcy5mcy5zdGF0U3luYyhwYXRoKS5pc0RpcmVjdG9yeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxpc3RfZGlyKHBhdGg6c3RyaW5nLGFzX2Z1bGxwYXRoPXRydWUpe1xyXG4gICAgICAgIGlmKCF0aGlzLmlzZGlyKHBhdGgpKXtyZXR1cm4gW119XHJcbiAgICAgICAgbGV0IGl0ZW1zID0gdGhpcy5mcy5yZWFkZGlyU3luYyhwYXRoKVxyXG4gICAgICAgIGlmKGFzX2Z1bGxwYXRoKXtcclxuICAgICAgICAgICAgaXRlbXMgPSBpdGVtcy5tYXAoXHJcbiAgICAgICAgICAgICAgICAoeDpzdHJpbmcpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGgrJy8nK3hcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH0gICBcclxuICAgICAgICByZXR1cm4gaXRlbXNcclxuICAgIH1cclxuXHJcbiAgICBmaXJzdF92YWxpZF9kaXIocGF0aHM6QXJyYXk8c3RyaW5nPnxzdHJpbmcpe1xyXG4gICAgICAgIGlmKHR5cGVvZihwYXRocyk9PSdzdHJpbmcnKXtcclxuICAgICAgICAgICAgaWYodGhpcy5pc2RpcihwYXRocykpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhdGhzXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IHBhdGggb2YgcGF0aHMpe1xyXG4gICAgICAgICAgICBpZih0aGlzLmlzZGlyKHBhdGgpKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNlbGVjdF92YWxpZF9kaXIocGF0aHM6QXJyYXk8c3RyaW5nPixwcm9tcHRfaWZfbnVsbD1mYWxzZSl7XHJcbiAgICAgICAgbGV0IHhwYXRocyA9IHBhdGhzLmZpbHRlcigocDpzdHJpbmcpPT50aGlzLmlzZGlyKHApKTtcclxuICAgICAgICBsZXQgcGF0aCA9IG51bGw7XHJcbiAgICAgICAgaWYoeHBhdGhzLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgcGF0aCA9IGF3YWl0IHRoaXMucGx1Z2luLmRpYWxvZ19zdWdnZXN0KHhwYXRocyx4cGF0aHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighcGF0aCAmJiBwcm9tcHRfaWZfbnVsbCl7XHJcbiAgICAgICAgICAgIHBhdGggPSBhd2FpdCB0aGlzLnBsdWdpbi5kaWFsb2dfcHJvbXB0KFwiUm9vdCBvZiB2YXVsdFwiKTtcclxuICAgICAgICAgICAgaWYoIXRoaXMuaXNkaXIocGF0aCkpe1xyXG4gICAgICAgICAgICAgICAgcGF0aCA9IG51bGxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGF0aFxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIG1rZGlyX3JlY3Vyc2l2ZShwYXRoOnN0cmluZyl7XHJcbiAgICAgICAgaWYodGhpcy5pc2RpcihwYXRoKSl7cmV0dXJuIHRydWU7fVxyXG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLnBhdGguZGlybmFtZShwYXRoKTtcclxuICAgICAgICBpZighdGhpcy5pc2RpcihwYXJlbnQpKXtcclxuICAgICAgICAgICAgdGhpcy5ta2Rpcl9yZWN1cnNpdmUocGFyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mcy5ta2RpclN5bmMocGF0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcblx0KiBcdTk2NDRcdTRFRjYgc3JjIFx1NTIzMCBkc3RcdUZGMENcdTRFMERcdTU3MjggdmF1bHQgXHU0RTJEXHVGRjBDXHU5NzAwXHU4OTgxXHU3RUREXHU1QkY5XHU4REVGXHU1Rjg0XHJcblx0KiBvdmVyd3JpdGVcdUZGMENcdTU5MERcdTc2RDZcdUZGMUJtdGltZVx1RkYwQ1x1NjVCMFx1NjU4N1x1NEVGNlx1RkYxQlxyXG5cdCovXHJcbiAgICBjb3B5X2ZpbGUoc3JjOnN0cmluZyxkc3Q6c3RyaW5nLG1vZGU9J3Bhc3M+b3ZlcndyaXRlPm10aW1lJykge1xyXG4gICAgICAgIGxldCBmcyA9IHRoaXMuZnM7XHJcblxyXG4gICAgICAgIG1vZGUgPSBtb2RlLnNwbGl0KCc+JylbMF1cclxuICAgICAgICBpZighZnMuZXhpc3RzU3luYyhzcmMpKXtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihmcy5leGlzdHNTeW5jKGRzdCkpe1xyXG4gICAgICAgICAgICBpZihtb2RlPT09J292ZXJ3cml0ZScpe1xyXG4gICAgICAgICAgICAgICAgZnMudW5saW5rU3luYyhkc3QpO1xyXG4gICAgICAgICAgICAgICAgZnMuY29weUZpbGVTeW5jKHNyYyxkc3QpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ092ZXJ3cml0ZTogJytzcmMrJyB0byAnK2RzdCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfWVsc2UgaWYobW9kZT09PSdtdGltZScpe1xyXG4gICAgICAgICAgICAgICAgLy8gZHN0IFx1NjZGNFx1NjVCMFx1NjVGNlx1OTVGNFx1NUMwRlx1NEU4RSBzcmNcclxuICAgICAgICAgICAgICAgIGlmKGZzLnN0YXRTeW5jKGRzdCkubXRpbWVNczxmcy5zdGF0U3luYyhzcmMpLm10aW1lTXMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGZzLnVubGlua1N5bmMoZHN0KTtcclxuICAgICAgICAgICAgICAgICAgICBmcy5jb3B5RmlsZVN5bmMoc3JjLGRzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZTogJytzcmMrJyB0byAnK2RzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZnMuY29weUZpbGVTeW5jKHNyYyxkc3QpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29weTogJytzcmMrJyB0byAnK2RzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29weV90ZmlsZSh0ZmlsZTpURmlsZSwgZHN0OnN0cmluZyxtb2RlPSdtdGltZScpIHtcclxuXHRcdGlmKHRmaWxlKXtcclxuXHRcdFx0bGV0IHNyYyA9IHRoaXMuYWJzcGF0aCh0ZmlsZSk7XHJcblx0XHRcdHJldHVybiBzcmMgJiYgdGhpcy5jb3B5X2ZpbGUoc3JjLGRzdCxtb2RlKTtcclxuXHRcdH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuICAgIHN5bmNfdGZpbGUodGZpbGU6VEZpbGUsdmF1bHRfcm9vdDpzdHJpbmcsbW9kZT0nbXRpbWUnLGF0dGFjaG1lbnQ9dHJ1ZSxvdXRsaW5rPWZhbHNlKXtcclxuICAgICAgICAvLyBcdTVDMDZcdTdCMTRcdThCQjBcdTk1NUNcdTUwQ0ZcdTc5RkJcdTUyQThcdTUyMzBcdTUyMkJcdTc2ODRcdTVFOTNcdTRFMkRcdUZGMENcdTY1ODdcdTRFRjZcdTdFRDNcdTY3ODRcdTRFMEVcdTVGNTNcdTUyNERcdTVFOTNcdTc2RjhcdTU0MENcclxuICAgICAgICBpZih0ZmlsZSl7XHJcbiAgICAgICAgICAgIHZhdWx0X3Jvb3QgPSB2YXVsdF9yb290LnJlcGxhY2UoL1xcXFwvZywnLycpO1xyXG5cdFx0XHRsZXQgc3JjID0gdGhpcy5yb290ICsgJy8nICsgdGZpbGUucGF0aDtcclxuICAgICAgICAgICAgbGV0IGRzdCA9IHZhdWx0X3Jvb3QrJy8nK3RmaWxlLnBhdGg7XHJcbiAgICAgICAgICAgIHRoaXMubWtkaXJfcmVjdXJzaXZlKHRoaXMucGF0aC5kaXJuYW1lKGRzdCkpO1xyXG5cdFx0XHR0aGlzLmNvcHlfZmlsZShzcmMsZHN0LG1vZGUpO1xyXG4gICAgICAgICAgICBpZihhdHRhY2htZW50KXtcclxuICAgICAgICAgICAgICAgIGxldCB0ZmlsZXMgPSB0aGlzLmdldF9vdXRsaW5rcyh0ZmlsZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IHQgb2YgdGZpbGVzKXtcclxuICAgICAgICAgICAgICAgICAgICBpZighKHQuZXh0ZW5zaW9uPT09J21kJykpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNfdGZpbGUodCx2YXVsdF9yb290LG1vZGUsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKG91dGxpbmspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNfdGZpbGUodCx2YXVsdF9yb290LG1vZGUsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cdFx0fVxyXG4gICAgfVxyXG5cclxuICAgIHN5bmNfdGZvbGRlcih0Zm9sZGVyOlRGb2xkZXIsdmF1bHRfcm9vdDpzdHJpbmcsbW9kZT0nbXRpbWUnLGF0dGFjaG1lbnQ9dHJ1ZSxvdXRsaW5rPWZhbHNlLHN0cmljdD1mYWxzZSl7XHJcbiAgICAgICAgaWYodGZvbGRlcil7XHJcbiAgICAgICAgICAgIGZvcihsZXQgdCBvZiB0Zm9sZGVyLmNoaWxkcmVuKXtcclxuICAgICAgICAgICAgICAgIGlmKHQgaW5zdGFuY2VvZiBURm9sZGVyKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNfdGZvbGRlcih0LHZhdWx0X3Jvb3QsbW9kZSxhdHRhY2htZW50LG91dGxpbmspO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYodCBpbnN0YW5jZW9mIFRGaWxlKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNfdGZpbGUodCx2YXVsdF9yb290LG1vZGUsYXR0YWNobWVudCxvdXRsaW5rKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihzdHJpY3Qpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGRzdCA9IHZhdWx0X3Jvb3QrJy8nK3Rmb2xkZXIucGF0aFxyXG4gICAgICAgICAgICAgICAgbGV0IHNyYyA9IHRoaXMuYWJzcGF0aCh0Zm9sZGVyKVxyXG4gICAgICAgICAgICAgICAgaWYoc3JjICYmIGRzdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVfZmlsZXNfbm90X2luX3NyYyhzcmMsZHN0KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblx0XHR9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsZXRlX2ZpbGVfb3JfZGlyKHBhdGg6c3RyaW5nKXtcclxuICAgICAgICBpZih0aGlzLmlzZmlsZShwYXRoKSl7XHJcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLnBsdWdpbi5kaWFsb2dfc3VnZ2VzdChbJ1x1Mjc0QycsJ1x1MjcxNFx1RkUwRiddLFtmYWxzZSx0cnVlXSxwYXRoKSl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRGVsZXRlIGZpbGU6ICR7cGF0aH1gKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5mcy51bmxpbmtTeW5jKHBhdGgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfWVsc2UgaWYodGhpcy5pc2RpcihwYXRoKSl7XHJcbiAgICAgICAgICAgIGxldCBpdGVtcyA9IHRoaXMubGlzdF9kaXIocGF0aCx0cnVlKVxyXG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5wbHVnaW4uZGlhbG9nX3N1Z2dlc3QoWydcdTI3NEMnLCdcdTI3MTRcdUZFMEYnXSxbZmFsc2UsdHJ1ZV0scGF0aCkpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYERlbGV0ZSBmb2xkZXI6ICR7cGF0aH1gKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5mcy5ybWRpclN5bmMocGF0aClcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIGl0ZW1zKXtcclxuICAgICAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLnBsdWdpbi5kaWFsb2dfc3VnZ2VzdChbJ1x1Mjc0QycsJ1x1MjcxNFx1RkUwRiddLFtmYWxzZSx0cnVlXSxpdGVtKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYERlbGV0ZSBmaWxlOiAke3BhdGh9YClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZV9maWxlX29yX2RpcihpdGVtKVxyXG4gICAgICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVfZmlsZXNfbm90X2luX3NyYyhzcmM6c3RyaW5nLGRzdDpzdHJpbmcpe1xyXG4gICAgICAgIC8vIFx1OTA0RFx1NTM4NiBkc3QgXHU0RTJEXHU2MjQwXHU2NzA5XHU2NTg3XHU0RUY2XHVGRjBDXHU1OTgyXHU2NzlDXHU2N0QwXHU2NTg3XHU0RUY2XHU0RTBEXHU1NzI4c3JjXHU0RTJEXHVGRjBDXHU1MjIwXHU5NjY0XHJcbiAgICAgICAgaWYoIXRoaXMuaXNkaXIoc3JjKSB8fCAhdGhpcy5pc2Rpcihkc3QpKXtyZXR1cm59XHJcbiAgICAgICAgbGV0IGl0ZW1zID0gdGhpcy5saXN0X2Rpcihkc3QsZmFsc2UpXHJcbiAgICAgICAgZm9yKGxldCBpdGVtIG9mIGl0ZW1zKXtcclxuICAgICAgICAgICAgbGV0IGFkc3QgPSBkc3QrJy8nK2l0ZW1cclxuICAgICAgICAgICAgbGV0IGFzcmMgPSBzcmMrJy8nK2l0ZW1cclxuICAgICAgICAgICAgaWYodGhpcy5pc2ZpbGUoYWRzdCkpe1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuaXNmaWxlKGFzcmMpKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZV9maWxlX29yX2RpcihhZHN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5pc2RpcihhZHN0KSl7XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5pc2Rpcihhc3JjKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVfZmlsZV9vcl9kaXIoYWRzdClcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlX2ZpbGVzX25vdF9pbl9zcmMoYXNyYyxhZHN0KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN5bmNfZm9sZGVyKHNyYzpzdHJpbmcsZHN0OnN0cmluZyxtb2RlPSdtdGltZScsc3RyaWN0PWZhbHNlKXtcclxuICAgICAgICBpZighdGhpcy5pc2RpcihzcmMpKXtyZXR1cm59XHJcbiAgICAgICAgdGhpcy5ta2Rpcl9yZWN1cnNpdmUoZHN0KVxyXG4gICAgICAgIGlmKCF0aGlzLmlzZGlyKGRzdCkpe3JldHVybn1cclxuXHJcbiAgICAgICAgbGV0IGl0ZW1zID0gdGhpcy5saXN0X2RpcihzcmMsZmFsc2UpXHJcbiAgICAgICAgZm9yKGxldCBpdGVtIG9mIGl0ZW1zKXtcclxuICAgICAgICAgICAgbGV0IGFzcmMgPSB0aGlzLnBhdGguam9pbihzcmMsaXRlbSlcclxuICAgICAgICAgICAgbGV0IGFkc3QgPSB0aGlzLnBhdGguam9pbihkc3QsaXRlbSlcclxuICAgICAgICAgICAgaWYodGhpcy5pc2ZpbGUoYXNyYykpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3B5X2ZpbGUoYXNyYyxhZHN0LG1vZGUpXHJcbiAgICAgICAgICAgIH1lbHNlIGlmKHRoaXMuaXNkaXIoYXNyYykpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jX2ZvbGRlcihhc3JjLGFkc3QsbW9kZSxzdHJpY3QpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoc3RyaWN0KXtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVfZmlsZXNfbm90X2luX3NyYyhzcmMsZHN0KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb2RpZnkocGF0aDpzdHJpbmcsY2FsbGJhY2s6RnVuY3Rpb24sZW5jb2Rpbmc9J3V0ZjgnKXtcclxuICAgICAgICBsZXQgZnMgPSB0aGlzLmZzO1xyXG4gICAgICAgIGlmKCFmcy5leGlzdHNTeW5jKHBhdGgpKXtyZXR1cm59O1xyXG5cclxuICAgICAgICBmcy5yZWFkRmlsZShwYXRoLCBlbmNvZGluZywgKGVycjpFcnJvciwgZGF0YTpzdHJpbmcpID0+IHtcclxuXHRcdFx0aWYoZXJyKXtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgcnMgPSBjYWxsYmFjayhwYXRoLGRhdGEpO1xyXG5cdFx0XHRmcy53cml0ZUZpbGUocGF0aCwgcnMsIGVuY29kaW5nLCAoZXJyOkVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblx0XHRcdH0pO1xyXG5cdFx0ICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSIsICJcclxuZXhwb3J0IGNsYXNzIFN0cmluZ3N7XHJcbiAgICBsYW5ndWFnZTpzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIGxldCBsYW5nID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYW5ndWFnZScpO1xyXG4gICAgICAgIGlmKGxhbmcpe1xyXG4gICAgICAgICAgICB0aGlzLmxhbmd1YWdlID0gbGFuZztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5sYW5ndWFnZSA9ICdlbic7XHJcbiAgICAgICAgfVxyXG5cdH1cclxuXHJcbiAgICBnZXQgY21kX2V4cG9ydF9jdXJyZW50X25vdGUoKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdTVCRkNcdTUxRkFcdTVGNTNcdTUyNERcdTdCMTRcdThCQjAnXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnRXhwb3J0IGN1cnJlbnQgbm90ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBjbWRfc2V0X3ZleHBvcnRlcigpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1OEJCRVx1N0Y2RVx1NUJGQ1x1NTFGQVx1N0IxNFx1OEJCMFx1OTAwOVx1OTg3OSdcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdTZXQgY29uZmlnIHRvIGV4cG9ydCBub3RlJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNtZF9leHBvcnRfcGx1Z2luKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU1QkZDXHU1MUZBXHU2M0QyXHU0RUY2J1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ0V4cG9ydCBwbHVnaW4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgY21kX2Rvd25sb2FkX2dpdF9yZXBvKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU0RTBCXHU4RjdEIEdpdCBcdTRFRDNcdTVFOTNcdTY1ODdcdTRFRjYnXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnRG93bmxvYWQgZ2l0IHJlcG8nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgcHJvbXB0X3BhdGhfb2ZfZm9sZGVyKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU4RjkzXHU1MTY1XHU2NTg3XHU0RUY2XHU1OTM5XHU4REVGXHU1Rjg0J1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ0lucHV0IHBhdGggb2YgZm9sZGVyJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5vdGljZV9vdXRwdXQoKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdTVCRkNcdTUxRkFcdUZGMUEnXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnT3V0cHV0Oic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IG5vdGljZV9ub3N1Y2hkaXIoKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdTY1RTBcdTY1NDhcdTc2RUVcdTVGNTUnXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnSW52YWlkIHBhdGguJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNldHRpbmdfdmF1bHRfZGlyKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU1RTkzXHU3NkVFXHU1RjU1JztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdSb290IGRpciBvZiB2YXVsdCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBzZXR0aW5nX3N0cmljdF9tb2RlKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU0RTI1XHU2ODNDXHU2QTIxXHU1RjBGPyc7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnU3RyaWN0IG1vZGU/JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNldHRpbmdfc3RyaWN0X21vZGVfZGVzYygpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1NTM3MVx1OTY2OVx1RkYwMVx1NTQwQ1x1NkI2NVx1NjVGNlx1NTIyMFx1OTY2NFx1NzZFRVx1NjgwN1x1NUU5M1x1NEUyRFx1NTkxQVx1NTFGQVx1NzY4NFx1NjU4N1x1NEVGNic7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnRGFuZ2VyISBEZWxldGUgZmlsZXMgb3IgZm9sZGVycyBpbiB0YXJnZXQgdmF1bHQgYnV0IG5vdCBpbiBjdXJyZW50IHZhdWx0Lic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBzZXR0aW5nX2dpdF9yZXBvKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnR2l0IFx1NEVEM1x1NUU5Myc7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnR2l0IHJlcG9zaXRvcnknO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXRlbV9jb3B5X2RhdGFfanNvbigpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1NTkwRFx1NTIzNiBkYXRhLmpzb24nO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ0NvcHkgZGF0YS5qc29uJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGl0ZW1fc2tpcF9kYXRhX2pzb24oKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdThERjNcdThGQzcgZGF0YS5qc29uJztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdTa2lwIGRhdGEuanNvbic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBpdGVtX3N5bmNfdmF1bHQoKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdTU0MENcdTZCNjVcdTUyMzBcdTUxNzZcdTVCODNcdTVFOTMnO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ1N5bmMgdG8gb3RoZXIgdmF1bHQnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGxldCBzdHJpbmdzID0gbmV3IFN0cmluZ3MoKTsiLCAiaW1wb3J0IHsgXHJcblx0QXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLFBsdWdpblxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCBOb3RlU3luY1BsdWdpbiBmcm9tICcuLi9tYWluJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTXlTZXR0aW5ncyB7XHJcblx0c3RyaWN0X21vZGU6IGJvb2xlYW47XHJcblx0dmF1bHREaXI6c3RyaW5nO1xyXG5cdGdpdF9yZXBvOnN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15U2V0dGluZ3MgPSB7XHJcblx0c3RyaWN0X21vZGU6ZmFsc2UsXHJcblx0dmF1bHREaXI6ICcnLFxyXG5cdGdpdF9yZXBvOiAnaHR0cHM6Ly9naXRodWIuY29tL3ppZ2hvbGRpbmcvT2JzaWRpYW5aL3RyZWUvbWFzdGVyXFxuaHR0cHM6Ly9naXRlZS5jb20vemlnaG9sZGluZy9PYnNpZGlhblovdHJlZS9tYXN0ZXInXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOb3RlU3luY1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IE5vdGVTeW5jUGx1Z2luO1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE5vdGVTeW5jUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGdldFNldHRpbmdWYWx1ZShmaWVsZDoga2V5b2YgTXlTZXR0aW5ncykge1xyXG5cdFx0cmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzW2ZpZWxkXTtcclxuXHR9XHJcblxyXG5cdGFkZF90b2dnbGUobmFtZTpzdHJpbmcsZGVzYzpzdHJpbmcsZmllbGQ6a2V5b2YgTXlTZXR0aW5ncyl7XHJcblx0XHRsZXQge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblx0XHRsZXQgdmFsdWUgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgYW55KVtmaWVsZF0gYXMgYm9vbGVhbjtcclxuXHRcdGxldCBpdGVtID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpICBcclxuXHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0LnNldERlc2MoZGVzYylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodmFsdWUpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTpuZXZlcikgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NbZmllbGRdID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0cmV0dXJuIGl0ZW07XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUodGhpcy5wbHVnaW4uc3RyaW5ncy5zZXR0aW5nX3ZhdWx0X2RpcilcclxuXHRcdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudmF1bHREaXIpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnZhdWx0RGlyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHR0aGlzLmFkZF90b2dnbGUoXHJcblx0XHRcdHRoaXMucGx1Z2luLnN0cmluZ3Muc2V0dGluZ19zdHJpY3RfbW9kZSxcclxuXHRcdFx0dGhpcy5wbHVnaW4uc3RyaW5ncy5zZXR0aW5nX3N0cmljdF9tb2RlX2Rlc2MsXHJcblx0XHRcdCdzdHJpY3RfbW9kZSdcclxuXHRcdCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUodGhpcy5wbHVnaW4uc3RyaW5ncy5zZXR0aW5nX2dpdF9yZXBvKVxyXG5cdFx0XHRcdC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5naXRfcmVwbylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2l0X3JlcG8gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBcclxuXHROb3RpY2UsIFRGaWxlXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IE5vdGVTeW5jUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBpdCB9IGZyb20gJ25vZGU6dGVzdCc7XHJcblxyXG5jb25zdCBjbWRfZXhwb3J0X2N1cnJlbnRfbm90ZSA9IChwbHVnaW46Tm90ZVN5bmNQbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdleHBvcnRfY3VycmVudF9ub3RlJyxcclxuXHRuYW1lOiBwbHVnaW4uc3RyaW5ncy5jbWRfZXhwb3J0X2N1cnJlbnRfbm90ZSxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0bGV0IHRmaWxlID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0YXdhaXQgcGx1Z2luLmV4cG9ydF9yZWFkbWUodGZpbGUsbnVsbCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGNtZF9zZXRfdmV4cG9ydGVyID0gKHBsdWdpbjpOb3RlU3luY1BsdWdpbikgPT4gKHtcclxuXHRpZDogJ3NldF92ZXhwb3J0ZXInLFxyXG5cdG5hbWU6IHBsdWdpbi5zdHJpbmdzLmNtZF9zZXRfdmV4cG9ydGVyLFxyXG5cdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcblx0XHRsZXQgdGZpbGUgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZighdGZpbGUpe3JldHVybn1cclxuXHRcdGxldCBkaXIgPSBhd2FpdCBwbHVnaW4uZGlhbG9nX3Byb21wdChwbHVnaW4uc3RyaW5ncy5wcm9tcHRfcGF0aF9vZl9mb2xkZXIpO1xyXG5cdFx0bGV0IGl0ZW06IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7fTtcclxuXHRcdGlmKHBsdWdpbi5mc0VkaXRvci5mcy5leGlzdHNTeW5jKGRpcikpe1xyXG5cdFx0XHRpdGVtWydEaXInXSA9IGRpcjtcclxuXHRcdH1cclxuXHRcdGl0ZW1bJ05hbWUnXSA9ICdyZWFkTWUnO1xyXG5cdFx0aXRlbVsnQXNzZXRzJ10gPSAnLi9hc3NldHMnO1xyXG5cdFx0aXRlbVsnUmVtb3ZlTWV0YSddID0gdHJ1ZTtcclxuXHRcdGl0ZW1bJ1VzZUdpdExpbmsnXSA9IHRydWU7XHJcblxyXG5cclxuXHRcdGF3YWl0IHBsdWdpbi5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKFxyXG5cdFx0XHR0ZmlsZSxcclxuXHRcdFx0YXN5bmMoZm0pID0+e1xyXG5cdFx0XHRcdGZtW3BsdWdpbi55YW1sXSA9IGl0ZW1cclxuXHRcdFx0fVxyXG5cdFx0KVxyXG5cdH1cclxufSk7XHJcblxyXG5jb25zdCBjbWRfZXhwb3J0X3BsdWdpbiA9IChwbHVnaW46Tm90ZVN5bmNQbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdleHBvcnRfcGx1Z2luJyxcclxuXHRuYW1lOiBwbHVnaW4uc3RyaW5ncy5jbWRfZXhwb3J0X3BsdWdpbixcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHJcblx0XHRsZXQgcGx1Z2lucyA9IE9iamVjdC5rZXlzKChwbHVnaW4uYXBwIGFzIGFueSkucGx1Z2lucy5wbHVnaW5zKTtcclxuXHRcdGxldCBwID0gYXdhaXQgcGx1Z2luLmRpYWxvZ19zdWdnZXN0KHBsdWdpbnMscGx1Z2lucyk7XHJcblx0XHRsZXQgZXBsdWdpbiA9IChwbHVnaW4uYXBwIGFzIGFueSkucGx1Z2lucy5nZXRQbHVnaW4ocCk7XHJcblx0XHRpZihlcGx1Z2luKXtcclxuXHRcdFx0bGV0IHBhdGhzID0gcGx1Z2luLnNldHRpbmdzLnZhdWx0RGlyLnNwbGl0KFwiXFxuXCIpXHJcblx0XHRcdGxldCB0YXJnZXQgPSBhd2FpdCBwbHVnaW4uZnNFZGl0b3Iuc2VsZWN0X3ZhbGlkX2RpcihcclxuXHRcdFx0XHRwYXRoc1xyXG5cdFx0XHQpXHJcblx0XHRcdGlmKHRhcmdldCl7XHJcblx0XHRcdFx0bGV0IGl0ZW1zID0gcGx1Z2luLmZzRWRpdG9yLmxpc3RfZGlyKHRhcmdldCxmYWxzZSlcclxuXHRcdFx0XHRpdGVtcyA9IGl0ZW1zLmZpbHRlcigoeDpzdHJpbmcpPT54LnN0YXJ0c1dpdGgoJy4nKSAmJiB4IT0nLmdpdCcpLmZpbHRlcihcclxuXHRcdFx0XHRcdCh4OnN0cmluZyk9PntcclxuXHRcdFx0XHRcdFx0bGV0IHBhdGggPSBwbHVnaW4uZnNFZGl0b3IucGF0aC5qb2luKHRhcmdldCx4KVxyXG5cdFx0XHRcdFx0XHRpZighcGx1Z2luLmZzRWRpdG9yLmlzZGlyKHBhdGgpKXtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2VcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRsZXQgaXRlbXMgPSBwbHVnaW4uZnNFZGl0b3IubGlzdF9kaXIocGF0aCxmYWxzZSlcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGl0ZW1zLmNvbnRhaW5zKCdwbHVnaW5zJylcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHQpXHJcblx0XHRcdFx0aWYoaXRlbXMubGVuZ3RoPT0xKXtcclxuXHRcdFx0XHRcdHRhcmdldCA9IHBsdWdpbi5mc0VkaXRvci5wYXRoLmpvaW4odGFyZ2V0LGl0ZW1zWzBdLCdwbHVnaW5zJylcclxuXHRcdFx0XHR9ZWxzZSBpZihpdGVtcy5sZW5ndGg+MSl7XHJcblx0XHRcdFx0XHRsZXQgaXRlbSA9IGF3YWl0IHBsdWdpbi5kaWFsb2dfc3VnZ2VzdChcclxuXHRcdFx0XHRcdFx0aXRlbXMsaXRlbXMsJ2NvbmZpZydcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHRcdGlmKGl0ZW0pe1xyXG5cdFx0XHRcdFx0XHR0YXJnZXQgPSBwbHVnaW4uZnNFZGl0b3IucGF0aC5qb2luKHRhcmdldCxpdGVtLCdwbHVnaW5zJylcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoIXBsdWdpbi5mc0VkaXRvci5mcy5leGlzdHNTeW5jKHRhcmdldCkgfHwgXHJcblx0XHRcdFx0cGx1Z2luLmZzRWRpdG9yLnBhdGguYmFzZW5hbWUodGFyZ2V0KSE9J3BsdWdpbnMnKXtcclxuXHRcdFx0XHR0YXJnZXQgPSBhd2FpdCBwbHVnaW4uZGlhbG9nX3Byb21wdChwbHVnaW4uc3RyaW5ncy5wcm9tcHRfcGF0aF9vZl9mb2xkZXIpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0YXJnZXQgPSB0YXJnZXQucmVwbGFjZSgvXFxcXC9nLCcvJyk7XHJcblx0XHRcdGlmKCF0YXJnZXQuZW5kc1dpdGgoJy8nICsgcCkpe1xyXG5cdFx0XHRcdHRhcmdldCA9IHRhcmdldCArICcvJyArIHA7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoIXBsdWdpbi5mc0VkaXRvci5mcy5leGlzdHNTeW5jKHRhcmdldCkpe1xyXG5cdFx0XHRcdHBsdWdpbi5mc0VkaXRvci5mcy5ta2RpclN5bmModGFyZ2V0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRsZXQgaXRlbXMgPSBbJ21haW4uanMnLCdtYW5pZmVzdC5qc29uJywnc3R5bGVzLmNzcyddO1xyXG5cdFx0XHRsZXQgZGogPSBhd2FpdCBwbHVnaW4uZGlhbG9nX3N1Z2dlc3QoXHJcblx0XHRcdFx0W3BsdWdpbi5zdHJpbmdzLml0ZW1fc2tpcF9kYXRhX2pzb24scGx1Z2luLnN0cmluZ3MuaXRlbV9jb3B5X2RhdGFfanNvbl0sXHJcblx0XHRcdFx0W2ZhbHNlLHRydWVdLFxyXG5cdFx0XHRcdCcnXHJcblx0XHRcdClcclxuXHRcdFx0aWYoZGope1xyXG5cdFx0XHRcdGl0ZW1zLnB1c2goJ2RhdGEuanNvbicpXHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yKGxldCBpdGVtIG9mIGl0ZW1zKXtcclxuXHRcdFx0XHRsZXQgc3JjID0gYCR7cGx1Z2luLmZzRWRpdG9yLnJvb3R9LyR7ZXBsdWdpbi5tYW5pZmVzdC5kaXJ9LyR7aXRlbX1gO1xyXG5cdFx0XHRcdGxldCBkc3QgPSBgJHt0YXJnZXR9LyR7aXRlbX1gO1xyXG5cdFx0XHRcdGxldCBmbGFnID0gcGx1Z2luLmZzRWRpdG9yLmNvcHlfZmlsZShzcmMsZHN0LCdvdmVyd3JpdGUnKTtcclxuXHRcdFx0XHRpZihmbGFnKXtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGBDb3B5ICR7aXRlbX0gdG8gJHt0YXJnZXR9YCw1MDAwKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG5jb25zdCBjbWRfZG93bmxvYWRfZ2l0X3JlcG8gPSAocGx1Z2luOk5vdGVTeW5jUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAnY21kX2Rvd25sb2FkX2dpdF9yZXBvJyxcclxuXHRuYW1lOiBwbHVnaW4uc3RyaW5ncy5jbWRfZG93bmxvYWRfZ2l0X3JlcG8sXHJcblx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdGxldCByZXBvcyA9IHBsdWdpbi5zZXR0aW5ncy5naXRfcmVwby5zcGxpdCgnXFxuJylcclxuXHRcdGxldCByZXBvID0gYXdhaXQgcGx1Z2luLmRpYWxvZ19zdWdnZXN0KHJlcG9zLHJlcG9zKTtcclxuXHRcdGlmKCFyZXBvKXtyZXR1cm59XHJcblxyXG5cdFx0bGV0IG1hdGNoID0gcmVwby5tYXRjaCgvXmh0dHBzPzpcXC9cXC8oLiopXFwuY29tXFwvKFteL10qKVxcLyhbXi9dKilcXC90cmVlXFwvKFteL10qKVxcLz8oLiopJC8pO1xyXG5cdFx0aWYoIW1hdGNoKXtyZXR1cm59XHJcblxyXG5cdFx0bGV0IFNPVVJDRSA9IG1hdGNoWzFdOyAvLyBnaXRlZVxyXG5cdFx0bGV0IHJlcG9Pd25lciA9IG1hdGNoWzJdOyAvLyBcdTVGMDBcdTUzRDFcdTgwMDVcclxuXHRcdGxldCByZXBvTmFtZSA9IG1hdGNoWzNdOyAvLyBcdTk4NzlcdTc2RUVcdTU0MERcdTc5RjBcclxuXHRcdGxldCBicmFuY2ggPSBtYXRjaFs0XTsgLy8gXHU1MjA2XHU2NTJGXHU1NDBEXHU3OUYwXHJcblx0XHRsZXQgcGF0aCA9IG1hdGNoWzVdOyAgLy8gXHU1MjFEXHU1OUNCXHU4REVGXHU1Rjg0XHJcblx0XHRcclxuXHRcdGFzeW5jIGZ1bmN0aW9uIGxpc3RfZmlsZXNfb2ZfcGF0aChyZXBvT3duZXI6c3RyaW5nLCByZXBvTmFtZTpzdHJpbmcsIHBhdGg6c3RyaW5nLCBicmFuY2ggPSAnbWFzdGVyJykge1xyXG5cdFx0XHRsZXQgdXJsO1xyXG5cdFx0XHRpZihTT1VSQ0U9PSdnaXRodWInKXtcclxuXHRcdFx0XHR1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG9Pd25lcn0vJHtyZXBvTmFtZX0vY29udGVudHMvJHtwYXRofT9yZWY9JHticmFuY2h9YDtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0dXJsID0gYGh0dHBzOi8vZ2l0ZWUuY29tL2FwaS92NS9yZXBvcy8ke3JlcG9Pd25lcn0vJHtyZXBvTmFtZX0vY29udGVudHMvJHtwYXRofT9yZWY9JHticmFuY2h9YFxyXG5cdFx0XHR9XHJcblx0XHRcdGxldCByZXEgPSBhd2FpdCAod2luZG93IGFzIGFueSkucmVxdWVzdFVybCh1cmwpXHJcblx0XHRcdHJlcSA9IEpTT04ucGFyc2UocmVxLnRleHQpXHJcblx0XHRcdGlmKCFBcnJheS5pc0FycmF5KHJlcSkpe1xyXG5cdFx0XHRcdHJlcSA9IFtyZXFdXHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHJlcVxyXG5cdFx0fVxyXG5cclxuXHRcdGFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkX2ZpbGUodXJsOnN0cmluZyxmb2xkZXJfcGF0aDpzdHJpbmcsZmlsZV9uYW1lOnN0cmluZyl7XHJcblx0XHRcdGxldCByZXEgPSBhd2FpdCAod2luZG93IGFzIGFueSkucmVxdWVzdFVybCh1cmwpXHJcblx0XHRcdC8vIHJlcSA9IEpTT04ucGFyc2UocmVxLnRleHQpXHJcblx0XHRcdC8vIGxldCBjdHggPSBhdG9iKHJlcS5jb250ZW50KVxyXG5cdFx0XHRsZXQgY3R4ID0gcmVxLnRleHRcclxuXHRcdFx0bGV0IHRmaWxlX3BhdGggPSBgJHtmb2xkZXJfcGF0aH0vJHtmaWxlX25hbWV9YFxyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhjdHgpXHJcblx0XHRcdGlmKGZvbGRlcl9wYXRoLnN0YXJ0c1dpdGgoJy4nKSl7XHJcblx0XHRcdFx0bGV0IGZsYWcgPSAocGx1Z2luLmFwcC52YXVsdCBhcyBhbnkpLmV4aXN0cyhmb2xkZXJfcGF0aCk7XHJcblx0XHRcdFx0aWYoIWZsYWcpe1xyXG5cdFx0XHRcdFx0YXdhaXQgcGx1Z2luLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyX3BhdGgpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZsYWcgPSAocGx1Z2luLmFwcC52YXVsdCBhcyBhbnkpLmV4aXN0cyh0ZmlsZV9wYXRoKTtcclxuXHRcdFx0XHRpZihmbGFnKXtcclxuXHRcdFx0XHRcdGF3YWl0IChwbHVnaW4uYXBwLnZhdWx0IGFzIGFueSkuYWRhcHRlci5yZW1vdmUodGZpbGVfcGF0aClcclxuXHRcdFx0XHRcdGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKHRmaWxlX3BhdGgsY3R4KVxyXG5cdFx0XHRcdFx0bmV3IE5vdGljZShgXHU2NkY0XHU2NUIwXHVGRjFBJHt0ZmlsZV9wYXRofWAsNTAwMClcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKHRmaWxlX3BhdGgsY3R4KVxyXG5cdFx0XHRcdFx0bmV3IE5vdGljZShgXHU0RTBCXHU4RjdEXHVGRjFBJHt0ZmlsZV9wYXRofWAsNTAwMClcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGxldCBmb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEZvbGRlckJ5UGF0aChmb2xkZXJfcGF0aClcclxuXHRcdFx0XHRpZighZm9sZGVyKXtcclxuXHRcdFx0XHRcdGZvbGRlciA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlcl9wYXRoKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRsZXQgdGZpbGUgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEZpbGVCeVBhdGgodGZpbGVfcGF0aClcclxuXHRcdFx0XHRpZighdGZpbGUpe1xyXG5cdFx0XHRcdFx0YXdhaXQgcGx1Z2luLmFwcC52YXVsdC5jcmVhdGUodGZpbGVfcGF0aCxjdHgpO1xyXG5cdFx0XHRcdFx0bmV3IE5vdGljZShgXHU0RTBCXHU4RjdEXHVGRjFBJHt0ZmlsZV9wYXRofWAsNTAwMClcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdGF3YWl0IHBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KHRmaWxlLGN0eClcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYFx1NjZGNFx1NjVCMFx1RkYxQSR7dGZpbGUucGF0aH1gLDUwMDApXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0fVxyXG5cclxuXHRcdGFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkX2ZpbGVfb2ZfZGlyKHJlcG9Pd25lcjpzdHJpbmcsIHJlcG9OYW1lOnN0cmluZywgcGF0aDpzdHJpbmcsIGJyYW5jaDpzdHJpbmcpe1xyXG5cdFx0XHRsZXQgaXRlbXMgPSBhd2FpdCBsaXN0X2ZpbGVzX29mX3BhdGgocmVwb093bmVyLCByZXBvTmFtZSwgcGF0aCwgYnJhbmNoKVxyXG5cdFx0XHRsZXQgbmMgPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbignbm90ZS1jaGFpbicpO1xyXG5cdFx0XHRsZXQgaXRlbSA9IGF3YWl0IG5jLmRpYWxvZ19zdWdnZXN0KFxyXG5cdFx0XHRcdGl0ZW1zLm1hcCgoeDphbnkpPT4oeC50eXBlPT0nZmlsZSc/J1x1RDgzRFx1RENDMyc6J1x1RDgzRFx1RENDMScpK3gucGF0aCksXHJcblx0XHRcdFx0aXRlbXMsJycsdHJ1ZVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRpZighaXRlbSl7cmV0dXJufVxyXG5cdFx0XHRpZih0eXBlb2YoaXRlbSk9PSdzdHJpbmcnICYmIGl0ZW09PSdhbGwnKXtcclxuXHRcdFx0XHRmb3IobGV0IGl0ZW0gb2YgaXRlbXMpe1xyXG5cdFx0XHRcdFx0aWYoaXRlbS50eXBlPT0nZmlsZScpe1xyXG5cdFx0XHRcdFx0XHRsZXQgZmlsZV9uYW1lID0gaXRlbS5wYXRoLnNwbGl0KCcvJykubGFzdCgpO1xyXG5cdFx0XHRcdFx0XHRsZXQgZm9sZGVyX3BhdGggPSBpdGVtLnBhdGguc2xpY2UoMCxpdGVtLnBhdGgubGVuZ3RoLWZpbGVfbmFtZS5sZW5ndGgtMSk7XHJcblx0XHRcdFx0XHRcdGF3YWl0IGRvd25sb2FkX2ZpbGUoaXRlbS5kb3dubG9hZF91cmwsZm9sZGVyX3BhdGgsZmlsZV9uYW1lKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fWVsc2UgaWYoaXRlbS50eXBlPT0nZmlsZScpe1xyXG5cdFx0XHRcdGxldCBmaWxlX25hbWUgPSBpdGVtLnBhdGguc3BsaXQoJy8nKS5sYXN0KCk7XHJcblx0XHRcdFx0bGV0IGZvbGRlcl9wYXRoID0gaXRlbS5wYXRoLnNsaWNlKDAsaXRlbS5wYXRoLmxlbmd0aC1maWxlX25hbWUubGVuZ3RoLTEpO1xyXG5cdFx0XHRcdGF3YWl0IGRvd25sb2FkX2ZpbGUoaXRlbS5kb3dubG9hZF91cmwsZm9sZGVyX3BhdGgsZmlsZV9uYW1lKVxyXG5cdFx0XHR9ZWxzZSBpZihpdGVtLnR5cGU9PSdkaXInKXtcclxuXHRcdFx0XHRhd2FpdCBkb3dubG9hZF9maWxlX29mX2RpcihyZXBvT3duZXIsIHJlcG9OYW1lLCBpdGVtLnBhdGgsIGJyYW5jaClcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGRvd25sb2FkX2ZpbGVfb2ZfZGlyKHJlcG9Pd25lciwgcmVwb05hbWUsIHBhdGgsIGJyYW5jaClcclxuXHJcblx0fVxyXG59KTtcclxuXHJcblxyXG5jb25zdCBjb21tYW5kQnVpbGRlcnM6QXJyYXk8RnVuY3Rpb24+ID0gW1xyXG4gICAgXHJcbl07XHJcblxyXG5jb25zdCBjb21tYW5kQnVpbGRlcnNEZXNrdG9wOkFycmF5PEZ1bmN0aW9uPiA9IFtcclxuXHRjbWRfZXhwb3J0X2N1cnJlbnRfbm90ZSxcclxuXHRjbWRfc2V0X3ZleHBvcnRlcixcclxuXHRjbWRfZXhwb3J0X3BsdWdpbixcclxuXHRjbWRfZG93bmxvYWRfZ2l0X3JlcG9cclxuXTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRDb21tYW5kcyhwbHVnaW46Tm90ZVN5bmNQbHVnaW4pIHtcclxuICAgIGNvbW1hbmRCdWlsZGVycy5mb3JFYWNoKChjKSA9PiB7XHJcbiAgICAgICAgcGx1Z2luLmFkZENvbW1hbmQoYyhwbHVnaW4pKTtcclxuICAgIH0pO1xyXG5cdGlmKChwbHVnaW4uYXBwIGFzIGFueSkuaXNNb2JpbGU9PWZhbHNlKXtcclxuXHRcdGNvbW1hbmRCdWlsZGVyc0Rlc2t0b3AuZm9yRWFjaCgoYykgPT4ge1xyXG5cdFx0XHRwbHVnaW4uYWRkQ29tbWFuZChjKHBsdWdpbikpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59IiwgImltcG9ydCB7IEZ1enp5U3VnZ2VzdE1vZGFsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB0eXBlIHsgRnV6enlNYXRjaCAsIEFwcH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG4vLyBcdTZERkJcdTUyQTBcdTdDN0JcdTU3OEJcdTU4RjBcdTY2MEVcclxuaW50ZXJmYWNlIFN1Z2dlc3RlckNob29zZXIge1xyXG5cdHZhbHVlczoge1xyXG5cdFx0aXRlbTogc3RyaW5nO1xyXG5cdFx0bWF0Y2g6IHsgc2NvcmU6IG51bWJlcjsgbWF0Y2hlczogdW5rbm93bltdIH07XHJcblx0fVtdO1xyXG5cdHNlbGVjdGVkSXRlbTogbnVtYmVyO1xyXG5cdFtrZXk6IHN0cmluZ106IHVua25vd247XHJcbn1cclxuXHJcbi8vIFx1NjI2OVx1NUM1NUZ1enp5U3VnZ2VzdE1vZGFsXHU3Njg0XHU3QzdCXHU1NzhCXHJcbmludGVyZmFjZSBFeHRlbmRlZEZ1enp5U3VnZ2VzdE1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8c3RyaW5nPiB7XHJcblx0Y2hvb3NlcjogU3VnZ2VzdGVyQ2hvb3NlcjtcclxufVxyXG5cclxudHlwZSBPcHRpb25zID0ge1xyXG5cdGxpbWl0OiBGdXp6eVN1Z2dlc3RNb2RhbDxzdHJpbmc+W1wibGltaXRcIl07XHJcblx0ZW1wdHlTdGF0ZVRleHQ6IEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz5bXCJlbXB0eVN0YXRlVGV4dFwiXTtcclxuXHRwbGFjZWhvbGRlcjogUGFyYW1ldGVyczxcclxuXHRcdEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz5bXCJzZXRQbGFjZWhvbGRlclwiXVxyXG5cdD5bMF0gZXh0ZW5kcyBzdHJpbmdcclxuXHRcdD8gc3RyaW5nXHJcblx0XHQ6IG5ldmVyO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvcHkgZnJvbSBRdWlja0FkZFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXRTdWdnZXN0ZXIgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcclxuXHRwcml2YXRlIHJlc29sdmVQcm9taXNlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcclxuXHRwcml2YXRlIHJlamVjdFByb21pc2U6IChyZWFzb24/OiB1bmtub3duKSA9PiB2b2lkO1xyXG5cdHB1YmxpYyBwcm9taXNlOiBQcm9taXNlPHN0cmluZz47XHJcblx0cHJpdmF0ZSByZXNvbHZlZDogYm9vbGVhbjtcclxuXHRpbnB1dEVsOiBhbnk7XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgU3VnZ2VzdChcclxuXHRcdGFwcDogQXBwLFxyXG5cdFx0ZGlzcGxheUl0ZW1zOiBzdHJpbmdbXSxcclxuXHRcdGl0ZW1zOiBzdHJpbmdbXSxcclxuXHRcdG9wdGlvbnM6IFBhcnRpYWw8T3B0aW9ucz4gPSB7fVxyXG5cdCkge1xyXG5cdFx0Y29uc3QgbmV3U3VnZ2VzdGVyID0gbmV3IElucHV0U3VnZ2VzdGVyKFxyXG5cdFx0XHRhcHAsXHJcblx0XHRcdGRpc3BsYXlJdGVtcyxcclxuXHRcdFx0aXRlbXMsXHJcblx0XHRcdG9wdGlvbnNcclxuXHRcdCk7XHJcblx0XHRyZXR1cm4gbmV3U3VnZ2VzdGVyLnByb21pc2U7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdHByaXZhdGUgZGlzcGxheUl0ZW1zOiBzdHJpbmdbXSxcclxuXHRcdHByaXZhdGUgaXRlbXM6IHN0cmluZ1tdLFxyXG5cdFx0b3B0aW9uczogUGFydGlhbDxPcHRpb25zPiA9IHt9XHJcblx0KSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cclxuXHRcdHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcclxuXHRcdFx0dGhpcy5yZWplY3RQcm9taXNlID0gcmVqZWN0O1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG5cdFx0XHRpZiAoZXZlbnQuY29kZSAhPT0gXCJUYWJcIikge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gXHU0RjdGXHU3NTI4XHU3QzdCXHU1NzhCXHU2NUFEXHU4QTAwXHU2NzY1XHU4QkJGXHU5NUVFY2hvb3NlclxyXG5cdFx0XHRjb25zdCBzZWxmID0gdGhpcyBhcyB1bmtub3duIGFzIEV4dGVuZGVkRnV6enlTdWdnZXN0TW9kYWw7XHJcblx0XHRcdGNvbnN0IHsgdmFsdWVzLCBzZWxlY3RlZEl0ZW0gfSA9IHNlbGYuY2hvb3NlcjtcclxuXHJcblx0XHRcdGNvbnN0IHsgdmFsdWUgfSA9IHRoaXMuaW5wdXRFbDtcclxuXHRcdFx0dGhpcy5pbnB1dEVsLnZhbHVlID0gdmFsdWVzW3NlbGVjdGVkSXRlbV0uaXRlbSA/PyB2YWx1ZTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmIChvcHRpb25zLnBsYWNlaG9sZGVyKSB0aGlzLnNldFBsYWNlaG9sZGVyKG9wdGlvbnMucGxhY2Vob2xkZXIpO1xyXG5cdFx0aWYgKG9wdGlvbnMubGltaXQpIHRoaXMubGltaXQgPSBvcHRpb25zLmxpbWl0O1xyXG5cdFx0aWYgKG9wdGlvbnMuZW1wdHlTdGF0ZVRleHQpXHJcblx0XHRcdHRoaXMuZW1wdHlTdGF0ZVRleHQgPSBvcHRpb25zLmVtcHR5U3RhdGVUZXh0O1xyXG5cclxuXHRcdHRoaXMub3BlbigpO1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbVRleHQoaXRlbTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGlmIChpdGVtID09PSB0aGlzLmlucHV0RWwudmFsdWUpIHJldHVybiBpdGVtO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLmRpc3BsYXlJdGVtc1t0aGlzLml0ZW1zLmluZGV4T2YoaXRlbSldO1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbXMoKTogc3RyaW5nW10ge1xyXG5cdFx0aWYgKHRoaXMuaW5wdXRFbC52YWx1ZSA9PT0gXCJcIikgcmV0dXJuIHRoaXMuaXRlbXM7XHJcblx0XHRyZXR1cm4gW3RoaXMuaW5wdXRFbC52YWx1ZSwgLi4udGhpcy5pdGVtc107XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKFxyXG5cdFx0dmFsdWU6IEZ1enp5TWF0Y2g8c3RyaW5nPixcclxuXHRcdGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnRcclxuXHQpIHtcclxuXHRcdHRoaXMucmVzb2x2ZWQgPSB0cnVlO1xyXG5cdFx0c3VwZXIuc2VsZWN0U3VnZ2VzdGlvbih2YWx1ZSwgZXZ0KTtcclxuXHR9XHJcblxyXG5cdG9uQ2hvb3NlSXRlbShpdGVtOiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMucmVzb2x2ZWQgPSB0cnVlO1xyXG5cdFx0dGhpcy5yZXNvbHZlUHJvbWlzZShpdGVtKTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRzdXBlci5vbkNsb3NlKCk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLnJlc29sdmVkKSB0aGlzLnJlamVjdFByb21pc2UoXCJubyBpbnB1dCBnaXZlbi5cIik7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGlhbG9nX3N1Z2dlc3QoZGlzcGxheUl0ZW1zOkFycmF5PHN0cmluZz4saXRlbXM6QXJyYXk8YW55PixwbGFjZWhvbGRlcj0nJykge1xyXG5cdHRyeXtcclxuXHRcdHJldHVybiBhd2FpdCBJbnB1dFN1Z2dlc3Rlci5TdWdnZXN0KFxyXG5cdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0ZGlzcGxheUl0ZW1zLFxyXG5cdFx0XHRpdGVtcyxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlcixcclxuXHRcdFx0fVxyXG5cdFx0KVxyXG5cdH1jYXRjaChlcnJvcil7XHJcblx0XHRcclxuXHRcdHJldHVybiBudWxsXHJcblx0fVxyXG5cdFxyXG59XHJcbiIsICJpbXBvcnQgdHlwZSB7IEFwcH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEJ1dHRvbkNvbXBvbmVudCwgTW9kYWwsIFRleHRDb21wb25lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbi8qKlxyXG4gKiBDb3B5IGZyb20gUXVpY2tBZGRcclxuICovXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnB1dFByb21wdCBleHRlbmRzIE1vZGFsIHtcclxuXHRwdWJsaWMgd2FpdEZvckNsb3NlOiBQcm9taXNlPHN0cmluZz47XHJcblxyXG5cdHByaXZhdGUgcmVzb2x2ZVByb21pc2U6IChpbnB1dDogc3RyaW5nKSA9PiB2b2lkO1xyXG5cdHByaXZhdGUgcmVqZWN0UHJvbWlzZTogKHJlYXNvbj86IHVua25vd24pID0+IHZvaWQ7XHJcblx0cHJpdmF0ZSBkaWRTdWJtaXQgPSBmYWxzZTtcclxuXHRwcml2YXRlIGlucHV0Q29tcG9uZW50OiBUZXh0Q29tcG9uZW50O1xyXG5cdHByaXZhdGUgaW5wdXQ6IHN0cmluZztcclxuXHRwcml2YXRlIHJlYWRvbmx5IHBsYWNlaG9sZGVyOiBzdHJpbmc7XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgUHJvbXB0KFxyXG5cdFx0YXBwOiBBcHAsXHJcblx0XHRoZWFkZXI6IHN0cmluZyxcclxuXHRcdHBsYWNlaG9sZGVyPzogc3RyaW5nLFxyXG5cdFx0dmFsdWU/OiBzdHJpbmdcclxuXHQpOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdFx0Y29uc3QgbmV3UHJvbXB0TW9kYWwgPSBuZXcgSW5wdXRQcm9tcHQoXHJcblx0XHRcdGFwcCxcclxuXHRcdFx0aGVhZGVyLFxyXG5cdFx0XHRwbGFjZWhvbGRlcixcclxuXHRcdFx0dmFsdWVcclxuXHRcdCk7XHJcblx0XHRyZXR1cm4gbmV3UHJvbXB0TW9kYWwud2FpdEZvckNsb3NlO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGNvbnN0cnVjdG9yKFxyXG5cdFx0YXBwOiBBcHAsXHJcblx0XHRwcml2YXRlIGhlYWRlcjogc3RyaW5nLFxyXG5cdFx0cGxhY2Vob2xkZXI/OiBzdHJpbmcsXHJcblx0XHR2YWx1ZT86IHN0cmluZ1xyXG5cdCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMucGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlciA/PyBcIlwiO1xyXG5cdFx0dGhpcy5pbnB1dCA9IHZhbHVlID8/IFwiXCI7XHJcblxyXG5cdFx0dGhpcy53YWl0Rm9yQ2xvc2UgPSBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0dGhpcy5yZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XHJcblx0XHRcdHRoaXMucmVqZWN0UHJvbWlzZSA9IHJlamVjdDtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdFx0dGhpcy5vcGVuKCk7XHJcblxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBkaXNwbGF5KCkge1xyXG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcyhcInF1aWNrQWRkTW9kYWxcIiwgXCJxYUlucHV0UHJvbXB0XCIpO1xyXG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdHRoaXMudGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuaGVhZGVyO1xyXG5cclxuXHRcdGNvbnN0IG1haW5Db250ZW50Q29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xyXG5cdFx0dGhpcy5pbnB1dENvbXBvbmVudCA9IHRoaXMuY3JlYXRlSW5wdXRGaWVsZChcclxuXHRcdFx0bWFpbkNvbnRlbnRDb250YWluZXIsXHJcblx0XHRcdHRoaXMucGxhY2Vob2xkZXIsXHJcblx0XHRcdHRoaXMuaW5wdXRcclxuXHRcdCk7XHJcblx0XHR0aGlzLmNyZWF0ZUJ1dHRvbkJhcihtYWluQ29udGVudENvbnRhaW5lcik7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgY3JlYXRlSW5wdXRGaWVsZChcclxuXHRcdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0XHRwbGFjZWhvbGRlcj86IHN0cmluZyxcclxuXHRcdHZhbHVlPzogc3RyaW5nXHJcblx0KSB7XHJcblx0XHRjb25zdCB0ZXh0Q29tcG9uZW50ID0gbmV3IFRleHRDb21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdCh0ZXh0Q29tcG9uZW50IGFzIGFueSkuaW5wdXRFbC5jbGFzc0xpc3QuYWRkKFwiaW5wdXQtZmllbGRcIik7IFxyXG5cdFx0KHRleHRDb21wb25lbnQgYXMgYW55KVxyXG5cdFx0XHQuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIgPz8gXCJcIilcclxuXHRcdFx0LnNldFZhbHVlKHZhbHVlID8/IFwiXCIpXHJcblx0XHRcdC5vbkNoYW5nZSgodmFsdWU6c3RyaW5nKSA9PiAodGhpcy5pbnB1dCA9IHZhbHVlKSlcclxuXHRcdFx0LmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5zdWJtaXRFbnRlckNhbGxiYWNrKTtcclxuXHJcblx0XHRyZXR1cm4gdGV4dENvbXBvbmVudDtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlQnV0dG9uKFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdHRleHQ6IHN0cmluZyxcclxuXHRcdGNhbGxiYWNrOiAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB1bmtub3duXHJcblx0KSB7XHJcblx0XHRjb25zdCBidG4gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lcik7XHJcblx0XHRidG4uc2V0QnV0dG9uVGV4dCh0ZXh0KS5vbkNsaWNrKGNhbGxiYWNrKTtcclxuXHJcblx0XHRyZXR1cm4gYnRuO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjcmVhdGVCdXR0b25CYXIobWFpbkNvbnRlbnRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRjb25zdCBidXR0b25CYXJDb250YWluZXI6IEhUTUxEaXZFbGVtZW50ID1cclxuXHRcdFx0bWFpbkNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCk7XHJcblx0XHR0aGlzLmNyZWF0ZUJ1dHRvbihcclxuXHRcdFx0YnV0dG9uQmFyQ29udGFpbmVyLFxyXG5cdFx0XHRcIk9rXCIsXHJcblx0XHRcdHRoaXMuc3VibWl0Q2xpY2tDYWxsYmFja1xyXG5cdFx0KS5zZXRDdGEoKTtcclxuXHRcdHRoaXMuY3JlYXRlQnV0dG9uKFxyXG5cdFx0XHRidXR0b25CYXJDb250YWluZXIsXHJcblx0XHRcdFwiQ2FuY2VsXCIsXHJcblx0XHRcdHRoaXMuY2FuY2VsQ2xpY2tDYWxsYmFja1xyXG5cdFx0KTtcclxuXHJcblx0XHRidXR0b25CYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImJ1dHRvbi1iYXJcIik7XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3VibWl0Q2xpY2tDYWxsYmFjayA9IChldnQ6IE1vdXNlRXZlbnQpID0+IHRoaXMuc3VibWl0KCk7XHJcblx0cHJpdmF0ZSBjYW5jZWxDbGlja0NhbGxiYWNrID0gKGV2dDogTW91c2VFdmVudCkgPT4gdGhpcy5jYW5jZWwoKTtcclxuXHJcblx0cHJpdmF0ZSBzdWJtaXRFbnRlckNhbGxiYWNrID0gKGV2dDogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG5cdFx0aWYgKCFldnQuaXNDb21wb3NpbmcgJiYgZXZ0LmtleSA9PT0gXCJFbnRlclwiKSB7XHJcblx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLnN1Ym1pdCgpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHByaXZhdGUgc3VibWl0KCkge1xyXG5cdFx0dGhpcy5kaWRTdWJtaXQgPSB0cnVlO1xyXG5cclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY2FuY2VsKCkge1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZXNvbHZlSW5wdXQoKSB7XHJcblx0XHRpZiAoIXRoaXMuZGlkU3VibWl0KSB0aGlzLnJlamVjdFByb21pc2UoXCJObyBpbnB1dCBnaXZlbi5cIik7XHJcblx0XHRlbHNlIHRoaXMucmVzb2x2ZVByb21pc2UodGhpcy5pbnB1dCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbW92ZUlucHV0TGlzdGVuZXIoKSB7XHJcblx0XHR0aGlzLmlucHV0Q29tcG9uZW50LmlucHV0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuXHRcdFx0XCJrZXlkb3duXCIsXHJcblx0XHRcdHRoaXMuc3VibWl0RW50ZXJDYWxsYmFja1xyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpIHtcclxuXHRcdHN1cGVyLm9uT3BlbigpO1xyXG5cclxuXHRcdHRoaXMuaW5wdXRDb21wb25lbnQuaW5wdXRFbC5mb2N1cygpO1xyXG5cdFx0dGhpcy5pbnB1dENvbXBvbmVudC5pbnB1dEVsLnNlbGVjdCgpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdHN1cGVyLm9uQ2xvc2UoKTtcclxuXHRcdHRoaXMucmVzb2x2ZUlucHV0KCk7XHJcblx0XHR0aGlzLnJlbW92ZUlucHV0TGlzdGVuZXIoKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGlhbG9nX3Byb21wdChoZWFkZXI6IHN0cmluZz0nSW5wdXQnLCBwbGFjZWhvbGRlcjogc3RyaW5nPScnLHZhbHVlOnN0cmluZz0nJykge1xyXG5cdHRyeXtcclxuXHRcdHJldHVybiBhd2FpdCBJbnB1dFByb21wdC5Qcm9tcHQoXHJcblx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRoZWFkZXIsXHJcblx0XHRcdHBsYWNlaG9sZGVyLFxyXG4gICAgICAgICAgICB2YWx1ZVxyXG5cdFx0KVxyXG5cdH1jYXRjaHtcclxuXHRcdHJldHVybiBudWxsXHJcblx0fVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBOEM7OztBQ0M5QyxzQkFBNEc7QUFHckcsSUFBTSxXQUFOLE1BQWM7QUFBQSxFQU1qQixZQUFZLFFBQXNCO0FBQzlCLFNBQUssU0FBUztBQUNkLFNBQUssTUFBTSxPQUFPO0FBQ2xCLFNBQUssS0FBTSxPQUFPLElBQUksTUFBTSxRQUFnQjtBQUM1QyxTQUFLLE9BQVEsT0FBTyxJQUFJLE1BQU0sUUFBZ0I7QUFBQSxFQUNsRDtBQUFBLEVBRUEsSUFBSSxPQUFNO0FBQ04sUUFBSSxJQUFJLEtBQUssT0FBTyxJQUFJLE1BQU07QUFDOUIsV0FBTyxFQUFFLFNB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QU8sYUFBYSxVQUFTLEdBQUk7QUFDckMsUUFBRyxRQUFPO0FBQ1QsVUFBSSxTQUFTLEtBQUssU0FBUyxhQUFhLE9BQU0sS0FBSztBQUNuRCxVQUFJLE9BQU8sS0FBSyxTQUFTLEtBQUssS0FBSyxLQUFJLE1BQU07QUFDN0MsV0FBSyxTQUFTLGdCQUFnQixJQUFJO0FBQ2xDLGVBQVEsS0FBSyxRQUFPO0FBQ25CLFlBQUcsRUFBRSxFQUFFLGNBQVksT0FBTTtBQUN4QixjQUFJLE9BQU8sS0FBSyxTQUFTLFdBQVcsR0FBRSxPQUFLLE1BQUksRUFBRSxXQUFTLE1BQUksRUFBRSxTQUFTO0FBQ3pFLGNBQUcsTUFBSztBQUNQLGdCQUFJLHdCQUFPLFFBQVEsRUFBRSxRQUFPLEdBQUk7QUFBQSxVQUNqQztBQUFBLFFBQ0Q7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgInRmaWxlIiwgImVyciIsICJpbXBvcnRfb2JzaWRpYW4iLCAidmFsdWUiLCAiaW1wb3J0X29ic2lkaWFuIiwgIml0ZW1zIiwgInJlcG9Pd25lciIsICJyZXBvTmFtZSIsICJwYXRoIiwgImJyYW5jaCIsICJpdGVtIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAidmFsdWUiXQp9Cg==
