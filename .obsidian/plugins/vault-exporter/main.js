/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => VaultExpoterPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/fseditor.ts
var import_obsidian = require("obsidian");
var FsEditor = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.fs = require("fs");
    this.path = require("path");
  }
  get root() {
    let a = this.plugin.app.vault.adapter;
    return a.basePath.replace(/\\/g, "/");
  }
  get notechain() {
    let nc = this.plugin.app.plugins.getPlugin("note-chain");
    return nc;
  }
  abspath(tfile) {
    if (tfile) {
      return (this.root + "/" + tfile.path).replace(/\\/g, "/");
    } else {
      return null;
    }
  }
  isfile(path) {
    return this.fs.existsSync(path) && this.fs.statSync(path).isFile();
  }
  isdir(path) {
    return this.fs.existsSync(path) && this.fs.statSync(path).isDirectory();
  }
  list_dir(path, as_fullpath = true) {
    if (!this.isdir(path)) {
      return [];
    }
    let items = this.fs.readdirSync(path);
    if (as_fullpath) {
      items = items.map(
        (x) => {
          return path + "/" + x;
        }
      );
    }
    return items;
  }
  first_valid_dir(paths) {
    if (typeof paths == "string") {
      if (this.isdir(paths)) {
        return paths;
      } else {
        return null;
      }
    }
    for (let path of paths) {
      if (this.isdir(path)) {
        return path;
      }
    }
    return null;
  }
  async select_valid_dir(paths) {
    let xpaths = paths.filter((p) => this.isdir(p));
    if (xpaths.length === 0) {
      return null;
    } else if (xpaths.length == 1) {
      return xpaths[0];
    } else {
      let nc = this.plugin.app.plugins.getPlugin("note-chain");
      if (nc) {
        let path = await nc.chain.tp_suggester(xpaths, xpaths);
        return path;
      } else {
        return null;
      }
    }
  }
  mkdir_recursive(path) {
    if (this.isdir(path)) {
      return true;
    }
    let parent = this.path.dirname(path);
    if (!this.isdir(parent)) {
      this.mkdir_recursive(parent);
    }
    this.fs.mkdirSync(path);
  }
  /**
  * 附件 src 到 dst，不在 vault 中，需要绝对路径
  * overwrite，复盖；mtime，新文件；
  */
  copy_file(src, dst, mode = "pass>overwrite>mtime") {
    let fs = this.fs;
    mode = mode.split(">")[0];
    if (!fs.existsSync(src)) {
      return false;
    }
    if (fs.existsSync(dst)) {
      if (mode === "overwrite") {
        fs.unlinkSync(dst);
        fs.copyFileSync(src, dst);
        return true;
      } else if (mode === "mtime") {
        if (fs.statSync(dst).mtimeMs < fs.statSync(src).mtimeMs) {
          fs.unlinkSync(dst);
          fs.copyFileSync(src, dst);
          return true;
        }
      }
    } else {
      fs.copyFileSync(src, dst);
      return true;
    }
    return false;
  }
  copy_tfile(tfile, dst, mode = "mtime") {
    if (tfile) {
      let src = this.abspath(tfile);
      return src && this.copy_file(src, dst, mode);
    }
    return false;
  }
  mirror_tfile(tfile, vault_root, mode = "mtime", attachment = true, outlink = false) {
    if (tfile) {
      vault_root = vault_root.replace(/\\/g, "/");
      let src = this.root + "/" + tfile.path;
      let dst = vault_root + "/" + tfile.path;
      this.mkdir_recursive(this.path.dirname(dst));
      this.copy_file(src, dst, mode);
      if (attachment) {
        let nc = this.notechain;
        if (!nc) {
          return;
        }
        let tfiles = nc.chain.get_outlinks(tfile, false);
        for (let t of tfiles) {
          if (!(t.extension === "md")) {
            this.mirror_tfile(t, vault_root, mode, false);
          } else if (outlink) {
            this.mirror_tfile(t, vault_root, mode, false);
          }
        }
      }
    }
  }
  mirror_tfolder(tfolder, vault_root, mode = "mtime", attachment = true, outlink = false, strict = false) {
    if (tfolder) {
      for (let t of tfolder.children) {
        if (t instanceof import_obsidian.TFolder) {
          this.mirror_tfolder(t, vault_root, mode, attachment, outlink);
        } else if (t instanceof import_obsidian.TFile) {
          this.mirror_tfile(t, vault_root, mode, attachment, outlink);
        }
      }
      if (strict) {
        let dst = vault_root + "/" + tfolder.path;
        let src = this.abspath(tfolder);
        if (src && dst) {
          this.remove_files_not_in_src(src, dst);
        }
      }
    }
  }
  delete_file_or_dir(path) {
    if (this.isfile(path)) {
      this.fs.unlinkSync(path);
    } else if (this.isdir(path)) {
      let items = this.list_dir(path, true);
      for (let item of items) {
        this.delete_file_or_dir(item);
      }
      this.fs.rmdirSync(path);
    }
  }
  remove_files_not_in_src(src, dst) {
    if (!this.isdir(src) || !this.isdir(dst)) {
      return;
    }
    let items = this.list_dir(dst, false);
    for (let item of items) {
      let adst = dst + "/" + item;
      let asrc = src + "/" + item;
      if (this.isfile(adst)) {
        if (!this.isfile(asrc)) {
          this.fs.unlinkSync(adst);
        }
      } else if (this.isdir(adst)) {
        if (!this.isdir(asrc)) {
          this.delete_file_or_dir(adst);
        } else {
          this.remove_files_not_in_src(asrc, adst);
        }
      }
    }
  }
  mirror_folder(src, dst, mode = "mtime", strict = false) {
    if (!this.isdir(src)) {
      return;
    }
    this.mkdir_recursive(dst);
    if (!this.isdir(dst)) {
      return;
    }
    let items = this.list_dir(src, false);
    for (let item of items) {
      let asrc = this.path.join(src, item);
      let adst = this.path.join(dst, item);
      if (this.isfile(asrc)) {
        this.copy_file(asrc, adst, mode);
      } else if (this.isdir(asrc)) {
        this.mirror_folder(asrc, adst, mode, strict);
      }
    }
    if (strict) {
      this.remove_files_not_in_src(src, dst);
    }
  }
  modify(path, callback, encoding = "utf8") {
    let fs = this.fs;
    if (!fs.existsSync(path)) {
      return;
    }
    ;
    fs.readFile(
      path,
      encoding,
      (err, data) => {
        if (err) {
          console.error("Error reading file:", err);
        }
        let rs = callback(path, data);
        fs.writeFile(path, rs, encoding, (err2) => {
          if (err2) {
            console.error("Error writing file:", err2);
          } else {
            console.log("File content updated successfully.");
          }
        });
      }
    );
  }
};

// src/strings.ts
var Strings = class {
  constructor() {
    let lang = window.localStorage.getItem("language");
    if (lang) {
      this.language = lang;
    } else {
      this.language = "en";
    }
  }
  get cmd_export_current_note() {
    if (this.language == "zh") {
      return "\u5BFC\u51FA\u5F53\u524D\u7B14\u8BB0";
    } else {
      return "Export current note";
    }
  }
  get cmd_set_vexporter() {
    if (this.language == "zh") {
      return "\u8BBE\u7F6E\u5BFC\u51FA\u7B14\u8BB0\u9009\u9879";
    } else {
      return "Set config to export note";
    }
  }
  get cmd_export_plugin() {
    if (this.language == "zh") {
      return "\u5BFC\u51FA\u63D2\u4EF6";
    } else {
      return "Export plugin";
    }
  }
  get prompt_path_of_folder() {
    if (this.language == "zh") {
      return "\u8F93\u5165\u6587\u4EF6\u5939\u8DEF\u5F84";
    } else {
      return "Input path of folder";
    }
  }
  get notice_output() {
    if (this.language == "zh") {
      return "\u5BFC\u51FA\uFF1A";
    } else {
      return "Output:";
    }
  }
  get notice_nosuchdir() {
    if (this.language == "zh") {
      return "\u65E0\u6548\u76EE\u5F55";
    } else {
      return "Invaid path.";
    }
  }
  get setting_plugin_dir() {
    if (this.language == "zh") {
      return "\u63D2\u4EF6\u5BFC\u51FA\u76EE\u5F55";
    } else {
      return "Plugin dir to export";
    }
  }
  get setting_vault_dir() {
    if (this.language == "zh") {
      return "\u5E93\u76EE\u5F55";
    } else {
      return "Root dir of vault";
    }
  }
};
var strings = new Strings();

// src/setting.ts
var import_obsidian2 = require("obsidian");
var DEFAULT_SETTINGS = {
  pluginDirExporter: "",
  vaultDir: ""
};
var VExporterSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  getSettingValue(field) {
    return this.plugin.settings[field];
  }
  add_toggle(name, desc, field) {
    let { containerEl } = this;
    let value = this.plugin.settings[field];
    let item = new import_obsidian2.Setting(containerEl).setName(name).setDesc(desc).addToggle(
      (text) => text.setValue(value).onChange(async (value2) => {
        this.plugin.settings[field] = value2;
        await this.plugin.saveSettings();
      })
    );
    return item;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName(this.plugin.strings.setting_plugin_dir).addTextArea((text) => text.setValue(this.plugin.settings.pluginDirExporter).onChange(async (value) => {
      this.plugin.settings.pluginDirExporter = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName(this.plugin.strings.setting_vault_dir).addTextArea((text) => text.setValue(this.plugin.settings.vaultDir).onChange(async (value) => {
      this.plugin.settings.vaultDir = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/commands.ts
var cmd_export_current_note = (plugin) => ({
  id: "cmd_export_current_note",
  name: plugin.strings.cmd_export_current_note,
  callback: async () => {
    const nc = plugin.notechain;
    let tfile = nc.chain.current_note;
    await plugin.export_readme(tfile, null);
  }
});
var cmd_set_vexporter = (plugin) => ({
  id: "cmd_set_vexporter",
  name: plugin.strings.cmd_set_vexporter,
  callback: async () => {
    const nc = plugin.notechain;
    let dir = await nc.chain.tp_prompt(plugin.strings.prompt_path_of_folder);
    let item = {};
    if (plugin.fsEditor.fs.existsSync(dir)) {
      item["Dir"] = dir;
    }
    item["Name"] = "readMe";
    item["Assets"] = "./assets";
    item["RemoveMeta"] = true;
    item["UseGitLink"] = true;
    await nc.editor.set_frontmatter(
      nc.chain.current_note,
      "vexporter",
      item
    );
  }
});
var cmd_export_plugin = (plugin) => ({
  id: "cmd_export_plugin",
  name: plugin.strings.cmd_export_plugin,
  callback: async () => {
    const nc = plugin.notechain;
    let plugins = Object.keys(plugin.app.plugins.plugins);
    let p = await nc.chain.tp_suggester(plugins, plugins);
    let eplugin = plugin.app.plugins.getPlugin(p);
    if (eplugin) {
      let target = await plugin.fsEditor.select_valid_dir(
        plugin.settings.pluginDirExporter.split("\n")
      );
      if (!plugin.fsEditor.fs.existsSync(target)) {
        target = await nc.chain.tp_prompt(plugin.strings.prompt_path_of_folder);
      }
      target = target.replace(/\\/g, "/");
      if (!target.endsWith("/" + p)) {
        target = target + "/" + p;
      }
      if (!plugin.fsEditor.fs.existsSync(target)) {
        plugin.fsEditor.fs.mkdirSync(target);
      }
      let items = ["main.js", "manifest.json", "styles.css"];
      let dj = await plugin.fsEditor.notechain.chain.tp_suggester(
        ["true", "false"],
        [true, false],
        true,
        "Export data.json?"
      );
      if (dj) {
        items.push("data.json");
      }
      for (let item of items) {
        let src = `${plugin.fsEditor.root}/${eplugin.manifest.dir}/${item}`;
        let dst = `${target}/${item}`;
        plugin.fsEditor.copy_file(src, dst, "overwrite");
      }
    }
  }
});
var commandBuilders = [];
var commandBuildersDesktop = [
  cmd_export_current_note,
  cmd_set_vexporter,
  cmd_export_plugin
];
function addCommands(plugin) {
  commandBuilders.forEach((c) => {
    plugin.addCommand(c(plugin));
  });
  if (plugin.app.isMobile == false) {
    commandBuildersDesktop.forEach((c) => {
      plugin.addCommand(c(plugin));
    });
  }
}

// main.ts
var VaultExpoterPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    if (this.app.workspace.layoutReady) {
      await this._onload_();
    } else {
      this.app.workspace.onLayoutReady(
        async () => {
          await this._onload_();
        }
      );
    }
  }
  async _onload_() {
    this.strings = new Strings();
    await this.loadSettings();
    this.fsEditor = new FsEditor(this);
    this.addSettingTab(new VExporterSettingTab(this.app, this));
    addCommands(this);
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        menu.addItem((item) => {
          item.setTitle("Mirror to other vault").setIcon("document").onClick(async () => {
            let dst = await this.fsEditor.select_valid_dir(
              this.settings.vaultDir.split("\n")
            );
            if (!dst) {
              let nc = this.app.plugins.getPlugin("note-chain");
              if (!nc) {
                new import_obsidian3.Notice("Plugin note-chain is needed!");
                return;
              }
              dst = await nc.chain.tp_prompt("Root of vault");
              if (!this.fsEditor.isdir(dst)) {
                new import_obsidian3.Notice("Invalid root: " + dst);
                return;
              }
            }
            if (file instanceof import_obsidian3.TFile) {
              this.fsEditor.mirror_tfile(file, dst, "mtime", true, false);
            } else if (file instanceof import_obsidian3.TFolder) {
              this.fsEditor.mirror_tfolder(file, dst, "mtime", true, false);
            }
          });
        });
      })
    );
  }
  onunload() {
  }
  get notechain() {
    return this.app.plugins.getPlugin("note-chain");
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async export_readme(tfile, dst) {
    var _a, _b, _c, _d;
    let nc = this.app.plugins.getPlugin("note-chain");
    if (!tfile) {
      tfile = nc.chain.current_note;
    }
    if (!dst) {
      dst = (_a = nc.editor.get_frontmatter(tfile, "vexporter")) == null ? void 0 : _a.Dir;
      if (!dst) {
        dst = await nc.chain.tp_prompt("Path of LocalGitProject");
      }
    }
    if (!dst || !this.fsEditor.fs.existsSync(dst)) {
      new import_obsidian3.Notice(this.strings.notice_nosuchdir, 3e3);
      return;
    }
    dst = dst.replace(/\\/g, "/");
    let tmp;
    let name = (_b = nc.editor.get_frontmatter(tfile, "vexporter")) == null ? void 0 : _b.Name;
    if (name && !(name === "")) {
      tmp = dst + "/" + name + ".md";
    } else {
      tmp = dst + "/" + tfile.basename + ".md";
    }
    if (this.fsEditor.copy_tfile(tfile, tmp)) {
      if ((_c = nc.editor.get_frontmatter(tfile, "vexporter")) == null ? void 0 : _c.RemoveMeta) {
        const ufunc = (path, data) => {
          var _a2, _b2;
          let res = data;
          if ((_a2 = nc.editor.get_frontmatter(tfile, "vexporter")) == null ? void 0 : _a2.RemoveMeta) {
            res = res.replace(
              /---[\n(\r\n)][\s\S]*?---[\n(\r\n)]/,
              ""
            );
          }
          if (((_b2 = nc.editor.get_frontmatter(tfile, "vexporter")) == null ? void 0 : _b2.UseGitLink) && assets) {
            res = res.replace(
              /\!\[\[(.*?)\]\]/g,
              (match, name2) => {
                return `![${name2}](${assets}/${name2.replace(/ /g, "%20")})`;
              }
            );
          }
          return res;
        };
        await this.fsEditor.modify(tmp, ufunc);
      }
    }
    let assets = (_d = nc.editor.get_frontmatter(tfile, "vexporter")) == null ? void 0 : _d.Assets;
    if (assets) {
      let olinks = nc.chain.get_outlinks(tfile);
      let adir = dst + "/" + assets;
      this.fsEditor.mkdir_recursive(adir);
      for (let f of olinks) {
        if (!(f.extension === "md")) {
          this.fsEditor.copy_tfile(f, adir + "/" + f.basename + "." + f.extension);
        }
      }
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvZnNlZGl0b3IudHMiLCAic3JjL3N0cmluZ3MudHMiLCAic3JjL3NldHRpbmcudHMiLCAic3JjL2NvbW1hbmRzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgKiBhcyBNb2R1bGUgZnJvbSAnbW9kdWxlJztcclxuaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IEZzRWRpdG9yIH0gZnJvbSAnc3JjL2ZzZWRpdG9yJztcclxuaW1wb3J0IHsgU3RyaW5ncyB9IGZyb20gJ3NyYy9zdHJpbmdzJztcclxuaW1wb3J0IHtWRXhwb3J0ZXJTZXR0aW5ncyxWRXhwb3J0ZXJTZXR0aW5nVGFiLERFRkFVTFRfU0VUVElOR1N9IGZyb20gJ3NyYy9zZXR0aW5nJ1xyXG5cclxuaW1wb3J0IHsgYWRkQ29tbWFuZHMgfSBmcm9tICdzcmMvY29tbWFuZHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmF1bHRFeHBvdGVyUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzdHJpbmdzIDogU3RyaW5ncztcclxuXHRzZXR0aW5nczogVkV4cG9ydGVyU2V0dGluZ3M7XHJcblx0ZnNFZGl0b3IgOiBGc0VkaXRvcjtcclxuXHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGlmKHRoaXMuYXBwLndvcmtzcGFjZS5sYXlvdXRSZWFkeSl7XHJcblx0XHRcdGF3YWl0IHRoaXMuX29ubG9hZF8oKVxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KFxyXG5cdFx0XHRcdGFzeW5jKCk9PntcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuX29ubG9hZF8oKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0KVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgX29ubG9hZF8oKSB7XHJcblx0XHR0aGlzLnN0cmluZ3MgPSBuZXcgU3RyaW5ncygpO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblx0XHR0aGlzLmZzRWRpdG9yID0gbmV3IEZzRWRpdG9yKHRoaXMpO1xyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVkV4cG9ydGVyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0YWRkQ29tbWFuZHModGhpcyk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW1lbnVcIiwgKG1lbnUsIGZpbGUpID0+IHtcclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdC5zZXRUaXRsZShcIk1pcnJvciB0byBvdGhlciB2YXVsdFwiKVxyXG5cdFx0XHRcdFx0LnNldEljb24oXCJkb2N1bWVudFwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRsZXQgZHN0ID0gYXdhaXQgdGhpcy5mc0VkaXRvci5zZWxlY3RfdmFsaWRfZGlyKFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MudmF1bHREaXIuc3BsaXQoXCJcXG5cIilcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0aWYoIWRzdCl7XHJcblx0XHRcdFx0XHRcdFx0bGV0IG5jPSAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zLmdldFBsdWdpbihcIm5vdGUtY2hhaW5cIik7XHJcblx0XHRcdFx0XHRcdFx0aWYoIW5jKXtcclxuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJQbHVnaW4gbm90ZS1jaGFpbiBpcyBuZWVkZWQhXCIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRkc3QgPSBhd2FpdCBuYy5jaGFpbi50cF9wcm9tcHQoXCJSb290IG9mIHZhdWx0XCIpO1xyXG5cdFx0XHRcdFx0XHRcdGlmKCF0aGlzLmZzRWRpdG9yLmlzZGlyKGRzdCkpe1xyXG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkludmFsaWQgcm9vdDogXCIgKyBkc3QpO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZihmaWxlIGluc3RhbmNlb2YgVEZpbGUpe1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZnNFZGl0b3IubWlycm9yX3RmaWxlKGZpbGUsZHN0LCdtdGltZScsdHJ1ZSxmYWxzZSk7XHJcblxyXG5cdFx0XHRcdFx0XHR9ZWxzZSBpZihmaWxlIGluc3RhbmNlb2YgVEZvbGRlcil7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5mc0VkaXRvci5taXJyb3JfdGZvbGRlcihmaWxlLGRzdCwnbXRpbWUnLHRydWUsZmFsc2UpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdFxyXG5cdH1cclxuXHJcblx0Z2V0IG5vdGVjaGFpbigpe1xyXG5cdFx0cmV0dXJuICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMuZ2V0UGx1Z2luKCdub3RlLWNoYWluJyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cdFxyXG5cdGFzeW5jIGV4cG9ydF9yZWFkbWUodGZpbGU6VEZpbGUsZHN0OnN0cmluZ3xudWxsKXtcclxuXHRcdGxldCBuYyA9ICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMuZ2V0UGx1Z2luKCdub3RlLWNoYWluJyk7XHJcblx0XHRpZighdGZpbGUpe3RmaWxlID0gbmMuY2hhaW4uY3VycmVudF9ub3RlO31cclxuXHRcdFxyXG5cdFx0Ly8gXHU4QkJFXHU3RjZFXHU4RjkzXHU1MUZBXHU3NkVFXHU1RjU1XHJcblx0XHRpZighZHN0KXtcclxuXHRcdFx0ZHN0ID0gbmMuZWRpdG9yLmdldF9mcm9udG1hdHRlcih0ZmlsZSwndmV4cG9ydGVyJyk/LkRpcjtcclxuXHRcdFx0aWYoIWRzdCl7XHJcblx0XHRcdFx0ZHN0ID0gYXdhaXQgbmMuY2hhaW4udHBfcHJvbXB0KCdQYXRoIG9mIExvY2FsR2l0UHJvamVjdCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZighZHN0IHx8ICF0aGlzLmZzRWRpdG9yLmZzLmV4aXN0c1N5bmMoZHN0KSl7XHJcblx0XHRcdG5ldyBOb3RpY2UodGhpcy5zdHJpbmdzLm5vdGljZV9ub3N1Y2hkaXIsMzAwMCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGRzdCA9IGRzdC5yZXBsYWNlKC9cXFxcL2csJy8nKTtcclxuXHRcdFxyXG5cdFx0XHJcblx0XHQvLyBcdTVCRkNcdTUxRkFcdTVGNTNcdTUyNERcdTdCMTRcdThCQjBcclxuXHRcdGxldCB0bXA7XHJcblx0XHRsZXQgbmFtZSA9IG5jLmVkaXRvci5nZXRfZnJvbnRtYXR0ZXIodGZpbGUsJ3ZleHBvcnRlcicpPy5OYW1lO1xyXG5cdFx0aWYobmFtZSAmJiAhKG5hbWU9PT0nJykpe1xyXG5cdFx0XHR0bXAgPSBkc3QrJy8nK25hbWUrJy5tZCc7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0dG1wID0gZHN0KycvJyt0ZmlsZS5iYXNlbmFtZSsnLm1kJztcclxuXHRcdH1cclxuXHJcblx0XHRpZih0aGlzLmZzRWRpdG9yLmNvcHlfdGZpbGUodGZpbGUsdG1wKSl7XHJcblx0XHRcdGlmKG5jLmVkaXRvci5nZXRfZnJvbnRtYXR0ZXIodGZpbGUsJ3ZleHBvcnRlcicpPy5SZW1vdmVNZXRhKXtcclxuXHRcdFx0XHRjb25zdCB1ZnVuYyA9IChwYXRoOnN0cmluZyxkYXRhOnN0cmluZyk9PntcclxuXHRcdFx0XHRcdGxldCByZXMgPSBkYXRhO1xyXG5cdFx0XHRcdFx0aWYobmMuZWRpdG9yLmdldF9mcm9udG1hdHRlcih0ZmlsZSwndmV4cG9ydGVyJyk/LlJlbW92ZU1ldGEpe1xyXG5cdFx0XHRcdFx0XHRyZXMgPSByZXMucmVwbGFjZShcclxuXHRcdFx0XHRcdFx0XHQvLS0tW1xcbihcXHJcXG4pXVtcXHNcXFNdKj8tLS1bXFxuKFxcclxcbildLyxcclxuXHRcdFx0XHRcdFx0XHQnJ1xyXG5cdFx0XHRcdFx0XHQpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZihuYy5lZGl0b3IuZ2V0X2Zyb250bWF0dGVyKHRmaWxlLCd2ZXhwb3J0ZXInKT8uVXNlR2l0TGluayAmJiBhc3NldHMpe1xyXG5cdFx0XHRcdFx0XHRyZXMgPSByZXMucmVwbGFjZShcclxuXHRcdFx0XHRcdFx0XHQvXFwhXFxbXFxbKC4qPylcXF1cXF0vZyxcclxuXHRcdFx0XHRcdFx0XHQobWF0Y2g6YW55LCBuYW1lOnN0cmluZykgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGAhWyR7bmFtZX1dKCR7YXNzZXRzfS8ke25hbWUucmVwbGFjZSgvIC9nLCclMjAnKX0pYDtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdClcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiByZXNcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5mc0VkaXRvci5tb2RpZnkodG1wLHVmdW5jKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Ly8gXHU1QkZDXHU1MUZBXHU5NjQ0XHU0RUY2XHJcblx0XHRsZXQgYXNzZXRzID0gbmMuZWRpdG9yLmdldF9mcm9udG1hdHRlcih0ZmlsZSwndmV4cG9ydGVyJyk/LkFzc2V0cztcclxuXHRcdGlmKGFzc2V0cyl7XHJcblx0XHRcdGxldCBvbGlua3MgPSBuYy5jaGFpbi5nZXRfb3V0bGlua3ModGZpbGUpO1xyXG5cdFx0XHRsZXQgYWRpciA9IGRzdCsnLycrYXNzZXRzO1xyXG5cdFx0XHR0aGlzLmZzRWRpdG9yLm1rZGlyX3JlY3Vyc2l2ZShhZGlyKTtcclxuXHRcdFx0Zm9yKGxldCBmIG9mIG9saW5rcyl7XHJcblx0XHRcdFx0aWYoIShmLmV4dGVuc2lvbj09PSdtZCcpKXtcclxuXHRcdFx0XHRcdHRoaXMuZnNFZGl0b3IuY29weV90ZmlsZShmLGFkaXIrJy8nK2YuYmFzZW5hbWUrJy4nK2YuZXh0ZW5zaW9uKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIlxyXG5pbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZzRWRpdG9ye1xyXG4gICAgZnM7XHJcbiAgICBwYXRoO1xyXG4gICAgcGx1Z2luIDpQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IocGx1Z2luOlBsdWdpbil7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5mcyA9IHJlcXVpcmUoJ2ZzJyk7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByb290KCl7XHJcbiAgICAgICAgbGV0IGEgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlciBhcyBhbnk7XHJcbiAgICAgICAgcmV0dXJuIGEuYmFzZVBhdGgucmVwbGFjZSgvXFxcXC9nLCcvJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5vdGVjaGFpbigpe1xyXG4gICAgICAgIGxldCBuYyA9ICh0aGlzLnBsdWdpbi5hcHAgYXMgYW55KS5wbHVnaW5zLmdldFBsdWdpbignbm90ZS1jaGFpbicpO1xyXG4gICAgICAgIHJldHVybiBuY1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhYnNwYXRoKHRmaWxlOlRGaWxlfFRGb2xkZXIpe1xyXG5cdFx0aWYodGZpbGUpe1xyXG5cdFx0XHRyZXR1cm4gKHRoaXMucm9vdCsnLycrdGZpbGUucGF0aCkucmVwbGFjZSgvXFxcXC9nLCcvJyk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuICAgIGlzZmlsZShwYXRoOnN0cmluZyl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZnMuZXhpc3RzU3luYyhwYXRoKSAmJiB0aGlzLmZzLnN0YXRTeW5jKHBhdGgpLmlzRmlsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzZGlyKHBhdGg6c3RyaW5nKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcy5leGlzdHNTeW5jKHBhdGgpICYmIHRoaXMuZnMuc3RhdFN5bmMocGF0aCkuaXNEaXJlY3RvcnkoKTtcclxuICAgIH1cclxuXHJcbiAgICBsaXN0X2RpcihwYXRoOnN0cmluZyxhc19mdWxscGF0aD10cnVlKXtcclxuICAgICAgICBpZighdGhpcy5pc2RpcihwYXRoKSl7cmV0dXJuIFtdfVxyXG4gICAgICAgIGxldCBpdGVtcyA9IHRoaXMuZnMucmVhZGRpclN5bmMocGF0aClcclxuICAgICAgICBpZihhc19mdWxscGF0aCl7XHJcbiAgICAgICAgICAgIGl0ZW1zID0gaXRlbXMubWFwKFxyXG4gICAgICAgICAgICAgICAgKHg6c3RyaW5nKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXRoKycvJyt4XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9ICAgXHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zXHJcbiAgICB9XHJcblxyXG4gICAgZmlyc3RfdmFsaWRfZGlyKHBhdGhzOkFycmF5PHN0cmluZz58c3RyaW5nKXtcclxuICAgICAgICBpZih0eXBlb2YocGF0aHMpPT0nc3RyaW5nJyl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuaXNkaXIocGF0aHMpKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoc1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBwYXRoIG9mIHBhdGhzKXtcclxuICAgICAgICAgICAgaWYodGhpcy5pc2RpcihwYXRoKSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZWxlY3RfdmFsaWRfZGlyKHBhdGhzOkFycmF5PHN0cmluZz4pe1xyXG4gICAgICAgIGxldCB4cGF0aHMgPSBwYXRocy5maWx0ZXIoKHA6c3RyaW5nKT0+dGhpcy5pc2RpcihwKSk7XHJcbiAgICAgICAgaWYoeHBhdGhzLmxlbmd0aD09PTApe1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9ZWxzZSBpZih4cGF0aHMubGVuZ3RoPT0xKXtcclxuICAgICAgICAgICAgcmV0dXJuIHhwYXRoc1swXTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgbGV0IG5jID0gKHRoaXMucGx1Z2luLmFwcCBhcyBhbnkpLnBsdWdpbnMuZ2V0UGx1Z2luKCdub3RlLWNoYWluJyk7XHJcbiAgICAgICAgICAgIGlmKG5jKXtcclxuICAgICAgICAgICAgICAgIGxldCBwYXRoID0gYXdhaXQgbmMuY2hhaW4udHBfc3VnZ2VzdGVyKHhwYXRocyx4cGF0aHMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBta2Rpcl9yZWN1cnNpdmUocGF0aDpzdHJpbmcpe1xyXG4gICAgICAgIGlmKHRoaXMuaXNkaXIocGF0aCkpe3JldHVybiB0cnVlO31cclxuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5wYXRoLmRpcm5hbWUocGF0aCk7XHJcbiAgICAgICAgaWYoIXRoaXMuaXNkaXIocGFyZW50KSl7XHJcbiAgICAgICAgICAgIHRoaXMubWtkaXJfcmVjdXJzaXZlKHBhcmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZnMubWtkaXJTeW5jKHBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG5cdCogXHU5NjQ0XHU0RUY2IHNyYyBcdTUyMzAgZHN0XHVGRjBDXHU0RTBEXHU1NzI4IHZhdWx0IFx1NEUyRFx1RkYwQ1x1OTcwMFx1ODk4MVx1N0VERFx1NUJGOVx1OERFRlx1NUY4NFxyXG5cdCogb3ZlcndyaXRlXHVGRjBDXHU1OTBEXHU3NkQ2XHVGRjFCbXRpbWVcdUZGMENcdTY1QjBcdTY1ODdcdTRFRjZcdUZGMUJcclxuXHQqL1xyXG4gICAgY29weV9maWxlKHNyYzpzdHJpbmcsZHN0OnN0cmluZyxtb2RlPSdwYXNzPm92ZXJ3cml0ZT5tdGltZScpIHtcclxuICAgICAgICBsZXQgZnMgPSB0aGlzLmZzO1xyXG5cclxuICAgICAgICBtb2RlID0gbW9kZS5zcGxpdCgnPicpWzBdXHJcbiAgICAgICAgaWYoIWZzLmV4aXN0c1N5bmMoc3JjKSl7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZnMuZXhpc3RzU3luYyhkc3QpKXtcclxuICAgICAgICAgICAgaWYobW9kZT09PSdvdmVyd3JpdGUnKXtcclxuICAgICAgICAgICAgICAgIGZzLnVubGlua1N5bmMoZHN0KTtcclxuICAgICAgICAgICAgICAgIGZzLmNvcHlGaWxlU3luYyhzcmMsZHN0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihtb2RlPT09J210aW1lJyl7XHJcbiAgICAgICAgICAgICAgICAvLyBkc3QgXHU2NkY0XHU2NUIwXHU2NUY2XHU5NUY0XHU1QzBGXHU0RThFIHNyY1xyXG4gICAgICAgICAgICAgICAgaWYoZnMuc3RhdFN5bmMoZHN0KS5tdGltZU1zPGZzLnN0YXRTeW5jKHNyYykubXRpbWVNcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZnMudW5saW5rU3luYyhkc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZzLmNvcHlGaWxlU3luYyhzcmMsZHN0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBmcy5jb3B5RmlsZVN5bmMoc3JjLGRzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29weV90ZmlsZSh0ZmlsZTpURmlsZSwgZHN0OnN0cmluZyxtb2RlPSdtdGltZScpIHtcclxuXHRcdGlmKHRmaWxlKXtcclxuXHRcdFx0bGV0IHNyYyA9IHRoaXMuYWJzcGF0aCh0ZmlsZSk7XHJcblx0XHRcdHJldHVybiBzcmMgJiYgdGhpcy5jb3B5X2ZpbGUoc3JjLGRzdCxtb2RlKTtcclxuXHRcdH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuICAgIG1pcnJvcl90ZmlsZSh0ZmlsZTpURmlsZSx2YXVsdF9yb290OnN0cmluZyxtb2RlPSdtdGltZScsYXR0YWNobWVudD10cnVlLG91dGxpbms9ZmFsc2Upe1xyXG4gICAgICAgIC8vIFx1NUMwNlx1N0IxNFx1OEJCMFx1OTU1Q1x1NTBDRlx1NzlGQlx1NTJBOFx1NTIzMFx1NTIyQlx1NzY4NFx1NUU5M1x1NEUyRFx1RkYwQ1x1NjU4N1x1NEVGNlx1N0VEM1x1Njc4NFx1NEUwRVx1NUY1M1x1NTI0RFx1NUU5M1x1NzZGOFx1NTQwQ1xyXG4gICAgICAgIGlmKHRmaWxlKXtcclxuICAgICAgICAgICAgdmF1bHRfcm9vdCA9IHZhdWx0X3Jvb3QucmVwbGFjZSgvXFxcXC9nLCcvJyk7XHJcblx0XHRcdGxldCBzcmMgPSB0aGlzLnJvb3QgKyAnLycgKyB0ZmlsZS5wYXRoO1xyXG4gICAgICAgICAgICBsZXQgZHN0ID0gdmF1bHRfcm9vdCsnLycrdGZpbGUucGF0aDtcclxuICAgICAgICAgICAgdGhpcy5ta2Rpcl9yZWN1cnNpdmUodGhpcy5wYXRoLmRpcm5hbWUoZHN0KSk7XHJcblx0XHRcdHRoaXMuY29weV9maWxlKHNyYyxkc3QsbW9kZSk7XHJcbiAgICAgICAgICAgIGlmKGF0dGFjaG1lbnQpe1xyXG4gICAgICAgICAgICAgICAgbGV0IG5jID0gdGhpcy5ub3RlY2hhaW47XHJcbiAgICAgICAgICAgICAgICBpZighbmMpe3JldHVybjt9XHJcbiAgICAgICAgICAgICAgICBsZXQgdGZpbGVzID0gbmMuY2hhaW4uZ2V0X291dGxpbmtzKHRmaWxlLGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgdCBvZiB0ZmlsZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCEodC5leHRlbnNpb249PT0nbWQnKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWlycm9yX3RmaWxlKHQsdmF1bHRfcm9vdCxtb2RlLGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihvdXRsaW5rKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5taXJyb3JfdGZpbGUodCx2YXVsdF9yb290LG1vZGUsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cdFx0fVxyXG4gICAgfVxyXG5cclxuICAgIG1pcnJvcl90Zm9sZGVyKHRmb2xkZXI6VEZvbGRlcix2YXVsdF9yb290OnN0cmluZyxtb2RlPSdtdGltZScsYXR0YWNobWVudD10cnVlLG91dGxpbms9ZmFsc2Usc3RyaWN0PWZhbHNlKXtcclxuICAgICAgICBpZih0Zm9sZGVyKXtcclxuICAgICAgICAgICAgZm9yKGxldCB0IG9mIHRmb2xkZXIuY2hpbGRyZW4pe1xyXG4gICAgICAgICAgICAgICAgaWYodCBpbnN0YW5jZW9mIFRGb2xkZXIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWlycm9yX3Rmb2xkZXIodCx2YXVsdF9yb290LG1vZGUsYXR0YWNobWVudCxvdXRsaW5rKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKHQgaW5zdGFuY2VvZiBURmlsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taXJyb3JfdGZpbGUodCx2YXVsdF9yb290LG1vZGUsYXR0YWNobWVudCxvdXRsaW5rKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihzdHJpY3Qpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGRzdCA9IHZhdWx0X3Jvb3QrJy8nK3Rmb2xkZXIucGF0aFxyXG4gICAgICAgICAgICAgICAgbGV0IHNyYyA9IHRoaXMuYWJzcGF0aCh0Zm9sZGVyKVxyXG4gICAgICAgICAgICAgICAgaWYoc3JjICYmIGRzdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVfZmlsZXNfbm90X2luX3NyYyhzcmMsZHN0KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblx0XHR9XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlX2ZpbGVfb3JfZGlyKHBhdGg6c3RyaW5nKXtcclxuICAgICAgICBpZih0aGlzLmlzZmlsZShwYXRoKSl7XHJcbiAgICAgICAgICAgIHRoaXMuZnMudW5saW5rU3luYyhwYXRoKVxyXG4gICAgICAgIH1lbHNlIGlmKHRoaXMuaXNkaXIocGF0aCkpe1xyXG4gICAgICAgICAgICBsZXQgaXRlbXMgPSB0aGlzLmxpc3RfZGlyKHBhdGgsdHJ1ZSlcclxuICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIGl0ZW1zKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlX2ZpbGVfb3JfZGlyKGl0ZW0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5mcy5ybWRpclN5bmMocGF0aClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlX2ZpbGVzX25vdF9pbl9zcmMoc3JjOnN0cmluZyxkc3Q6c3RyaW5nKXtcclxuICAgICAgICAvLyBcdTkwNERcdTUzODYgZHN0IFx1NEUyRFx1NjI0MFx1NjcwOVx1NjU4N1x1NEVGNlx1RkYwQ1x1NTk4Mlx1Njc5Q1x1NjdEMFx1NjU4N1x1NEVGNlx1NEUwRFx1NTcyOHNyY1x1NEUyRFx1RkYwQ1x1NTIyMFx1OTY2NFxyXG4gICAgICAgIGlmKCF0aGlzLmlzZGlyKHNyYykgfHwgIXRoaXMuaXNkaXIoZHN0KSl7cmV0dXJufVxyXG4gICAgICAgIGxldCBpdGVtcyA9IHRoaXMubGlzdF9kaXIoZHN0LGZhbHNlKVxyXG4gICAgICAgIGZvcihsZXQgaXRlbSBvZiBpdGVtcyl7XHJcbiAgICAgICAgICAgIGxldCBhZHN0ID0gZHN0KycvJytpdGVtXHJcbiAgICAgICAgICAgIGxldCBhc3JjID0gc3JjKycvJytpdGVtXHJcbiAgICAgICAgICAgIGlmKHRoaXMuaXNmaWxlKGFkc3QpKXtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLmlzZmlsZShhc3JjKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcy51bmxpbmtTeW5jKGFkc3QpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKHRoaXMuaXNkaXIoYWRzdCkpe1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuaXNkaXIoYXNyYykpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlX2ZpbGVfb3JfZGlyKGFkc3QpXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZV9maWxlc19ub3RfaW5fc3JjKGFzcmMsYWRzdClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtaXJyb3JfZm9sZGVyKHNyYzpzdHJpbmcsZHN0OnN0cmluZyxtb2RlPSdtdGltZScsc3RyaWN0PWZhbHNlKXtcclxuICAgICAgICBpZighdGhpcy5pc2RpcihzcmMpKXtyZXR1cm59XHJcbiAgICAgICAgdGhpcy5ta2Rpcl9yZWN1cnNpdmUoZHN0KVxyXG4gICAgICAgIGlmKCF0aGlzLmlzZGlyKGRzdCkpe3JldHVybn1cclxuXHJcbiAgICAgICAgbGV0IGl0ZW1zID0gdGhpcy5saXN0X2RpcihzcmMsZmFsc2UpXHJcbiAgICAgICAgZm9yKGxldCBpdGVtIG9mIGl0ZW1zKXtcclxuICAgICAgICAgICAgbGV0IGFzcmMgPSB0aGlzLnBhdGguam9pbihzcmMsaXRlbSlcclxuICAgICAgICAgICAgbGV0IGFkc3QgPSB0aGlzLnBhdGguam9pbihkc3QsaXRlbSlcclxuICAgICAgICAgICAgaWYodGhpcy5pc2ZpbGUoYXNyYykpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3B5X2ZpbGUoYXNyYyxhZHN0LG1vZGUpXHJcbiAgICAgICAgICAgIH1lbHNlIGlmKHRoaXMuaXNkaXIoYXNyYykpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5taXJyb3JfZm9sZGVyKGFzcmMsYWRzdCxtb2RlLHN0cmljdClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihzdHJpY3Qpe1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZV9maWxlc19ub3RfaW5fc3JjKHNyYyxkc3QpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vZGlmeShwYXRoOnN0cmluZyxjYWxsYmFjazpGdW5jdGlvbixlbmNvZGluZz0ndXRmOCcpe1xyXG4gICAgICAgIGxldCBmcyA9IHRoaXMuZnM7XHJcbiAgICAgICAgaWYoIWZzLmV4aXN0c1N5bmMocGF0aCkpe3JldHVybn07XHJcblxyXG4gICAgICAgIGZzLnJlYWRGaWxlKHBhdGgsIGVuY29kaW5nLCAoZXJyOkVycm9yLCBkYXRhOnN0cmluZykgPT4ge1xyXG5cdFx0XHRpZihlcnIpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBmaWxlOicsIGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHJzID0gY2FsbGJhY2socGF0aCxkYXRhKTtcclxuXHRcdFx0ZnMud3JpdGVGaWxlKHBhdGgsIHJzLCBlbmNvZGluZywgKGVycjpFcnJvcikgPT4ge1xyXG5cdFx0XHQgIGlmIChlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciB3cml0aW5nIGZpbGU6JywgZXJyKTtcclxuXHRcdFx0ICB9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdGaWxlIGNvbnRlbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHkuJyk7XHJcblx0XHRcdCAgfVxyXG5cdFx0XHR9KTtcclxuXHRcdCAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0iLCAiXHJcbmV4cG9ydCBjbGFzcyBTdHJpbmdze1xyXG4gICAgbGFuZ3VhZ2U6c3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBsZXQgbGFuZyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2UnKTtcclxuICAgICAgICBpZihsYW5nKXtcclxuICAgICAgICAgICAgdGhpcy5sYW5ndWFnZSA9IGxhbmc7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMubGFuZ3VhZ2UgPSAnZW4nO1xyXG4gICAgICAgIH1cclxuXHR9XHJcblxyXG4gICAgZ2V0IGNtZF9leHBvcnRfY3VycmVudF9ub3RlKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU1QkZDXHU1MUZBXHU1RjUzXHU1MjREXHU3QjE0XHU4QkIwJ1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ0V4cG9ydCBjdXJyZW50IG5vdGUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgY21kX3NldF92ZXhwb3J0ZXIoKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdThCQkVcdTdGNkVcdTVCRkNcdTUxRkFcdTdCMTRcdThCQjBcdTkwMDlcdTk4NzknXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnU2V0IGNvbmZpZyB0byBleHBvcnQgbm90ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBjbWRfZXhwb3J0X3BsdWdpbigpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1NUJGQ1x1NTFGQVx1NjNEMlx1NEVGNidcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdFeHBvcnQgcGx1Z2luJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHByb21wdF9wYXRoX29mX2ZvbGRlcigpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1OEY5M1x1NTE2NVx1NjU4N1x1NEVGNlx1NTkzOVx1OERFRlx1NUY4NCdcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdJbnB1dCBwYXRoIG9mIGZvbGRlcic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBub3RpY2Vfb3V0cHV0KCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU1QkZDXHU1MUZBXHVGRjFBJ1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ091dHB1dDonO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBub3RpY2Vfbm9zdWNoZGlyKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU2NUUwXHU2NTQ4XHU3NkVFXHU1RjU1J1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ0ludmFpZCBwYXRoLic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBzZXR0aW5nX3BsdWdpbl9kaXIoKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdTYzRDJcdTRFRjZcdTVCRkNcdTUxRkFcdTc2RUVcdTVGNTUnO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ1BsdWdpbiBkaXIgdG8gZXhwb3J0JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNldHRpbmdfdmF1bHRfZGlyKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU1RTkzXHU3NkVFXHU1RjU1JztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdSb290IGRpciBvZiB2YXVsdCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgbGV0IHN0cmluZ3MgPSBuZXcgU3RyaW5ncygpOyIsICJpbXBvcnQgeyBcclxuXHRBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsUGx1Z2luXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IFZhdWx0RXhwb3RlclBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVkV4cG9ydGVyU2V0dGluZ3Mge1xyXG5cdHBsdWdpbkRpckV4cG9ydGVyOnN0cmluZztcclxuXHR2YXVsdERpcjpzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBWRXhwb3J0ZXJTZXR0aW5ncyA9IHtcclxuXHRwbHVnaW5EaXJFeHBvcnRlcjonJyxcclxuXHR2YXVsdERpcjonJ1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVkV4cG9ydGVyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogVmF1bHRFeHBvdGVyUGx1Z2luO1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZhdWx0RXhwb3RlclBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRnZXRTZXR0aW5nVmFsdWUoZmllbGQ6IGtleW9mIFZFeHBvcnRlclNldHRpbmdzKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3NbZmllbGRdO1xyXG5cdH1cclxuXHJcblx0YWRkX3RvZ2dsZShuYW1lOnN0cmluZyxkZXNjOnN0cmluZyxmaWVsZDprZXlvZiBWRXhwb3J0ZXJTZXR0aW5ncyl7XHJcblx0XHRsZXQge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblx0XHRsZXQgdmFsdWUgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgYW55KVtmaWVsZF0gYXMgYm9vbGVhbjtcclxuXHRcdGxldCBpdGVtID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpICBcclxuXHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0LnNldERlc2MoZGVzYylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodmFsdWUpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTpuZXZlcikgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NbZmllbGRdID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0cmV0dXJuIGl0ZW07XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKHRoaXMucGx1Z2luLnN0cmluZ3Muc2V0dGluZ19wbHVnaW5fZGlyKVxyXG5cdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnBsdWdpbkRpckV4cG9ydGVyKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBsdWdpbkRpckV4cG9ydGVyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHRcdC5zZXROYW1lKHRoaXMucGx1Z2luLnN0cmluZ3Muc2V0dGluZ192YXVsdF9kaXIpXHJcblx0XHRcdFx0LmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnZhdWx0RGlyKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy52YXVsdERpciA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IFxyXG5cdE5vdGljZSwgVEZpbGVcclxufSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgVmF1bHRFeHBvdGVyUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5cclxuY29uc3QgY21kX2V4cG9ydF9jdXJyZW50X25vdGUgPSAocGx1Z2luOlZhdWx0RXhwb3RlclBsdWdpbikgPT4gKHtcclxuXHRpZDogJ2NtZF9leHBvcnRfY3VycmVudF9ub3RlJyxcclxuXHRuYW1lOiBwbHVnaW4uc3RyaW5ncy5jbWRfZXhwb3J0X2N1cnJlbnRfbm90ZSxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0Y29uc3QgbmMgPSBwbHVnaW4ubm90ZWNoYWluO1xyXG5cdFx0bGV0IHRmaWxlID0gbmMuY2hhaW4uY3VycmVudF9ub3RlO1xyXG5cdFx0YXdhaXQgcGx1Z2luLmV4cG9ydF9yZWFkbWUodGZpbGUsbnVsbCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGNtZF9zZXRfdmV4cG9ydGVyID0gKHBsdWdpbjpWYXVsdEV4cG90ZXJQbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdjbWRfc2V0X3ZleHBvcnRlcicsXHJcblx0bmFtZTogcGx1Z2luLnN0cmluZ3MuY21kX3NldF92ZXhwb3J0ZXIsXHJcblx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdGNvbnN0IG5jID0gcGx1Z2luLm5vdGVjaGFpbjtcclxuXHRcdGxldCBkaXIgPSBhd2FpdCBuYy5jaGFpbi50cF9wcm9tcHQocGx1Z2luLnN0cmluZ3MucHJvbXB0X3BhdGhfb2ZfZm9sZGVyKTtcclxuXHRcdGxldCBpdGVtOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge307XHJcblx0XHRpZihwbHVnaW4uZnNFZGl0b3IuZnMuZXhpc3RzU3luYyhkaXIpKXtcclxuXHRcdFx0aXRlbVsnRGlyJ10gPSBkaXI7XHJcblx0XHR9XHJcblx0XHRpdGVtWydOYW1lJ10gPSAncmVhZE1lJztcclxuXHRcdGl0ZW1bJ0Fzc2V0cyddID0gJy4vYXNzZXRzJztcclxuXHRcdGl0ZW1bJ1JlbW92ZU1ldGEnXSA9IHRydWU7XHJcblx0XHRpdGVtWydVc2VHaXRMaW5rJ10gPSB0cnVlO1xyXG5cclxuXHRcdGF3YWl0IG5jLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIoXHJcblx0XHRcdG5jLmNoYWluLmN1cnJlbnRfbm90ZSxcclxuXHRcdFx0J3ZleHBvcnRlcicsXHJcblx0XHRcdGl0ZW1cclxuXHRcdClcclxuXHR9XHJcbn0pO1xyXG5cclxuY29uc3QgY21kX2V4cG9ydF9wbHVnaW4gPSAocGx1Z2luOlZhdWx0RXhwb3RlclBsdWdpbikgPT4gKHtcclxuXHRpZDogJ2NtZF9leHBvcnRfcGx1Z2luJyxcclxuXHRuYW1lOiBwbHVnaW4uc3RyaW5ncy5jbWRfZXhwb3J0X3BsdWdpbixcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0Y29uc3QgbmMgPSBwbHVnaW4ubm90ZWNoYWluO1xyXG5cdFx0XHJcblx0XHRsZXQgcGx1Z2lucyA9IE9iamVjdC5rZXlzKChwbHVnaW4uYXBwIGFzIGFueSkucGx1Z2lucy5wbHVnaW5zKTtcclxuXHRcdGxldCBwID0gYXdhaXQgbmMuY2hhaW4udHBfc3VnZ2VzdGVyKHBsdWdpbnMscGx1Z2lucyk7XHJcblx0XHRsZXQgZXBsdWdpbiA9IChwbHVnaW4uYXBwIGFzIGFueSkucGx1Z2lucy5nZXRQbHVnaW4ocCk7XHJcblx0XHRpZihlcGx1Z2luKXtcclxuXHRcdFx0bGV0IHRhcmdldCA9IGF3YWl0IHBsdWdpbi5mc0VkaXRvci5zZWxlY3RfdmFsaWRfZGlyKFxyXG5cdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5wbHVnaW5EaXJFeHBvcnRlci5zcGxpdChcIlxcblwiKVxyXG5cdFx0XHQpXHJcblx0XHRcdGlmKCFwbHVnaW4uZnNFZGl0b3IuZnMuZXhpc3RzU3luYyh0YXJnZXQpKXtcclxuXHRcdFx0XHR0YXJnZXQgPSBhd2FpdCBuYy5jaGFpbi50cF9wcm9tcHQocGx1Z2luLnN0cmluZ3MucHJvbXB0X3BhdGhfb2ZfZm9sZGVyKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0YXJnZXQgPSB0YXJnZXQucmVwbGFjZSgvXFxcXC9nLCcvJyk7XHJcblx0XHRcdGlmKCF0YXJnZXQuZW5kc1dpdGgoJy8nICsgcCkpe1xyXG5cdFx0XHRcdHRhcmdldCA9IHRhcmdldCArICcvJyArIHA7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoIXBsdWdpbi5mc0VkaXRvci5mcy5leGlzdHNTeW5jKHRhcmdldCkpe1xyXG5cdFx0XHRcdHBsdWdpbi5mc0VkaXRvci5mcy5ta2RpclN5bmModGFyZ2V0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRsZXQgaXRlbXMgPSBbJ21haW4uanMnLCdtYW5pZmVzdC5qc29uJywnc3R5bGVzLmNzcyddO1xyXG5cdFx0XHRsZXQgZGogPSBhd2FpdCBwbHVnaW4uZnNFZGl0b3Iubm90ZWNoYWluLmNoYWluLnRwX3N1Z2dlc3RlcihcclxuXHRcdFx0XHRbJ3RydWUnLCdmYWxzZSddLFt0cnVlLGZhbHNlXSx0cnVlLCdFeHBvcnQgZGF0YS5qc29uPydcclxuXHRcdFx0KVxyXG5cdFx0XHRpZihkail7XHJcblx0XHRcdFx0aXRlbXMucHVzaCgnZGF0YS5qc29uJylcclxuXHRcdFx0fVxyXG5cdFx0XHRmb3IobGV0IGl0ZW0gb2YgaXRlbXMpe1xyXG5cdFx0XHRcdGxldCBzcmMgPSBgJHtwbHVnaW4uZnNFZGl0b3Iucm9vdH0vJHtlcGx1Z2luLm1hbmlmZXN0LmRpcn0vJHtpdGVtfWA7XHJcblx0XHRcdFx0bGV0IGRzdCA9IGAke3RhcmdldH0vJHtpdGVtfWA7XHJcblx0XHRcdFx0cGx1Z2luLmZzRWRpdG9yLmNvcHlfZmlsZShzcmMsZHN0LCdvdmVyd3JpdGUnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxuY29uc3QgY29tbWFuZEJ1aWxkZXJzOkFycmF5PEZ1bmN0aW9uPiA9IFtcclxuICAgIFxyXG5dO1xyXG5cclxuY29uc3QgY29tbWFuZEJ1aWxkZXJzRGVza3RvcDpBcnJheTxGdW5jdGlvbj4gPSBbXHJcblx0Y21kX2V4cG9ydF9jdXJyZW50X25vdGUsXHJcblx0Y21kX3NldF92ZXhwb3J0ZXIsXHJcblx0Y21kX2V4cG9ydF9wbHVnaW5cclxuXTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRDb21tYW5kcyhwbHVnaW46VmF1bHRFeHBvdGVyUGx1Z2luKSB7XHJcbiAgICBjb21tYW5kQnVpbGRlcnMuZm9yRWFjaCgoYykgPT4ge1xyXG4gICAgICAgIHBsdWdpbi5hZGRDb21tYW5kKGMocGx1Z2luKSk7XHJcbiAgICB9KTtcclxuXHRpZigocGx1Z2luLmFwcCBhcyBhbnkpLmlzTW9iaWxlPT1mYWxzZSl7XHJcblx0XHRjb21tYW5kQnVpbGRlcnNEZXNrdG9wLmZvckVhY2goKGMpID0+IHtcclxuXHRcdFx0cGx1Z2luLmFkZENvbW1hbmQoYyhwbHVnaW4pKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQSxJQUFBQSxtQkFBNEc7OztBQ0E1RyxzQkFBNEc7QUFFckcs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TyxRQUFHLE9BQU8sZ0JBQWdCLE9BQU0sV0FBVyxNQUEzQyxtQkFBOEM7QUFDekQsUUFBRyxRQUFRLEVBQUUsU0FBTyxLQUFJO0FBQ3ZCLFlBQU0sTUFBSSxNQUFJLE9BQUs7QUFBQSxJQUNwQixPQUFLO0FBQ0osWUFBTSxNQUFJLE1BQUksTUFBTSxXQUFTO0FBQUEsSUFDOUI7QUFFQSxRQUFHLEtBQUssU0FBUyxXQUFXLE9BQU0sR0FBRyxHQUFFO0FBQ3RDLFdBQUcsUUFBRyxPQUFPLGdCQUFnQixPQUFNLFdBQVcsTUFBM0MsbUJBQThDLFlBQVc7QUFDM0QsY0FBTSxRQUFRLENBQUMsTUFBWSxTQUFjO0FBbkg3QyxjQUFBQyxLQUFBQztBQW9ISyxjQUFJLE1BQU07QUFDVixlQUFHRCxNQUFBLEdBQUcsT0FBTyxnQkFBZ0IsT0FBTSxXQUFXLE1BQTNDLGdCQUFBQSxJQUE4QyxZQUFXO0FBQzNELGtCQUFNLElBQUk7QUFBQSxjQUNUO0FBQUEsY0FDQTtBQUFBLFlBQ0Q7QUFBQSxVQUNEO0FBQ0EsZ0JBQUdDLE1BQUEsR0FBRyxPQUFPLGdCQUFnQixPQUFNLFdBQVcsTUFBM0MsZ0JBQUFBLElBQThDLGVBQWMsUUFBTztBQUNyRSxrQkFBTSxJQUFJO0FBQUEsY0FDVDtBQUFBLGNBQ0EsQ0FBQyxPQUFXQyxVQUFnQjtBQUMzQix1QkFBTyxLQUFLQSxVQUFTLFVBQVVBLE1BQUssUUFBUSxNQUFLLEtBQUs7QUFBQSxjQUN2RDtBQUFBLFlBQ0Q7QUFBQSxVQUNEO0FBQ0EsaUJBQU87QUFBQSxRQUNSO0FBQ0EsY0FBTSxLQUFLLFNBQVMsT0FBTyxLQUFJLEtBQUs7QUFBQSxNQUNyQztBQUFBLElBQ0Q7QUFFQSxRQUFJLFVBQVMsUUFBRyxPQUFPLGdCQUFnQixPQUFNLFdBQVcsTUFBM0MsbUJBQThDO0FBQzNELFFBQUcsUUFBTztBQUNULFVBQUksU0FBUyxHQUFHLE1BQU0sYUFBYSxLQUFLO0FBQ3hDLFVBQUksT0FBTyxNQUFJLE1BQUk7QUFDbkIsV0FBSyxTQUFTLGdCQUFnQixJQUFJO0FBQ2xDLGVBQVEsS0FBSyxRQUFPO0FBQ25CLFlBQUcsRUFBRSxFQUFFLGNBQVksT0FBTTtBQUN4QixlQUFLLFNBQVMsV0FBVyxHQUFFLE9BQUssTUFBSSxFQUFFLFdBQVMsTUFBSSxFQUFFLFNBQVM7QUFBQSxRQUMvRDtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiZXJyIiwgImltcG9ydF9vYnNpZGlhbiIsICJ2YWx1ZSIsICJfYSIsICJfYiIsICJuYW1lIl0KfQo=
