/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => WebViewLLMPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// src/strings.ts
var Strings = class {
  constructor() {
    let lang = window.localStorage.getItem("language");
    if (lang) {
      this.language = lang;
    } else {
      this.language = "en";
    }
  }
  get cmd_refresh_llms() {
    if (this.language == "zh") {
      return "\u5237\u65B0AI\u6A21\u578B\u5217\u8868";
    } else {
      return "Refresh AI Models";
    }
  }
  get cmd_open_new_llm() {
    if (this.language == "zh") {
      return "\u65B0\u5EFAAI\u5BF9\u8BDD";
    } else {
      return "New AI Chat";
    }
  }
  get cmd_chat_sequence() {
    if (this.language == "zh") {
      return "\u5F00\u59CB\u8FDE\u7EED\u5BF9\u8BDD";
    } else {
      return "Start Continuous Chat";
    }
  }
  get cmd_chat_sequence_stop() {
    if (this.language == "zh") {
      return "\u505C\u6B62\u8FDE\u7EED\u5BF9\u8BDD";
    } else {
      return "Stop Continuous Chat";
    }
  }
  get setting_prompt_name() {
    if (this.language == "zh") {
      return "\u63D0\u793A\u8BCD\u540D\u79F0\uFF08\u7528\u4E8E\u6807\u9898\u6216\u4EE3\u7801\u5757\uFF09";
    } else {
      return "Prompt Name (for heading or code block)";
    }
  }
  get setting_auto_stop() {
    if (this.language == "zh") {
      return "\u5F53AI\u8FD4\u56DE\u4EE5\u4E0B\u6587\u672C\u65F6\u81EA\u52A8\u7ED3\u675F\u5BF9\u8BDD";
    } else {
      return "Auto-stop chat when AI responds with";
    }
  }
  get cmd_chat_every_llms() {
    if (this.language == "zh") {
      return "\u5411\u6240\u6709AI\u6A21\u578B\u53D1\u9001\u6D88\u606F";
    } else {
      return "Send Message to All AI Models";
    }
  }
  get cmd_chat_first_llms() {
    if (this.language == "zh") {
      return "\u5411\u9996\u4E2AAI\u6A21\u578B\u53D1\u9001\u6D88\u606F";
    } else {
      return "Send Message to First AI Model";
    }
  }
};
var strings = new Strings();

// src/setting.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  prompt_name: "prompt\n\u63D0\u793A\u8BCD",
  auto_stop: "\u4FEE\u6539\u5B8C\u6210\n\u4FEE\u6539\u5B8C\u6210\u3002"
};
var WebViewLLMSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  getSettingValue(field) {
    return this.plugin.settings[field];
  }
  add_toggle(name, desc, field) {
    let { containerEl } = this;
    let value = this.plugin.settings[field];
    let item = new import_obsidian.Setting(containerEl).setName(name).setDesc(desc).addToggle(
      (text) => text.setValue(value).onChange(async (value2) => {
        this.plugin.settings[field] = value2;
        await this.plugin.saveSettings();
      })
    );
    return item;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName(this.plugin.strings.setting_prompt_name).addTextArea(
      (text) => text.setValue(this.plugin.settings.prompt_name).onChange(async (value) => {
        this.plugin.settings.prompt_name = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName(this.plugin.strings.setting_auto_stop).addTextArea(
      (text) => text.setValue(this.plugin.settings.auto_stop).onChange(async (value) => {
        this.plugin.settings.auto_stop = value;
        await this.plugin.saveSettings();
      })
    );
  }
};

// ../easyapi/src/easyapi/gui/inputSuggester.ts
var import_obsidian2 = require("obsidian");
var InputSuggester = class extends import_obsidian2.FuzzySuggestModal {
  constructor(app, displayItems, items, options = {}) {
    super(app);
    this.displayItems = displayItems;
    this.items = items;
    this.promise = new Promise((resolve, reject) => {
      this.resolvePromise = resolve;
      this.rejectPromise = reject;
    });
    this.inputEl.addEventListener("keydown", (event) => {
      var _a;
      if (event.code !== "Tab") {
        return;
      }
      const self = this;
      const { values, selectedItem } = self.chooser;
      const { value } = this.inputEl;
      this.inputEl.value = (_a = values[selectedItem].item) != null ? _a : value;
    });
    if (options.placeholder)
      this.setPlaceholder(options.placeholder);
    if (options.limit)
      this.limit = options.limit;
    if (options.emptyStateText)
      this.emptyStateText = options.emptyStateText;
    this.open();
  }
  static Suggest(app, displayItems, items, options = {}) {
    const newSuggester = new InputSuggester(
      app,
      displayItems,
      items,
      options
    );
    return newSuggester.promise;
  }
  getItemText(item) {
    if (item === this.inputEl.value)
      return item;
    return this.displayItems[this.items.indexOf(item)];
  }
  getItems() {
    if (this.inputEl.value === "")
      return this.items;
    return [this.inputEl.value, ...this.items];
  }
  selectSuggestion(value, evt) {
    this.resolved = true;
    super.selectSuggestion(value, evt);
  }
  onChooseItem(item, evt) {
    this.resolved = true;
    this.resolvePromise(item);
  }
  onClose() {
    super.onClose();
    if (!this.resolved)
      this.rejectPromise("no input given.");
  }
};
async function dialog_suggest(displayItems, items, placeholder = "") {
  try {
    return await InputSuggester.Suggest(
      this.app,
      displayItems,
      items,
      {
        placeholder
      }
    );
  } catch (error) {
    return null;
  }
}

// ../easyapi/src/easyapi/gui/inputPrompt.ts
var import_obsidian3 = require("obsidian");
var InputPrompt = class extends import_obsidian3.Modal {
  constructor(app, header, placeholder, value) {
    super(app);
    this.header = header;
    this.didSubmit = false;
    this.submitClickCallback = (evt) => this.submit();
    this.cancelClickCallback = (evt) => this.cancel();
    this.submitEnterCallback = (evt) => {
      if (!evt.isComposing && evt.key === "Enter") {
        evt.preventDefault();
        this.submit();
      }
    };
    this.placeholder = placeholder != null ? placeholder : "";
    this.input = value != null ? value : "";
    this.waitForClose = new Promise((resolve, reject) => {
      this.resolvePromise = resolve;
      this.rejectPromise = reject;
    });
    this.display();
    this.open();
  }
  static Prompt(app, header, placeholder, value) {
    const newPromptModal = new InputPrompt(
      app,
      header,
      placeholder,
      value
    );
    return newPromptModal.waitForClose;
  }
  display() {
    this.containerEl.addClass("quickAddModal", "qaInputPrompt");
    this.contentEl.empty();
    this.titleEl.textContent = this.header;
    const mainContentContainer = this.contentEl.createDiv();
    this.inputComponent = this.createInputField(
      mainContentContainer,
      this.placeholder,
      this.input
    );
    this.createButtonBar(mainContentContainer);
  }
  createInputField(container, placeholder, value) {
    const textComponent = new import_obsidian3.TextComponent(container);
    textComponent.inputEl.classList.add("input-field");
    textComponent.setPlaceholder(placeholder != null ? placeholder : "").setValue(value != null ? value : "").onChange((value2) => this.input = value2).inputEl.addEventListener("keydown", this.submitEnterCallback);
    return textComponent;
  }
  createButton(container, text, callback) {
    const btn = new import_obsidian3.ButtonComponent(container);
    btn.setButtonText(text).onClick(callback);
    return btn;
  }
  createButtonBar(mainContentContainer) {
    const buttonBarContainer = mainContentContainer.createDiv();
    this.createButton(
      buttonBarContainer,
      "Ok",
      this.submitClickCallback
    ).setCta();
    this.createButton(
      buttonBarContainer,
      "Cancel",
      this.cancelClickCallback
    );
    buttonBarContainer.classList.add("button-bar");
  }
  submit() {
    this.didSubmit = true;
    this.close();
  }
  cancel() {
    this.close();
  }
  resolveInput() {
    if (!this.didSubmit)
      this.rejectPromise("No input given.");
    else
      this.resolvePromise(this.input);
  }
  removeInputListener() {
    this.inputComponent.inputEl.removeEventListener(
      "keydown",
      this.submitEnterCallback
    );
  }
  onOpen() {
    super.onOpen();
    this.inputComponent.inputEl.focus();
    this.inputComponent.inputEl.select();
  }
  onClose() {
    super.onClose();
    this.resolveInput();
    this.removeInputListener();
  }
};
async function dialog_prompt(header = "Input", placeholder = "", value = "") {
  try {
    return await InputPrompt.Prompt(
      this.app,
      header,
      placeholder,
      value
    );
  } catch (e) {
    return null;
  }
}

// ../easyapi/src/easyapi/editor.ts
var EasyEditor = class {
  constructor(app, api) {
    this.app = app;
    this.api = api;
  }
  async get_selection(cancel_selection = false) {
    var _a;
    let editor = (_a = this.app.workspace.getActiveFileView()) == null ? void 0 : _a.editor;
    if (editor) {
      let sel = editor.getSelection();
      if (cancel_selection) {
        let cursor = editor.getCursor();
        await editor.setSelection(cursor, cursor);
      }
      return sel;
    } else {
      return "";
    }
  }
  async get_code_section(tfile, ctype = "", idx = 0, as_simple = true) {
    var _a;
    let dvmeta = this.app.metadataCache.getFileCache(tfile);
    let ctx = await this.app.vault.cachedRead(tfile);
    let section = (_a = dvmeta == null ? void 0 : dvmeta.sections) == null ? void 0 : _a.filter((x) => x.type == "code").filter((x) => {
      let c = ctx.slice(x.position.start.offset, x.position.end.offset).trim();
      return c.startsWith("```" + ctype) || c.startsWith("~~~" + ctype);
    })[idx];
    if (section) {
      let c = ctx.slice(
        section.position.start.offset,
        section.position.end.offset
      );
      if (as_simple) {
        return c.slice(4 + ctype.length, c.length - 4);
      } else {
        let res = {
          code: c,
          section,
          ctx
        };
        return res;
      }
    }
  }
  async get_heading_section(tfile, heading, idx = 0) {
    var _a;
    let dvmeta = this.app.metadataCache.getFileCache(tfile);
    let ctx = await this.app.vault.cachedRead(tfile);
    let section = (_a = dvmeta == null ? void 0 : dvmeta.headings) == null ? void 0 : _a.filter((x) => x.heading == heading)[idx];
    if (section) {
      let c = ctx.slice(
        section.position.start.offset,
        section.position.end.offset
      );
      return c;
    }
  }
};

// ../easyapi/src/easyapi/file.ts
var import_obsidian4 = require("obsidian");
var File = class {
  constructor(app, api) {
    this.app = app;
    this.api = api;
  }
  generate_structure(tfolder, depth = 0, isRoot = true, only_folder = false, only_md = true) {
    let structure = "";
    const indentUnit = "    ";
    const verticalLine = "\u2502   ";
    const indent = verticalLine.repeat(Math.max(depth - 1, 0)) + indentUnit.repeat(depth > 0 ? 1 : 0);
    const children = tfolder.children || [];
    if (isRoot) {
      structure += `${tfolder.name}/
`;
      isRoot = false;
    }
    children.forEach((child, index) => {
      const isLast = index === children.length - 1;
      const prefix = isLast ? "\u2514\u2500\u2500 " : "\u251C\u2500\u2500 ";
      if (child instanceof import_obsidian4.TFolder) {
        structure += `${indent}${prefix}${child.name}/
`;
        structure += this.generate_structure(child, depth + 1, isRoot, only_folder, only_md);
      } else if (!only_folder) {
        if (only_md && child.extension != "md") {
          return;
        }
        structure += `${indent}${prefix}${child.name}
`;
      }
    });
    return structure;
  }
};

// ../easyapi/src/easyapi/easyapi.ts
var EasyAPI = class {
  constructor(app) {
    this.app = app;
    this.dialog_suggest = dialog_suggest;
    this.dialog_prompt = dialog_prompt;
    this.editor = new EasyEditor(app, this);
    this.file = new File(app, this);
  }
  get_plugin(name) {
    var _a;
    return (_a = this.app.plugins) == null ? void 0 : _a.plugins[name];
  }
  get nc() {
    return this.get_plugin("note-chain");
  }
  get cfile() {
    return this.app.workspace.getActiveFile();
  }
};

// src/LLM/BaseWebViewer.ts
var import_obsidian5 = require("obsidian");
var BaseWebViewer = class {
  constructor(app, homepage = "", name = "") {
    this.app = app;
    this.homepage = homepage;
    this.view = this.get_webviews(this.homepage)[0];
    this.name = name;
  }
  get allLeaves() {
    let leaves = [];
    this.app.workspace.iterateAllLeaves((x) => {
      leaves.push(x);
    });
    return leaves;
  }
  get allViews() {
    return this.allLeaves.map(
      (x) => x.view
    );
  }
  // 所有 webview 标签
  get leaves() {
    let leaves = this.allLeaves.filter(
      (x) => x.view.webview
    );
    return leaves;
  }
  // 所有 webview 视图
  get views() {
    return this.leaves.map(
      (x) => x.view
    );
  }
  get activeLeaf() {
    let leaves = this.leaves.filter(
      (x) => x.containerEl.className.contains("mod-active")
    );
    if (leaves.length != 1) {
      return null;
    } else {
      return leaves[0];
    }
  }
  get activeView() {
    let leaf = this.activeLeaf;
    if (leaf) {
      return leaf.view;
    } else {
      return null;
    }
  }
  get webviews_blank() {
    return this.get_webviews("about:blank");
  }
  get webview() {
    if (this.view) {
      return this.view.webview;
    } else {
      return null;
    }
  }
  // 获取指定标签
  get_webviews(prefix) {
    return this.views.filter(
      (x) => x.url.startsWith(prefix)
    );
  }
  async open_homepage(url = this.homepage, idx = 0) {
    let views = this.get_webviews(url);
    if (idx == -1) {
      idx = views.length;
    }
    while (views.length < idx + 1) {
      let blank = this.webviews_blank;
      if (blank.length == 0) {
        await this.app.commands.executeCommandById("webviewer:open");
        await this.delay(3e3);
        blank = this.webviews_blank;
      }
      if (blank.length == 0) {
        return null;
      }
      await blank[0].webview.executeJavaScript(`
                window.location.href = '${url}';
            `);
      await blank[0].webview.setAttr("src", url);
      await this.delay(3e3);
      views = this.get_webviews(url);
      break;
    }
    if (views.length >= idx + 1) {
      return views[idx];
    } else {
      return null;
    }
  }
  async set_homepage(url = this.homepage, idx = 0) {
    this.view = await this.open_homepage(url, idx);
  }
  async source(view = this.view) {
    if (!view || !view.webview) {
      return "";
    }
    let html = await view.webview.executeJavaScript(`document.documentElement.outerHTML`);
    return html;
  }
  async document(view = this.view) {
    let html = await this.source(this.view);
    let doc = this.html_to_dom(html);
    return doc;
  }
  html_to_dom(html) {
    let parser = new DOMParser();
    let dom = parser.parseFromString(html, "text/html");
    return dom;
  }
  html_to_markdown(html) {
    let doc = this.html_to_dom(html);
    function tree(node, level = 1) {
      node.childNodes.forEach((child) => {
        tree(child, level + 1);
      });
    }
    tree(doc);
    function convertNode(node) {
      let markdown = "";
      if (node.nodeType === 1) {
        switch (node.nodeName.toLowerCase()) {
          case "h1":
          case "h2":
          case "h3":
          case "h4":
          case "h5":
          case "h6":
            let level = parseInt(node.nodeName.charAt(1), 10);
            markdown += "#".repeat(level) + " " + node.textContent.trim() + "\n\n";
            break;
          case "p":
            markdown += node.textContent.trim() + "\n\n";
            break;
          case "ul":
          case "ol":
            node.childNodes.forEach((child) => {
              if (child.nodeName.toLowerCase() === "li") {
                markdown += "- " + child.textContent.trim() + "\n";
              }
            });
            markdown += "\n";
            break;
          case "a":
            markdown += `[${node.textContent.trim()}](${node.getAttribute("href")})`;
            break;
          case "img":
            markdown += `![${node.getAttribute("alt") || "Image"}](${node.getAttribute("src")})`;
            break;
          case "strong":
          case "b":
            markdown += `**${node.textContent.trim()}**`;
            break;
          case "em":
          case "i":
            markdown += `*${node.textContent.trim()}*`;
            break;
          case "blockquote":
            markdown += "> " + node.textContent.trim() + "\n\n";
            break;
          case "pre":
            if (node.firstChild && node.firstChild.nodeName.toLowerCase() === "code") {
              let code = node.firstChild.textContent.trim();
              markdown += "```\n" + code + "\n```\n\n";
            }
            break;
          case "code":
            markdown += "`" + node.textContent + "`";
            break;
          case "#text":
            markdown += node.textContent.trim();
            break;
          default:
            node.childNodes.forEach((child) => {
              markdown += convertNode(child);
            });
        }
      } else if (node.nodeType === 3) {
        markdown += node.textContent.trim();
      }
      return markdown;
    }
    let md = convertNode(doc.body);
    return md;
  }
  async delay(ms) {
    return new Promise((resolve) => {
      setTimeout(resolve, ms);
    });
  }
  setActiveLeaf(view = this.view) {
    if (!view) {
      return;
    }
    ;
    let leaf = this.allLeaves.filter((x) => x.view == view)[0];
    if (!leaf) {
      return;
    }
    ;
    this.app.workspace.setActiveLeaf(leaf);
  }
  get_safe_ctx(ctx) {
    let safeCtx = JSON.stringify(ctx.replace(/`/g, "~").replace(/\$/g, "\uFFE5"));
    return safeCtx.slice(1, safeCtx.length - 1);
  }
  async paste_msg(ctx) {
  }
  async click_btn_of_send() {
  }
  async number_of_receive_msg() {
    return 0;
  }
  async get_last_content() {
    return "";
  }
  async request(ctx, timeout = 60) {
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let ctx2 = await this.get_last_content();
      new import_obsidian5.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return ctx2;
    } else {
      new import_obsidian5.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      console.log("Doubao N:", N1, N2);
      return null;
    }
  }
};

// src/LLM/DeepSeek.ts
var import_obsidian6 = require("obsidian");
var DeepSeek = class extends BaseWebViewer {
  constructor(app, homepage = "https://chat.deepseek.com") {
    super(app, homepage, "DeepSeek");
  }
  async click_btn_of_send() {
    let view = this.view;
    let msg = await this.view.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('div[role="button"]:not(.ds-button)');
				let ariaDisabled = button.getAttribute('aria-disabled');
				while(!ariaDisabled || ariaDisabled == 'false'){
					button.click();
					await delay(100);
					button = document.querySelector('div[role="button"]:not(.ds-button)');
					ariaDisabled =  button.getAttribute('aria-disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					let item = document.querySelector('textarea[id="chat-input"]');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.querySelector('div[role="button"]:not(.ds-button)');
						let ariaDisabled = button.getAttribute('aria-disabled');
						if (!ariaDisabled || ariaDisabled == 'false') {
							console.log('\u590D\u5236\u6210\u529F');
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".ds-markdown");
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let btns = document.querySelectorAll('.ds-flex>.ds-flex >.ds-icon-button:nth-child(4)');
				let N = parseInt(btns.length);
				return N;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async number_of_contents() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items.length;
  }
  async request(ctx, timeout = 60) {
    this.setActiveLeaf();
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    let N2 = await this.number_of_receive_msg();
    await this.click_btn_of_send();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let ctx2 = await this.get_last_response();
      new import_obsidian6.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return ctx2;
    } else {
      new import_obsidian6.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      return null;
    }
  }
};

// src/LLM/Doubao.ts
var import_obsidian7 = require("obsidian");
var Doubao = class extends BaseWebViewer {
  constructor(app, homepage = "https://www.doubao.com") {
    super(app, homepage, "\u8C46\u5305");
  }
  async click_btn_of_send() {
    let msg = await this.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.getElementById('flow-end-msg-send');
				let ariaDisabled = button.getAttribute('aria-disabled');
				while(ariaDisabled=='false'){
					button.click();
					await delay(100);
					button = document.getElementById('flow-end-msg-send');
					ariaDisabled = button.getAttribute('aria-disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					console.log('hrer',document)
					let item = document.querySelector('textarea[data-testid="chat_input_input"]');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.getElementById('flow-end-msg-send');
						let ariaDisabled = button.getAttribute('aria-disabled');
						if (ariaDisabled == 'false') {
							console.log('\u590D\u5236\u6210\u529F');
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll('div[data-testid="receive_message"]');
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let items = document.querySelectorAll('div[data-testid="receive_message"]');
				if(items.length==0){
					return 0;
				}
				item = items[items.length-1]
				if(item.querySelectorAll('button[data-testid="message_action_like"]').length==0){
					msg = items.length-1;
				}else{
					msg = items.length;
				}
				return msg;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async copy_last_content() {
    let msg = await this.webview.executeJavaScript(
      `
			btns = document.querySelectorAll('.segment-actions-content-btn');
			btns = Array.from(btns).filter(x=>x.textContent=='\u590D\u5236');
			if(btns.length>0){
				btns[btns.length-1].click();
				msg = true;
			}else{
				msg = false;
			}
			`
    );
    return msg;
  }
  async number_of_contents() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items.length;
  }
  async get_last_content() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items[items.length - 1].textContent || "";
  }
  async request(ctx, timeout = 60) {
    let view = this.view;
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let doc = await this.document();
      let items = doc.querySelectorAll(".message-content");
      N2 = await this.number_of_contents();
      new import_obsidian7.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return items[N2 - 1].textContent;
    } else {
      new import_obsidian7.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      console.log("Doubao N:", N1, N2);
      return null;
    }
  }
};

// src/LLM/Kimi.ts
var import_obsidian8 = require("obsidian");
var Kimi = class extends BaseWebViewer {
  constructor(app, homepage = "https://kimi.moonshot.cn/") {
    super(app, homepage, "Kimi");
  }
  async new_chat() {
    let msg = await this.view.webview.executeJavaScript(
      `
			document.querySelector('.new-chat-btn').click()
			`
    );
    return msg;
  }
  async click_btn_of_send() {
    let msg = await this.view.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('.send-button');
				let ariaDisabled = button.parentElement.classList.contains('disabled');
				while(!ariaDisabled){
					button.click();
					await delay(100);
					button = document.querySelector('.send-button');
					ariaDisabled = button.parentElement.classList.contains('disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					let item = document.querySelector('.chat-input-editor-container').querySelector('.chat-input-editor');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.querySelector('.send-button');;
						let ariaDisabled = button.parentElement.classList.contains('disabled');
						if (ariaDisabled == false) {
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".markdown-container");
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_copy_btns() {
    let doc = await this.document();
    let btns = doc.querySelectorAll('svg[name="Like"]');
    return btns.length;
  }
  async copy_last_content() {
    let msg = await this.webview.executeJavaScript(
      `
			btns = document.querySelectorAll('.segment-actions-content-btn');
			btns = Array.from(btns).filter(x=>x.textContent=='\u590D\u5236');
			if(btns.length>0){
				btns[btns.length-1].click();
				msg = true;
			}else{
				msg = false;
			}
			`
    );
    return msg;
  }
  async get_last_content() {
    var _a, _b, _c;
    let doc = await this.document();
    let chats = doc.getElementsByClassName("chat-content-item");
    return (_c = (_b = (_a = chats[chats.length - 1].querySelector(".segment-content-box")) == null ? void 0 : _a.textContent) == null ? void 0 : _b.trim()) != null ? _c : "";
  }
  async number_of_receive_msg() {
    let doc = await this.document();
    let btns = doc.querySelectorAll('svg[name="Like"]');
    return btns.length;
  }
  async request(ctx, timeout = 60) {
    var _a, _b;
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let doc = await this.document();
      let chats = doc.getElementsByClassName("chat-content-item");
      new import_obsidian8.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      let res = (_b = (_a = chats[chats.length - 1].querySelector(".segment-content-box")) == null ? void 0 : _a.textContent) != null ? _b : "";
      if (res == null ? void 0 : res.contains("\u5F53\u524D\u957F\u6587\u672C\u5BF9\u8BDD\u5DF2\u8FBE20\u8F6E")) {
        await this.new_chat();
        return this.request(ctx);
      } else {
        return res;
      }
    } else {
      let res = await this.get_last_content();
      if (res == null ? void 0 : res.contains("\u5F53\u524D\u957F\u6587\u672C\u5BF9\u8BDD\u5DF2\u8FBE20\u8F6E")) {
        await this.new_chat();
        return this.request(ctx);
      }
      new import_obsidian8.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      return "";
    }
  }
};

// src/LLM/Yuanbao.ts
var Yuanbao = class extends BaseWebViewer {
  constructor(app, homepage = "https://yuanbao.tencent.com/chat") {
    super(app, homepage, "\u5143\u5B9D");
  }
  async new_chat() {
    let msg = await this.view.webview.executeJavaScript(
      `
			document.querySelector('.yb-common-nav__new-chat').click()
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					
					let item = document.querySelector('.chat-input-editor  .ql-editor.ql-blank');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let item = document.querySelector('.chat-input-editor').querySelector('.ql-editor.ql-blank')
						if(item){
							await delay(100);
						}else{
							break;
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async click_btn_of_send() {
    let msg = await this.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('a[class^="style__send-btn"]');
				while(!button){
					await delay(100);
					button = document.querySelector('a[class^="style__send-btn"]');
				}
				button.click();
			}
			click();
			`
    );
    return msg;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let btns = document.querySelectorAll('.agent-chat__toolbar > .agent-chat__toolbar__right > .agent-chat__toolbar__item:nth-child(5)');
				let N = parseInt(btns.length);
				return N;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async get_last_content() {
    let doc = await this.document();
    let items = Array.from(doc.querySelectorAll(".hyc-content-md .hyc-common-markdown")).filter(
      (el) => {
        var _a, _b;
        return !((_b = (_a = el.parentElement) == null ? void 0 : _a.parentElement) == null ? void 0 : _b.classList.contains("hyc-component-reasoner__think-content"));
      }
    );
    let ctx = this.html_to_markdown(items[items.length - 1].outerHTML);
    return ctx;
  }
};

// src/LLM/ChatGPT.ts
var ChatGPT = class extends BaseWebViewer {
  constructor(app, homepage = "https://chatgpt.com") {
    super(app, homepage, "ChatGPT");
  }
  async new_chat() {
    let msg = await this.view.webview.executeJavaScript(
      `
			document.querySelector('a[data-testid="create-new-chat-button"]').click()
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					
					ctx = '\u4F60\u662F\u8C01'
					let item = document.querySelector('div#prompt-textarea.ProseMirror');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let item = document.querySelector('button#composer-submit-button')
						if(!item){
							await delay(100);
						}else{
							break;
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async click_btn_of_send() {
    let msg = await this.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('button#composer-submit-button');
				while(!button){
					await delay(100);
					button = document.querySelector('button#composer-submit-button');
				}
				button.click();
			}
			click();
			`
    );
    return msg;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let btns = document.querySelectorAll('div.flex.justify-start span[data-state="closed"]:nth-child(5)');
				let N = parseInt(btns.length);
				return N;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async get_last_content() {
    let doc = await this.document();
    let items = Array.from(doc.querySelectorAll('div[data-message-author-role="assistant"] div.markdown'));
    let ctx = this.html_to_markdown(items[items.length - 1].outerHTML);
    return ctx;
  }
};

// src/commands.ts
var cmd_chat_sequence = (plugin) => ({
  id: "cmd_chat_sequence",
  name: plugin.strings.cmd_chat_sequence,
  callback: async () => {
    await plugin.cmd_chat_sequence();
  }
});
var cmd_chat_sequence_stop = (plugin) => ({
  id: "cmd_chat_sequence_stop",
  name: plugin.strings.cmd_chat_sequence_stop,
  callback: async () => {
    plugin.auto_chat = false;
  }
});
var cmd_open_new_llm = (plugin) => ({
  id: "cmd_open_new_llm",
  name: plugin.strings.cmd_open_new_llm,
  callback: async () => {
    let hpage = await plugin.easyapi.dialog_suggest(
      plugin.basellms.map((x) => x.name),
      plugin.basellms.map((x) => x.homepage)
    );
    if (hpage) {
      await plugin.basewv.open_homepage(hpage, -1);
    }
  }
});
var cmd_chat_every_llms = (plugin) => ({
  id: "cmd_chat_every_llms",
  name: plugin.strings.cmd_chat_every_llms,
  callback: async () => {
    await plugin.cmd_chat_every_llms();
  }
});
var cmd_chat_first_llms = (plugin) => ({
  id: "cmd_chat_first_llms",
  name: plugin.strings.cmd_chat_first_llms,
  callback: async () => {
    await plugin.cmd_chat_first_llms();
  }
});
var commandBuilders = [];
var commandBuildersDesktop = [
  // cmd_refresh_llms,
  cmd_open_new_llm,
  cmd_chat_first_llms,
  cmd_chat_every_llms,
  cmd_chat_sequence,
  cmd_chat_sequence_stop
];
function addCommands(plugin) {
  commandBuilders.forEach((c) => {
    plugin.addCommand(c(plugin));
  });
  if (plugin.app.isMobile == false) {
    commandBuildersDesktop.forEach((c) => {
      plugin.addCommand(c(plugin));
    });
  }
}

// main.ts
var WebViewLLMPlugin = class extends import_obsidian9.Plugin {
  async onload() {
    this.app.workspace.onLayoutReady(
      async () => {
        await this._onload_();
      }
    );
  }
  async _onload_() {
    this.auto_chat = true;
    this.easyapi = new EasyAPI(this.app);
    this.strings = new Strings();
    await this.loadSettings();
    this.addSettingTab(new WebViewLLMSettingTab(this.app, this));
    this.llms = [];
    this.deepseek = new DeepSeek(this.app);
    this.doubao = new Doubao(this.app);
    this.kimi = new Kimi(this.app);
    this.yuanbao = new Yuanbao(this.app);
    this.chatgpt = new ChatGPT(this.app);
    this.basellms = [
      this.yuanbao,
      this.chatgpt,
      this.kimi,
      this.doubao,
      this.deepseek
    ];
    this.basewv = new BaseWebViewer(this.app, "");
    addCommands(this);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async cmd_refresh_llms() {
    let views = this.basewv.views;
    this.llms = this.llms.slice(0, 0);
    for (let view of views) {
      if (view.url.startsWith(this.deepseek.homepage)) {
        let llm = new DeepSeek(this.app);
        llm.view = view;
        this.llms.push(llm);
      } else if (view.url.startsWith(this.doubao.homepage)) {
        let llm = new Doubao(this.app);
        llm.view = view;
        this.llms.push(llm);
      } else if (view.url.startsWith(this.kimi.homepage)) {
        let llm = new Kimi(this.app);
        llm.view = view;
        this.llms.push(llm);
      } else if (view.url.startsWith(this.chatgpt.homepage)) {
        let llm = new ChatGPT(this.app);
        llm.view = view;
        this.llms.push(llm);
      } else if (view.url.startsWith(this.yuanbao.homepage)) {
        let llm = new Yuanbao(this.app);
        llm.view = view;
        this.llms.push(llm);
      }
    }
  }
  async cmd_chat_sequence() {
    var _a, _b;
    await this.cmd_refresh_llms();
    if (this.llms.length == 0) {
      return;
    }
    this.auto_chat = true;
    let idx = 0;
    let llm = this.llms[idx];
    let rsp = (_a = await llm.get_last_content()) != null ? _a : "";
    while (this.auto_chat && rsp && rsp != "") {
      if (this.settings.auto_stop.split("\n").contains(rsp.trim())) {
        this.auto_chat = false;
        break;
      }
      idx = idx + 1;
      if (idx == this.llms.length) {
        idx = 0;
      }
      llm = this.llms[idx];
      rsp = (_b = await llm.request(rsp)) != null ? _b : "";
    }
    this.auto_chat = false;
  }
  async get_prompt(tfile, idx = 0) {
    let prompt = await this.easyapi.editor.get_selection();
    if (prompt != "") {
      return prompt;
    }
    if (!tfile) {
      return "";
    }
    let items = this.settings.prompt_name.trim().split("\n");
    if (items.length == 0) {
      return "";
    }
    for (let item of items) {
      prompt = await this.easyapi.editor.get_code_section(tfile, item, idx);
      if (prompt) {
        return prompt;
      }
      prompt = await this.easyapi.editor.get_heading_section(tfile, item, idx);
      if (prompt) {
        return prompt;
      }
    }
    return "";
  }
  async cmd_chat_every_llms() {
    await this.cmd_refresh_llms();
    let prompt = await this.get_prompt(this.easyapi.cfile);
    if (prompt == "") {
      return;
    }
    for (let llm of this.llms) {
      let rsp = await llm.request(prompt);
    }
  }
  async cmd_chat_first_llms() {
    await this.cmd_refresh_llms();
    let prompt = await this.get_prompt(this.easyapi.cfile);
    if (prompt == "") {
      return;
    }
    for (let llm of this.llms) {
      await llm.request(prompt);
      break;
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvc3RyaW5ncy50cyIsICJzcmMvc2V0dGluZy50cyIsICIuLi9lYXN5YXBpL3NyYy9lYXN5YXBpL2d1aS9pbnB1dFN1Z2dlc3Rlci50cyIsICIuLi9lYXN5YXBpL3NyYy9lYXN5YXBpL2d1aS9pbnB1dFByb21wdC50cyIsICIuLi9lYXN5YXBpL3NyYy9lYXN5YXBpL2VkaXRvci50cyIsICIuLi9lYXN5YXBpL3NyYy9lYXN5YXBpL2ZpbGUudHMiLCAiLi4vZWFzeWFwaS9zcmMvZWFzeWFwaS9lYXN5YXBpLnRzIiwgInNyYy9MTE0vQmFzZVdlYlZpZXdlci50cyIsICJzcmMvTExNL0RlZXBTZWVrLnRzIiwgInNyYy9MTE0vRG91YmFvLnRzIiwgInNyYy9MTE0vS2ltaS50cyIsICJzcmMvTExNL1l1YW5iYW8udHMiLCAic3JjL0xMTS9DaGF0R1BULnRzIiwgInNyYy9jb21tYW5kcy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBTdHJpbmdzIH0gZnJvbSAnc3JjL3N0cmluZ3MnO1xyXG5pbXBvcnQge1dlYnZpZXdMTE1TZXR0aW5ncyxXZWJWaWV3TExNU2V0dGluZ1RhYixERUZBVUxUX1NFVFRJTkdTfSBmcm9tICdzcmMvc2V0dGluZydcclxuXHJcbmltcG9ydCB7RWFzeUFQSX0gZnJvbSAnc3JjL2Vhc3lhcGkvZWFzeWFwaSdcclxuXHJcbmltcG9ydCB7QmFzZVdlYlZpZXdlcn0gZnJvbSAnc3JjL0xMTS9CYXNlV2ViVmlld2VyJ1xyXG5pbXBvcnQge0RlZXBTZWVrfSBmcm9tICdzcmMvTExNL0RlZXBTZWVrJ1xyXG5pbXBvcnQge0RvdWJhb30gZnJvbSAnc3JjL0xMTS9Eb3ViYW8nXHJcbmltcG9ydCB7S2ltaX0gZnJvbSAnc3JjL0xMTS9LaW1pJ1xyXG5pbXBvcnQgeyBZdWFuYmFvIH0gZnJvbSAnc3JjL0xMTS9ZdWFuYmFvJztcclxuaW1wb3J0IHsgQ2hhdEdQVCB9IGZyb20gJ3NyYy9MTE0vQ2hhdEdQVCc7XHJcbmltcG9ydCB7IGFkZENvbW1hbmRzIH0gZnJvbSAnc3JjL2NvbW1hbmRzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYlZpZXdMTE1QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHN0cmluZ3MgOiBTdHJpbmdzO1xyXG5cdHNldHRpbmdzOiBXZWJ2aWV3TExNU2V0dGluZ3M7XHJcblx0eWFtbDogc3RyaW5nO1xyXG5cclxuXHRlYXN5YXBpOiBFYXN5QVBJXHJcblxyXG5cdGRpYWxvZ19zdWdnZXN0OiBGdW5jdGlvblxyXG5cdGRpYWxvZ19wcm9tcHQ6IEZ1bmN0aW9uXHJcblxyXG5cdGxsbXM6IEFycmF5PEJhc2VXZWJWaWV3ZXI+O1xyXG5cdGJhc2VsbG1zOiBBcnJheTxCYXNlV2ViVmlld2VyPjtcclxuXHJcblx0YmFzZXd2OiBCYXNlV2ViVmlld2VyO1xyXG5cdGRlZXBzZWVrOiBEZWVwU2VlaztcclxuXHRkb3ViYW86IERvdWJhbztcclxuXHRraW1pOiBLaW1pO1xyXG5cdHl1YW5iYW86IFl1YW5iYW87XHJcblx0Y2hhdGdwdDogQ2hhdEdQVDtcclxuXHJcblx0YXV0b19jaGF0OiBib29sZWFuO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KFxyXG5cdFx0XHRhc3luYygpPT57XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5fb25sb2FkXygpXHJcblx0XHRcdH1cclxuXHRcdClcclxuXHR9XHJcblxyXG5cclxuXHRhc3luYyBfb25sb2FkXygpIHtcclxuXHRcdHRoaXMuYXV0b19jaGF0ID0gdHJ1ZTtcclxuXHRcdHRoaXMuZWFzeWFwaSA9IG5ldyBFYXN5QVBJKHRoaXMuYXBwKTtcclxuXHRcdC8vIFx1NTIxRFx1NTlDQlx1NTlDQlx1NTMxNlx1RkYwQ1x1NTJBMFx1OEY3RFx1NEUyRFx1ODJGMVx1NjU4N1x1NTQ4Q1x1NTNDMlx1NjU3MFxyXG5cdFx0dGhpcy5zdHJpbmdzID0gbmV3IFN0cmluZ3MoKTtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFdlYlZpZXdMTE1TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5sbG1zID0gW107XHJcblx0XHR0aGlzLmRlZXBzZWVrID0gbmV3IERlZXBTZWVrKHRoaXMuYXBwKTtcclxuXHRcdHRoaXMuZG91YmFvID0gbmV3IERvdWJhbyh0aGlzLmFwcCk7XHJcblx0XHR0aGlzLmtpbWkgPSBuZXcgS2ltaSh0aGlzLmFwcCk7XHJcblx0XHR0aGlzLnl1YW5iYW8gPSBuZXcgWXVhbmJhbyh0aGlzLmFwcCk7XHJcblx0XHR0aGlzLmNoYXRncHQgPSBuZXcgQ2hhdEdQVCh0aGlzLmFwcClcclxuXHRcdHRoaXMuYmFzZWxsbXMgPSBbXHJcblx0XHRcdHRoaXMueXVhbmJhbyxcclxuXHRcdFx0dGhpcy5jaGF0Z3B0LFxyXG5cdFx0XHR0aGlzLmtpbWksXHJcblx0XHRcdHRoaXMuZG91YmFvLFxyXG5cdFx0XHR0aGlzLmRlZXBzZWVrLFxyXG5cdFx0XVxyXG5cdFx0dGhpcy5iYXNld3YgPSBuZXcgQmFzZVdlYlZpZXdlcih0aGlzLmFwcCwnJyk7XHJcblxyXG5cdFx0XHJcblx0XHQvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTRcclxuXHRcdGFkZENvbW1hbmRzKHRoaXMpO1xyXG5cclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjbWRfcmVmcmVzaF9sbG1zKCl7XHJcblx0XHRsZXQgdmlld3MgPSB0aGlzLmJhc2V3di52aWV3cztcclxuXHRcdHRoaXMubGxtcyA9IHRoaXMubGxtcy5zbGljZSgwLDApO1xyXG5cdFx0Zm9yKGxldCB2aWV3IG9mIHZpZXdzKXtcclxuXHRcdFx0aWYoKHZpZXcgYXMgYW55KS51cmwuc3RhcnRzV2l0aCh0aGlzLmRlZXBzZWVrLmhvbWVwYWdlKSl7XHJcblx0XHRcdFx0bGV0IGxsbSA9IG5ldyBEZWVwU2Vlayh0aGlzLmFwcCk7XHJcblx0XHRcdFx0bGxtLnZpZXcgPSB2aWV3O1xyXG5cdFx0XHRcdHRoaXMubGxtcy5wdXNoKGxsbSk7XHJcblx0XHRcdH1lbHNlIGlmKCh2aWV3IGFzIGFueSkudXJsLnN0YXJ0c1dpdGgodGhpcy5kb3ViYW8uaG9tZXBhZ2UpKXtcclxuXHRcdFx0XHRsZXQgbGxtID0gbmV3IERvdWJhbyh0aGlzLmFwcCk7XHJcblx0XHRcdFx0bGxtLnZpZXcgPSB2aWV3O1xyXG5cdFx0XHRcdHRoaXMubGxtcy5wdXNoKGxsbSk7XHJcblx0XHRcdH1lbHNlIGlmKCh2aWV3IGFzIGFueSkudXJsLnN0YXJ0c1dpdGgodGhpcy5raW1pLmhvbWVwYWdlKSl7XHJcblx0XHRcdFx0bGV0IGxsbSA9IG5ldyBLaW1pKHRoaXMuYXBwKTtcclxuXHRcdFx0XHRsbG0udmlldyA9IHZpZXc7XHJcblx0XHRcdFx0dGhpcy5sbG1zLnB1c2gobGxtKTtcclxuXHRcdFx0fWVsc2UgaWYoKHZpZXcgYXMgYW55KS51cmwuc3RhcnRzV2l0aCh0aGlzLmNoYXRncHQuaG9tZXBhZ2UpKXtcclxuXHRcdFx0XHRsZXQgbGxtID0gbmV3IENoYXRHUFQodGhpcy5hcHApO1xyXG5cdFx0XHRcdGxsbS52aWV3ID0gdmlldztcclxuXHRcdFx0XHR0aGlzLmxsbXMucHVzaChsbG0pO1xyXG5cdFx0XHR9ZWxzZSBpZigodmlldyBhcyBhbnkpLnVybC5zdGFydHNXaXRoKHRoaXMueXVhbmJhby5ob21lcGFnZSkpe1xyXG5cdFx0XHRcdGxldCBsbG0gPSBuZXcgWXVhbmJhbyh0aGlzLmFwcCk7XHJcblx0XHRcdFx0bGxtLnZpZXcgPSB2aWV3O1xyXG5cdFx0XHRcdHRoaXMubGxtcy5wdXNoKGxsbSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIGNtZF9jaGF0X3NlcXVlbmNlKCl7XHJcblx0XHRhd2FpdCB0aGlzLmNtZF9yZWZyZXNoX2xsbXMoKTtcclxuXHRcdGlmKHRoaXMubGxtcy5sZW5ndGg9PTApe1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHR0aGlzLmF1dG9fY2hhdCA9IHRydWU7XHJcblx0XHRsZXQgaWR4ID0gMDtcclxuXHRcdGxldCBsbG0gPSB0aGlzLmxsbXNbaWR4XTtcclxuXHRcdGxldCByc3AgPSAoYXdhaXQgbGxtLmdldF9sYXN0X2NvbnRlbnQoKSkgPz8gJyc7XHJcblx0XHR3aGlsZSh0aGlzLmF1dG9fY2hhdCAmJiByc3AgJiYgcnNwIT0nJyl7XHJcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuYXV0b19zdG9wLnNwbGl0KCdcXG4nKS5jb250YWlucyhyc3AudHJpbSgpKSl7XHJcblx0XHRcdFx0dGhpcy5hdXRvX2NoYXQgPSBmYWxzZTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0XHRpZHggPSBpZHgrMTtcclxuXHRcdFx0aWYoaWR4PT10aGlzLmxsbXMubGVuZ3RoKXtcclxuXHRcdFx0XHRpZHg9MDtcclxuXHRcdFx0fVxyXG5cdFx0XHRsbG0gPSB0aGlzLmxsbXNbaWR4XTtcclxuXHRcdFx0cnNwID0gKGF3YWl0IGxsbS5yZXF1ZXN0KHJzcCkpID8/ICcnO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5hdXRvX2NoYXQgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGdldF9wcm9tcHQodGZpbGU6VEZpbGV8bnVsbCxpZHg9MCl7XHJcblx0XHRsZXQgcHJvbXB0ID0gYXdhaXQgdGhpcy5lYXN5YXBpLmVkaXRvci5nZXRfc2VsZWN0aW9uKCk7XHJcblx0XHRpZihwcm9tcHQhPScnKXtyZXR1cm4gcHJvbXB0fVxyXG5cclxuXHRcdGlmKCF0ZmlsZSl7cmV0dXJuICcnfVxyXG5cclxuXHRcdGxldCBpdGVtcyA9IHRoaXMuc2V0dGluZ3MucHJvbXB0X25hbWUudHJpbSgpLnNwbGl0KCdcXG4nKTtcclxuXHRcdGlmKGl0ZW1zLmxlbmd0aD09MCl7cmV0dXJuICcnfVxyXG5cclxuXHRcdGZvcihsZXQgaXRlbSBvZiBpdGVtcyl7XHJcblx0XHRcdHByb21wdCA9IGF3YWl0IHRoaXMuZWFzeWFwaS5lZGl0b3IuZ2V0X2NvZGVfc2VjdGlvbih0ZmlsZSxpdGVtLGlkeCk7XHJcblx0XHRcdGlmKHByb21wdCl7cmV0dXJuIHByb21wdH1cclxuXHJcblx0XHRcdHByb21wdCA9IGF3YWl0IHRoaXMuZWFzeWFwaS5lZGl0b3IuZ2V0X2hlYWRpbmdfc2VjdGlvbih0ZmlsZSxpdGVtLGlkeCk7XHJcblx0XHRcdGlmKHByb21wdCl7cmV0dXJuIHByb21wdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiAnJztcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNtZF9jaGF0X2V2ZXJ5X2xsbXMoKXtcclxuXHRcdGF3YWl0IHRoaXMuY21kX3JlZnJlc2hfbGxtcygpO1xyXG5cclxuXHRcdGxldCBwcm9tcHQgPSBhd2FpdCB0aGlzLmdldF9wcm9tcHQodGhpcy5lYXN5YXBpLmNmaWxlKVxyXG5cdFx0aWYocHJvbXB0PT0nJyl7cmV0dXJufVxyXG5cdFx0XHJcblx0XHRmb3IobGV0IGxsbSBvZiB0aGlzLmxsbXMpe1xyXG5cdFx0XHRsZXQgcnNwID0gYXdhaXQgbGxtLnJlcXVlc3QocHJvbXB0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIGNtZF9jaGF0X2ZpcnN0X2xsbXMoKXtcclxuXHRcdGF3YWl0IHRoaXMuY21kX3JlZnJlc2hfbGxtcygpO1xyXG5cclxuXHRcdGxldCBwcm9tcHQgPSBhd2FpdCB0aGlzLmdldF9wcm9tcHQodGhpcy5lYXN5YXBpLmNmaWxlKVxyXG5cdFx0aWYocHJvbXB0PT0nJyl7cmV0dXJufVxyXG5cdFx0XHJcblx0XHRmb3IobGV0IGxsbSBvZiB0aGlzLmxsbXMpe1xyXG5cdFx0XHRhd2FpdCBsbG0ucmVxdWVzdChwcm9tcHQpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgU3RyaW5nc3tcclxuICAgIGxhbmd1YWdlOnN0cmluZztcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgbGV0IGxhbmcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhbmd1YWdlJyk7XHJcbiAgICAgICAgaWYobGFuZyl7XHJcbiAgICAgICAgICAgIHRoaXMubGFuZ3VhZ2UgPSBsYW5nO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLmxhbmd1YWdlID0gJ2VuJztcclxuICAgICAgICB9XHJcblx0fVxyXG5cclxuICAgIGdldCBjbWRfcmVmcmVzaF9sbG1zKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU1MjM3XHU2NUIwQUlcdTZBMjFcdTU3OEJcdTUyMTdcdTg4NjgnXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnUmVmcmVzaCBBSSBNb2RlbHMnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBjbWRfb3Blbl9uZXdfbGxtKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU2NUIwXHU1RUZBQUlcdTVCRjlcdThCREQnXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnTmV3IEFJIENoYXQnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBjbWRfY2hhdF9zZXF1ZW5jZSgpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1NUYwMFx1NTlDQlx1OEZERVx1N0VFRFx1NUJGOVx1OEJERCdcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdTdGFydCBDb250aW51b3VzIENoYXQnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBjbWRfY2hhdF9zZXF1ZW5jZV9zdG9wKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU1MDVDXHU2QjYyXHU4RkRFXHU3RUVEXHU1QkY5XHU4QkREJ1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ1N0b3AgQ29udGludW91cyBDaGF0J1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2V0dGluZ19wcm9tcHRfbmFtZSgpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1NjNEMFx1NzkzQVx1OEJDRFx1NTQwRFx1NzlGMFx1RkYwOFx1NzUyOFx1NEU4RVx1NjgwN1x1OTg5OFx1NjIxNlx1NEVFM1x1NzgwMVx1NTc1N1x1RkYwOSdcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdQcm9tcHQgTmFtZSAoZm9yIGhlYWRpbmcgb3IgY29kZSBibG9jayknXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IHNldHRpbmdfYXV0b19zdG9wKCl7XHJcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZT09J3poJyl7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU1RjUzQUlcdThGRDRcdTU2REVcdTRFRTVcdTRFMEJcdTY1ODdcdTY3MkNcdTY1RjZcdTgxRUFcdTUyQThcdTdFRDNcdTY3NUZcdTVCRjlcdThCREQnXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnQXV0by1zdG9wIGNoYXQgd2hlbiBBSSByZXNwb25kcyB3aXRoJ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgY21kX2NoYXRfZXZlcnlfbGxtcygpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1NTQxMVx1NjI0MFx1NjcwOUFJXHU2QTIxXHU1NzhCXHU1M0QxXHU5MDAxXHU2RDg4XHU2MDZGJ1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ1NlbmQgTWVzc2FnZSB0byBBbGwgQUkgTW9kZWxzJ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgY21kX2NoYXRfZmlyc3RfbGxtcygpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1NTQxMVx1OTk5Nlx1NEUyQUFJXHU2QTIxXHU1NzhCXHU1M0QxXHU5MDAxXHU2RDg4XHU2MDZGJ1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ1NlbmQgTWVzc2FnZSB0byBGaXJzdCBBSSBNb2RlbCdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBsZXQgc3RyaW5ncyA9IG5ldyBTdHJpbmdzKCk7IiwgImltcG9ydCB7IFxyXG5cdEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyxQbHVnaW5cclxufSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgV2ViVmlld0xMTVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgV2Vidmlld0xMTVNldHRpbmdzIHtcclxuXHRhdXRvX3N0b3A6IHN0cmluZztcclxuXHRwcm9tcHRfbmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogV2Vidmlld0xMTVNldHRpbmdzID0ge1xyXG5cdHByb21wdF9uYW1lOiAncHJvbXB0XFxuXHU2M0QwXHU3OTNBXHU4QkNEJyxcclxuXHRhdXRvX3N0b3A6ICdcdTRGRUVcdTY1MzlcdTVCOENcdTYyMTBcXG5cdTRGRUVcdTY1MzlcdTVCOENcdTYyMTBcdTMwMDInLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV2ViVmlld0xMTVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IFdlYlZpZXdMTE1QbHVnaW47XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogV2ViVmlld0xMTVBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRnZXRTZXR0aW5nVmFsdWUoZmllbGQ6IGtleW9mIFdlYnZpZXdMTE1TZXR0aW5ncykge1xyXG5cdFx0cmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzW2ZpZWxkXTtcclxuXHR9XHJcblxyXG5cdGFkZF90b2dnbGUobmFtZTpzdHJpbmcsZGVzYzpzdHJpbmcsZmllbGQ6a2V5b2YgV2Vidmlld0xMTVNldHRpbmdzKXtcclxuXHRcdGxldCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHRcdGxldCB2YWx1ZSA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncyBhcyBhbnkpW2ZpZWxkXSBhcyBib29sZWFuO1xyXG5cdFx0bGV0IGl0ZW0gPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCkgIFxyXG5cdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHQuc2V0RGVzYyhkZXNjKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh2YWx1ZSlcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOm5ldmVyKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1tmaWVsZF0gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRyZXR1cm4gaXRlbTtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSh0aGlzLnBsdWdpbi5zdHJpbmdzLnNldHRpbmdfcHJvbXB0X25hbWUpXHJcblx0XHRcdC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvbXB0X25hbWUpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvbXB0X25hbWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKHRoaXMucGx1Z2luLnN0cmluZ3Muc2V0dGluZ19hdXRvX3N0b3ApXHJcblx0XHRcdC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b19zdG9wKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9fc3RvcCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFxyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgRnV6enlTdWdnZXN0TW9kYWwgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHR5cGUgeyBGdXp6eU1hdGNoICwgQXBwfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbi8vIFx1NkRGQlx1NTJBMFx1N0M3Qlx1NTc4Qlx1NThGMFx1NjYwRVxyXG5pbnRlcmZhY2UgU3VnZ2VzdGVyQ2hvb3NlciB7XHJcblx0dmFsdWVzOiB7XHJcblx0XHRpdGVtOiBzdHJpbmc7XHJcblx0XHRtYXRjaDogeyBzY29yZTogbnVtYmVyOyBtYXRjaGVzOiB1bmtub3duW10gfTtcclxuXHR9W107XHJcblx0c2VsZWN0ZWRJdGVtOiBudW1iZXI7XHJcblx0W2tleTogc3RyaW5nXTogdW5rbm93bjtcclxufVxyXG5cclxuLy8gXHU2MjY5XHU1QzU1RnV6enlTdWdnZXN0TW9kYWxcdTc2ODRcdTdDN0JcdTU3OEJcclxuaW50ZXJmYWNlIEV4dGVuZGVkRnV6enlTdWdnZXN0TW9kYWwgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcclxuXHRjaG9vc2VyOiBTdWdnZXN0ZXJDaG9vc2VyO1xyXG59XHJcblxyXG50eXBlIE9wdGlvbnMgPSB7XHJcblx0bGltaXQ6IEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz5bXCJsaW1pdFwiXTtcclxuXHRlbXB0eVN0YXRlVGV4dDogRnV6enlTdWdnZXN0TW9kYWw8c3RyaW5nPltcImVtcHR5U3RhdGVUZXh0XCJdO1xyXG5cdHBsYWNlaG9sZGVyOiBQYXJhbWV0ZXJzPFxyXG5cdFx0RnV6enlTdWdnZXN0TW9kYWw8c3RyaW5nPltcInNldFBsYWNlaG9sZGVyXCJdXHJcblx0PlswXSBleHRlbmRzIHN0cmluZ1xyXG5cdFx0PyBzdHJpbmdcclxuXHRcdDogbmV2ZXI7XHJcbn07XHJcblxyXG4vKipcclxuICogQ29weSBmcm9tIFF1aWNrQWRkXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnB1dFN1Z2dlc3RlciBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xyXG5cdHByaXZhdGUgcmVzb2x2ZVByb21pc2U6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xyXG5cdHByaXZhdGUgcmVqZWN0UHJvbWlzZTogKHJlYXNvbj86IHVua25vd24pID0+IHZvaWQ7XHJcblx0cHVibGljIHByb21pc2U6IFByb21pc2U8c3RyaW5nPjtcclxuXHRwcml2YXRlIHJlc29sdmVkOiBib29sZWFuO1xyXG5cdGlucHV0RWw6IGFueTtcclxuXHJcblx0cHVibGljIHN0YXRpYyBTdWdnZXN0KFxyXG5cdFx0YXBwOiBBcHAsXHJcblx0XHRkaXNwbGF5SXRlbXM6IHN0cmluZ1tdLFxyXG5cdFx0aXRlbXM6IHN0cmluZ1tdLFxyXG5cdFx0b3B0aW9uczogUGFydGlhbDxPcHRpb25zPiA9IHt9XHJcblx0KSB7XHJcblx0XHRjb25zdCBuZXdTdWdnZXN0ZXIgPSBuZXcgSW5wdXRTdWdnZXN0ZXIoXHJcblx0XHRcdGFwcCxcclxuXHRcdFx0ZGlzcGxheUl0ZW1zLFxyXG5cdFx0XHRpdGVtcyxcclxuXHRcdFx0b3B0aW9uc1xyXG5cdFx0KTtcclxuXHRcdHJldHVybiBuZXdTdWdnZXN0ZXIucHJvbWlzZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuXHRcdGFwcDogQXBwLFxyXG5cdFx0cHJpdmF0ZSBkaXNwbGF5SXRlbXM6IHN0cmluZ1tdLFxyXG5cdFx0cHJpdmF0ZSBpdGVtczogc3RyaW5nW10sXHJcblx0XHRvcHRpb25zOiBQYXJ0aWFsPE9wdGlvbnM+ID0ge31cclxuXHQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblxyXG5cdFx0dGhpcy5wcm9taXNlID0gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRcdHRoaXMucmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xyXG5cdFx0XHR0aGlzLnJlamVjdFByb21pc2UgPSByZWplY3Q7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcblx0XHRcdGlmIChldmVudC5jb2RlICE9PSBcIlRhYlwiKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBcdTRGN0ZcdTc1MjhcdTdDN0JcdTU3OEJcdTY1QURcdThBMDBcdTY3NjVcdThCQkZcdTk1RUVjaG9vc2VyXHJcblx0XHRcdGNvbnN0IHNlbGYgPSB0aGlzIGFzIHVua25vd24gYXMgRXh0ZW5kZWRGdXp6eVN1Z2dlc3RNb2RhbDtcclxuXHRcdFx0Y29uc3QgeyB2YWx1ZXMsIHNlbGVjdGVkSXRlbSB9ID0gc2VsZi5jaG9vc2VyO1xyXG5cclxuXHRcdFx0Y29uc3QgeyB2YWx1ZSB9ID0gdGhpcy5pbnB1dEVsO1xyXG5cdFx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSB2YWx1ZXNbc2VsZWN0ZWRJdGVtXS5pdGVtID8/IHZhbHVlO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKG9wdGlvbnMucGxhY2Vob2xkZXIpIHRoaXMuc2V0UGxhY2Vob2xkZXIob3B0aW9ucy5wbGFjZWhvbGRlcik7XHJcblx0XHRpZiAob3B0aW9ucy5saW1pdCkgdGhpcy5saW1pdCA9IG9wdGlvbnMubGltaXQ7XHJcblx0XHRpZiAob3B0aW9ucy5lbXB0eVN0YXRlVGV4dClcclxuXHRcdFx0dGhpcy5lbXB0eVN0YXRlVGV4dCA9IG9wdGlvbnMuZW1wdHlTdGF0ZVRleHQ7XHJcblxyXG5cdFx0dGhpcy5vcGVuKCk7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtVGV4dChpdGVtOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0aWYgKGl0ZW0gPT09IHRoaXMuaW5wdXRFbC52YWx1ZSkgcmV0dXJuIGl0ZW07XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuZGlzcGxheUl0ZW1zW3RoaXMuaXRlbXMuaW5kZXhPZihpdGVtKV07XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtcygpOiBzdHJpbmdbXSB7XHJcblx0XHRpZiAodGhpcy5pbnB1dEVsLnZhbHVlID09PSBcIlwiKSByZXR1cm4gdGhpcy5pdGVtcztcclxuXHRcdHJldHVybiBbdGhpcy5pbnB1dEVsLnZhbHVlLCAuLi50aGlzLml0ZW1zXTtcclxuXHR9XHJcblxyXG5cdHNlbGVjdFN1Z2dlc3Rpb24oXHJcblx0XHR2YWx1ZTogRnV6enlNYXRjaDxzdHJpbmc+LFxyXG5cdFx0ZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudFxyXG5cdCkge1xyXG5cdFx0dGhpcy5yZXNvbHZlZCA9IHRydWU7XHJcblx0XHRzdXBlci5zZWxlY3RTdWdnZXN0aW9uKHZhbHVlLCBldnQpO1xyXG5cdH1cclxuXHJcblx0b25DaG9vc2VJdGVtKGl0ZW06IHN0cmluZywgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5yZXNvbHZlZCA9IHRydWU7XHJcblx0XHR0aGlzLnJlc29sdmVQcm9taXNlKGl0ZW0pO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdHN1cGVyLm9uQ2xvc2UoKTtcclxuXHJcblx0XHRpZiAoIXRoaXMucmVzb2x2ZWQpIHRoaXMucmVqZWN0UHJvbWlzZShcIm5vIGlucHV0IGdpdmVuLlwiKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkaWFsb2dfc3VnZ2VzdChkaXNwbGF5SXRlbXM6QXJyYXk8c3RyaW5nPixpdGVtczpBcnJheTxhbnk+LHBsYWNlaG9sZGVyPScnKSB7XHJcblx0dHJ5e1xyXG5cdFx0cmV0dXJuIGF3YWl0IElucHV0U3VnZ2VzdGVyLlN1Z2dlc3QoXHJcblx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRkaXNwbGF5SXRlbXMsXHJcblx0XHRcdGl0ZW1zLFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyLFxyXG5cdFx0XHR9XHJcblx0XHQpXHJcblx0fWNhdGNoKGVycm9yKXtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIG51bGxcclxuXHR9XHJcblx0XHJcbn1cclxuIiwgImltcG9ydCB0eXBlIHsgQXBwfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgQnV0dG9uQ29tcG9uZW50LCBNb2RhbCwgVGV4dENvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuLyoqXHJcbiAqIENvcHkgZnJvbSBRdWlja0FkZFxyXG4gKi9cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0UHJvbXB0IGV4dGVuZHMgTW9kYWwge1xyXG5cdHB1YmxpYyB3YWl0Rm9yQ2xvc2U6IFByb21pc2U8c3RyaW5nPjtcclxuXHJcblx0cHJpdmF0ZSByZXNvbHZlUHJvbWlzZTogKGlucHV0OiBzdHJpbmcpID0+IHZvaWQ7XHJcblx0cHJpdmF0ZSByZWplY3RQcm9taXNlOiAocmVhc29uPzogdW5rbm93bikgPT4gdm9pZDtcclxuXHRwcml2YXRlIGRpZFN1Ym1pdCA9IGZhbHNlO1xyXG5cdHByaXZhdGUgaW5wdXRDb21wb25lbnQ6IFRleHRDb21wb25lbnQ7XHJcblx0cHJpdmF0ZSBpbnB1dDogc3RyaW5nO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgcGxhY2Vob2xkZXI6IHN0cmluZztcclxuXHJcblx0cHVibGljIHN0YXRpYyBQcm9tcHQoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdGhlYWRlcjogc3RyaW5nLFxyXG5cdFx0cGxhY2Vob2xkZXI/OiBzdHJpbmcsXHJcblx0XHR2YWx1ZT86IHN0cmluZ1xyXG5cdCk6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0XHRjb25zdCBuZXdQcm9tcHRNb2RhbCA9IG5ldyBJbnB1dFByb21wdChcclxuXHRcdFx0YXBwLFxyXG5cdFx0XHRoZWFkZXIsXHJcblx0XHRcdHBsYWNlaG9sZGVyLFxyXG5cdFx0XHR2YWx1ZVxyXG5cdFx0KTtcclxuXHRcdHJldHVybiBuZXdQcm9tcHRNb2RhbC53YWl0Rm9yQ2xvc2U7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgY29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdHByaXZhdGUgaGVhZGVyOiBzdHJpbmcsXHJcblx0XHRwbGFjZWhvbGRlcj86IHN0cmluZyxcclxuXHRcdHZhbHVlPzogc3RyaW5nXHJcblx0KSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyID8/IFwiXCI7XHJcblx0XHR0aGlzLmlucHV0ID0gdmFsdWUgPz8gXCJcIjtcclxuXHJcblx0XHR0aGlzLndhaXRGb3JDbG9zZSA9IG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcclxuXHRcdFx0dGhpcy5yZWplY3RQcm9taXNlID0gcmVqZWN0O1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHR0aGlzLm9wZW4oKTtcclxuXHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGRpc3BsYXkoKSB7XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKFwicXVpY2tBZGRNb2RhbFwiLCBcInFhSW5wdXRQcm9tcHRcIik7XHJcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0dGhpcy50aXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5oZWFkZXI7XHJcblxyXG5cdFx0Y29uc3QgbWFpbkNvbnRlbnRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcblx0XHR0aGlzLmlucHV0Q29tcG9uZW50ID0gdGhpcy5jcmVhdGVJbnB1dEZpZWxkKFxyXG5cdFx0XHRtYWluQ29udGVudENvbnRhaW5lcixcclxuXHRcdFx0dGhpcy5wbGFjZWhvbGRlcixcclxuXHRcdFx0dGhpcy5pbnB1dFxyXG5cdFx0KTtcclxuXHRcdHRoaXMuY3JlYXRlQnV0dG9uQmFyKG1haW5Db250ZW50Q29udGFpbmVyKTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBjcmVhdGVJbnB1dEZpZWxkKFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdHBsYWNlaG9sZGVyPzogc3RyaW5nLFxyXG5cdFx0dmFsdWU/OiBzdHJpbmdcclxuXHQpIHtcclxuXHRcdGNvbnN0IHRleHRDb21wb25lbnQgPSBuZXcgVGV4dENvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0KHRleHRDb21wb25lbnQgYXMgYW55KS5pbnB1dEVsLmNsYXNzTGlzdC5hZGQoXCJpbnB1dC1maWVsZFwiKTsgXHJcblx0XHQodGV4dENvbXBvbmVudCBhcyBhbnkpXHJcblx0XHRcdC5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlciA/PyBcIlwiKVxyXG5cdFx0XHQuc2V0VmFsdWUodmFsdWUgPz8gXCJcIilcclxuXHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZTpzdHJpbmcpID0+ICh0aGlzLmlucHV0ID0gdmFsdWUpKVxyXG5cdFx0XHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLnN1Ym1pdEVudGVyQ2FsbGJhY2spO1xyXG5cclxuXHRcdHJldHVybiB0ZXh0Q29tcG9uZW50O1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjcmVhdGVCdXR0b24oXHJcblx0XHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG5cdFx0dGV4dDogc3RyaW5nLFxyXG5cdFx0Y2FsbGJhY2s6IChldnQ6IE1vdXNlRXZlbnQpID0+IHVua25vd25cclxuXHQpIHtcclxuXHRcdGNvbnN0IGJ0biA9IG5ldyBCdXR0b25Db21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdGJ0bi5zZXRCdXR0b25UZXh0KHRleHQpLm9uQ2xpY2soY2FsbGJhY2spO1xyXG5cclxuXHRcdHJldHVybiBidG47XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNyZWF0ZUJ1dHRvbkJhcihtYWluQ29udGVudENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGNvbnN0IGJ1dHRvbkJhckNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQgPVxyXG5cdFx0XHRtYWluQ29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoKTtcclxuXHRcdHRoaXMuY3JlYXRlQnV0dG9uKFxyXG5cdFx0XHRidXR0b25CYXJDb250YWluZXIsXHJcblx0XHRcdFwiT2tcIixcclxuXHRcdFx0dGhpcy5zdWJtaXRDbGlja0NhbGxiYWNrXHJcblx0XHQpLnNldEN0YSgpO1xyXG5cdFx0dGhpcy5jcmVhdGVCdXR0b24oXHJcblx0XHRcdGJ1dHRvbkJhckNvbnRhaW5lcixcclxuXHRcdFx0XCJDYW5jZWxcIixcclxuXHRcdFx0dGhpcy5jYW5jZWxDbGlja0NhbGxiYWNrXHJcblx0XHQpO1xyXG5cclxuXHRcdGJ1dHRvbkJhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uLWJhclwiKTtcclxuXHRcdFxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzdWJtaXRDbGlja0NhbGxiYWNrID0gKGV2dDogTW91c2VFdmVudCkgPT4gdGhpcy5zdWJtaXQoKTtcclxuXHRwcml2YXRlIGNhbmNlbENsaWNrQ2FsbGJhY2sgPSAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB0aGlzLmNhbmNlbCgpO1xyXG5cclxuXHRwcml2YXRlIHN1Ym1pdEVudGVyQ2FsbGJhY2sgPSAoZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcblx0XHRpZiAoIWV2dC5pc0NvbXBvc2luZyAmJiBldnQua2V5ID09PSBcIkVudGVyXCIpIHtcclxuXHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuc3VibWl0KCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0cHJpdmF0ZSBzdWJtaXQoKSB7XHJcblx0XHR0aGlzLmRpZFN1Ym1pdCA9IHRydWU7XHJcblxyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjYW5jZWwoKSB7XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlc29sdmVJbnB1dCgpIHtcclxuXHRcdGlmICghdGhpcy5kaWRTdWJtaXQpIHRoaXMucmVqZWN0UHJvbWlzZShcIk5vIGlucHV0IGdpdmVuLlwiKTtcclxuXHRcdGVsc2UgdGhpcy5yZXNvbHZlUHJvbWlzZSh0aGlzLmlucHV0KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVtb3ZlSW5wdXRMaXN0ZW5lcigpIHtcclxuXHRcdHRoaXMuaW5wdXRDb21wb25lbnQuaW5wdXRFbC5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG5cdFx0XHRcImtleWRvd25cIixcclxuXHRcdFx0dGhpcy5zdWJtaXRFbnRlckNhbGxiYWNrXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCkge1xyXG5cdFx0c3VwZXIub25PcGVuKCk7XHJcblxyXG5cdFx0dGhpcy5pbnB1dENvbXBvbmVudC5pbnB1dEVsLmZvY3VzKCk7XHJcblx0XHR0aGlzLmlucHV0Q29tcG9uZW50LmlucHV0RWwuc2VsZWN0KCk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0c3VwZXIub25DbG9zZSgpO1xyXG5cdFx0dGhpcy5yZXNvbHZlSW5wdXQoKTtcclxuXHRcdHRoaXMucmVtb3ZlSW5wdXRMaXN0ZW5lcigpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkaWFsb2dfcHJvbXB0KGhlYWRlcjogc3RyaW5nPSdJbnB1dCcsIHBsYWNlaG9sZGVyOiBzdHJpbmc9JycsdmFsdWU6c3RyaW5nPScnKSB7XHJcblx0dHJ5e1xyXG5cdFx0cmV0dXJuIGF3YWl0IElucHV0UHJvbXB0LlByb21wdChcclxuXHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdGhlYWRlcixcclxuXHRcdFx0cGxhY2Vob2xkZXIsXHJcbiAgICAgICAgICAgIHZhbHVlXHJcblx0XHQpXHJcblx0fWNhdGNoe1xyXG5cdFx0cmV0dXJuIG51bGxcclxuXHR9XHJcbn1cclxuIiwgIlxyXG5cclxuXHJcbmltcG9ydCB7IEFwcCwgVmlldywgV29ya3NwYWNlTGVhZixURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7RWFzeUFQSX0gZnJvbSAnc3JjL2Vhc3lhcGkvZWFzeWFwaSdcclxuXHJcbmV4cG9ydCBjbGFzcyBFYXN5RWRpdG9yIHtcclxuICAgIGFwcDogQXBwO1xyXG4gICAgYXBpOiBFYXN5QVBJO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBhcGk6RWFzeUFQSSkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuYXBpID0gYXBpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhc3luYyBnZXRfc2VsZWN0aW9uKGNhbmNlbF9zZWxlY3Rpb249ZmFsc2Upe1xyXG4gICAgICAgIGxldCBlZGl0b3IgPSAodGhpcy5hcHAud29ya3NwYWNlIGFzIGFueSkuZ2V0QWN0aXZlRmlsZVZpZXcoKT8uZWRpdG9yO1xyXG4gICAgICAgIGlmKGVkaXRvcil7XHJcbiAgICAgICAgICAgIGxldCBzZWwgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmKGNhbmNlbF9zZWxlY3Rpb24pe1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcdTAwQTBcclxuICAgICAgICAgICAgICAgIGF3YWl0IGVkaXRvci5zZXRTZWxlY3Rpb24oY3Vyc29yLCBjdXJzb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzZWw7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0X2NvZGVfc2VjdGlvbih0ZmlsZTpURmlsZSxjdHlwZT0nJyxpZHg9MCxhc19zaW1wbGU9dHJ1ZSl7XHJcbiAgICAgICAgbGV0IGR2bWV0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRmaWxlKTtcclxuICAgICAgICBsZXQgY3R4ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZCh0ZmlsZSk7XHJcbiAgICAgICAgbGV0IHNlY3Rpb24gPSBkdm1ldGE/LnNlY3Rpb25zPy5maWx0ZXIoeD0+eC50eXBlPT0nY29kZScpLmZpbHRlcih4PT57XHJcbiAgICAgICAgICAgIGxldCBjID0gY3R4LnNsaWNlKHgucG9zaXRpb24uc3RhcnQub2Zmc2V0LHgucG9zaXRpb24uZW5kLm9mZnNldCkudHJpbSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gYy5zdGFydHNXaXRoKCdgYGAnK2N0eXBlKSB8fCBjLnN0YXJ0c1dpdGgoJ35+ficrY3R5cGUpO1xyXG4gICAgICAgIH0pW2lkeF1cclxuICAgICAgICBpZihzZWN0aW9uKXtcclxuICAgICAgICAgICAgbGV0IGMgPSBjdHguc2xpY2UoXHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldCxcclxuICAgICAgICAgICAgICAgIHNlY3Rpb24ucG9zaXRpb24uZW5kLm9mZnNldFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoYXNfc2ltcGxlKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjLnNsaWNlKDQrY3R5cGUubGVuZ3RoLGMubGVuZ3RoLTQpXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjb2RlOmMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbjpzZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGN0eDpjdHhcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0X2hlYWRpbmdfc2VjdGlvbih0ZmlsZTpURmlsZSxoZWFkaW5nOnN0cmluZyxpZHg9MCl7XHJcbiAgICAgICAgbGV0IGR2bWV0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRmaWxlKTtcclxuICAgICAgICBsZXQgY3R4ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZCh0ZmlsZSk7XHJcbiAgICAgICAgbGV0IHNlY3Rpb24gPSBkdm1ldGE/LmhlYWRpbmdzPy5maWx0ZXIoeD0+eC5oZWFkaW5nPT1oZWFkaW5nKVtpZHhdXHJcbiAgICAgICAgaWYoc2VjdGlvbil7XHJcbiAgICAgICAgICAgIGxldCBjID0gY3R4LnNsaWNlKFxyXG4gICAgICAgICAgICAgICAgc2VjdGlvbi5wb3NpdGlvbi5zdGFydC5vZmZzZXQsXHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uLnBvc2l0aW9uLmVuZC5vZmZzZXRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIGM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCAiXHJcblxyXG5cclxuaW1wb3J0IHsgQXBwLCBWaWV3LCBXb3Jrc3BhY2VMZWFmLFRGaWxlLFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQge0Vhc3lBUEl9IGZyb20gJ3NyYy9lYXN5YXBpL2Vhc3lhcGknXHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZSB7XHJcbiAgICBhcHA6IEFwcDtcclxuICAgIGFwaTogRWFzeUFQSTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgYXBpOkVhc3lBUEkpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLmFwaSA9IGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZV9zdHJ1Y3R1cmUodGZvbGRlcjpURm9sZGVyLCBkZXB0aCA9IDAsIGlzUm9vdCA9IHRydWUsb25seV9mb2xkZXI9ZmFsc2Usb25seV9tZD10cnVlKSB7XHJcbiAgICAgICAgbGV0IHN0cnVjdHVyZSA9ICcnO1xyXG4gICAgICAgIGNvbnN0IGluZGVudFVuaXQgPSAnICAgICc7IC8vIFx1NTE3M1x1OTUyRVx1NEZFRVx1NjUzOVx1NzBCOVx1RkYxQVx1NkJDRlx1NUM0Mlx1N0YyOVx1OEZEQiA0IFx1N0E3QVx1NjgzQ1xyXG4gICAgICAgIGNvbnN0IHZlcnRpY2FsTGluZSA9ICdcdTI1MDIgICAnOyAvLyBcdTU3ODJcdTc2RjRcdThGREVcdTYzQTVcdTdFQkZcdTVCQzZcdTVFQTZcdTU4OUVcdTVGM0FcclxuICAgICAgICBjb25zdCBpbmRlbnQgPSB2ZXJ0aWNhbExpbmUucmVwZWF0KE1hdGgubWF4KGRlcHRoIC0gMSwgMCkpICsgaW5kZW50VW5pdC5yZXBlYXQoZGVwdGggPiAwID8gMSA6IDApO1xyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGZvbGRlci5jaGlsZHJlbiB8fCBbXTtcclxuICAgIFxyXG4gICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NjgzOVx1NzZFRVx1NUY1NVx1NTQwRFx1NzlGMFxyXG4gICAgICAgIGlmIChpc1Jvb3QpIHtcclxuICAgICAgICAgICAgc3RydWN0dXJlICs9IGAke3Rmb2xkZXIubmFtZX0vXFxuYDtcclxuICAgICAgICAgICAgaXNSb290ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTGFzdCA9IGluZGV4ID09PSBjaGlsZHJlbi5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICBjb25zdCBwcmVmaXggPSBpc0xhc3QgPyAnXHUyNTE0XHUyNTAwXHUyNTAwICcgOiAnXHUyNTFDXHUyNTAwXHUyNTAwICc7IC8vIFx1N0VERlx1NEUwMFx1N0IyNlx1NTNGN1x1OThDRVx1NjgzQ1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NzZFRVx1NUY1NVx1ODI4Mlx1NzBCOVx1RkYxQVx1NTg5RVx1NTJBMFx1NTc4Mlx1NzZGNFx1OEZERVx1NjNBNVx1N0VCRlx1NUJDNlx1NUVBNlxyXG4gICAgICAgICAgICAgICAgc3RydWN0dXJlICs9IGAke2luZGVudH0ke3ByZWZpeH0ke2NoaWxkLm5hbWV9L1xcbmA7XHJcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmUgKz0gdGhpcy5nZW5lcmF0ZV9zdHJ1Y3R1cmUoY2hpbGQsIGRlcHRoICsgMSwgaXNSb290LG9ubHlfZm9sZGVyLG9ubHlfbWQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYoIW9ubHlfZm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTY1ODdcdTRFRjZcdTgyODJcdTcwQjlcdUZGMUFcdTVCRjlcdTlGNTBcdTdCMjZcdTUzRjdcdTRFMEVcdTc2RUVcdTVGNTVcclxuICAgICAgICAgICAgICAgIGlmKG9ubHlfbWQgJiYgKGNoaWxkIGFzIFRGaWxlKS5leHRlbnNpb24hPSdtZCcpe3JldHVybn1cclxuICAgICAgICAgICAgICAgIHN0cnVjdHVyZSArPSBgJHtpbmRlbnR9JHtwcmVmaXh9JHtjaGlsZC5uYW1lfVxcbmA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc3RydWN0dXJlO1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCAiXHJcblxyXG5pbXBvcnQgeyBBcHAsIFZpZXcsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQge2RpYWxvZ19zdWdnZXN0fSBmcm9tICcuL2d1aS9pbnB1dFN1Z2dlc3RlcidcclxuaW1wb3J0IHtkaWFsb2dfcHJvbXB0fSBmcm9tICcuL2d1aS9pbnB1dFByb21wdCdcclxuaW1wb3J0IHsgRWFzeUVkaXRvciB9IGZyb20gJy4vZWRpdG9yJztcclxuaW1wb3J0IHsgRmlsZSB9IGZyb20gJy4vZmlsZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgRWFzeUFQSSB7XHJcbiAgICBhcHA6IEFwcDtcclxuICAgIGRpYWxvZ19zdWdnZXN0OiBGdW5jdGlvblxyXG5cdGRpYWxvZ19wcm9tcHQ6IEZ1bmN0aW9uXHJcbiAgICBlZGl0b3I6IEVhc3lFZGl0b3JcclxuICAgIGZpbGU6IEZpbGVcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nX3N1Z2dlc3QgPSBkaWFsb2dfc3VnZ2VzdDtcclxuXHRcdHRoaXMuZGlhbG9nX3Byb21wdCA9IGRpYWxvZ19wcm9tcHQ7XHJcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBuZXcgRWFzeUVkaXRvcihhcHAsdGhpcyk7XHJcbiAgICAgICAgdGhpcy5maWxlID0gbmV3IEZpbGUoYXBwLHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldF9wbHVnaW4obmFtZTpzdHJpbmcpe1xyXG4gICAgICAgIHJldHVybiAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zPy5wbHVnaW5zW25hbWVdXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5jKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0X3BsdWdpbignbm90ZS1jaGFpbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjZmlsZSgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgfVxyXG59IiwgIlxyXG5pbXBvcnQgeyBBcHAsIFZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQmFzZVdlYlZpZXdlciB7XHJcbiAgICBhcHA6IEFwcDtcclxuICAgIGhvbWVwYWdlOiBhbnk7XHJcbiAgICB2aWV3OiBWaWV3IHwgbnVsbDsgLy8gRGVjbGFyZSB0aGUgdHlwZSBvZiB2aWV3XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGhvbWVwYWdlOiBzdHJpbmcgPSAnJywgbmFtZTpzdHJpbmc9JycpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLmhvbWVwYWdlID0gaG9tZXBhZ2U7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5nZXRfd2Vidmlld3ModGhpcy5ob21lcGFnZSlbMF07XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWxsTGVhdmVzKCkge1xyXG4gICAgICAgIGxldCBsZWF2ZXM6IEFycmF5PFdvcmtzcGFjZUxlYWY+ID0gW107XHJcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoeCA9PiB7XHJcbiAgICAgICAgICAgIGxlYXZlcy5wdXNoKHgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBsZWF2ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFsbFZpZXdzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFsbExlYXZlcy5tYXAoXHJcbiAgICAgICAgICAgIHggPT4geC52aWV3XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NjI0MFx1NjcwOSB3ZWJ2aWV3IFx1NjgwN1x1N0I3RVxyXG4gICAgZ2V0IGxlYXZlcygpIHtcclxuICAgICAgICBsZXQgbGVhdmVzID0gdGhpcy5hbGxMZWF2ZXMuZmlsdGVyKFxyXG4gICAgICAgICAgICB4ID0+ICh4LnZpZXcgYXMgYW55KS53ZWJ2aWV3XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gbGVhdmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NjI0MFx1NjcwOSB3ZWJ2aWV3IFx1ODlDNlx1NTZGRVxyXG4gICAgZ2V0IHZpZXdzKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGVhdmVzLm1hcChcclxuICAgICAgICAgICAgeCA9PiB4LnZpZXdcclxuICAgICAgICApXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGdldCBhY3RpdmVMZWFmKCl7XHJcbiAgICAgICAgbGV0IGxlYXZlcyA9IHRoaXMubGVhdmVzLmZpbHRlcihcclxuICAgICAgICAgICAgeCA9PiAoeCBhcyBhbnkpLmNvbnRhaW5lckVsLmNsYXNzTmFtZS5jb250YWlucygnbW9kLWFjdGl2ZScpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZihsZWF2ZXMubGVuZ3RoIT0xKXtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBsZWF2ZXNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBhY3RpdmVWaWV3KCl7XHJcbiAgICAgICAgbGV0IGxlYWYgPSB0aGlzLmFjdGl2ZUxlYWY7XHJcbiAgICAgICAgaWYobGVhZil7XHJcbiAgICAgICAgICAgIHJldHVybiBsZWFmLnZpZXc7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgd2Vidmlld3NfYmxhbmsoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0X3dlYnZpZXdzKCdhYm91dDpibGFuaycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB3ZWJ2aWV3KCl7XHJcbiAgICAgICAgaWYodGhpcy52aWV3KXtcclxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnZpZXcgYXMgYW55KS53ZWJ2aWV3O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU2MzA3XHU1QjlBXHU2ODA3XHU3QjdFXHJcbiAgICBnZXRfd2Vidmlld3MocHJlZml4OiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52aWV3cy5maWx0ZXIoXHJcbiAgICAgICAgICAgICh4OiBhbnkpID0+IHgudXJsLnN0YXJ0c1dpdGgocHJlZml4KVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvcGVuX2hvbWVwYWdlKHVybCA9IHRoaXMuaG9tZXBhZ2UsIGlkeCA9IDApIHtcclxuICAgICAgICBsZXQgdmlld3MgPSB0aGlzLmdldF93ZWJ2aWV3cyh1cmwpO1xyXG4gICAgICAgIGlmKGlkeD09LTEpe1xyXG4gICAgICAgICAgICBpZHggPSB2aWV3cy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlICh2aWV3cy5sZW5ndGggPCBpZHggKyAxKSB7XHJcbiAgICAgICAgICAgIGxldCBibGFuayA9IHRoaXMud2Vidmlld3NfYmxhbms7XHJcbiAgICAgICAgICAgIGlmIChibGFuay5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgKHRoaXMuYXBwIGFzIGFueSkuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKCd3ZWJ2aWV3ZXI6b3BlbicpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSgzMDAwKTtcclxuICAgICAgICAgICAgICAgIGJsYW5rID0gdGhpcy53ZWJ2aWV3c19ibGFuaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYmxhbmsubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCAoYmxhbmtbMF0gYXMgYW55KS53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KGBcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyR7dXJsfSc7XHJcbiAgICAgICAgICAgIGApO1xyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IChibGFua1swXSBhcyBhbnkpLndlYnZpZXcuc2V0QXR0cignc3JjJywgdXJsKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSgzMDAwKTtcclxuICAgICAgICAgICAgdmlld3MgPSB0aGlzLmdldF93ZWJ2aWV3cyh1cmwpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZpZXdzLmxlbmd0aCA+PSBpZHggKyAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2aWV3c1tpZHhdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgYXN5bmMgc2V0X2hvbWVwYWdlKHVybCA9IHRoaXMuaG9tZXBhZ2UsIGlkeCA9IDApIHtcclxuICAgICAgICB0aGlzLnZpZXcgPSBhd2FpdCB0aGlzLm9wZW5faG9tZXBhZ2UodXJsLCBpZHgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNvdXJjZSh2aWV3ID0gdGhpcy52aWV3KSB7XHJcbiAgICAgICAgaWYgKCF2aWV3IHx8ICEodmlldyBhcyBhbnkpLndlYnZpZXcpIHsgcmV0dXJuICcnOyB9XHJcbiAgICAgICAgbGV0IGh0bWwgPSBhd2FpdCAodmlldyBhcyBhbnkpLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoYGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUxgKTtcclxuICAgICAgICByZXR1cm4gaHRtbDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkb2N1bWVudCh2aWV3ID0gdGhpcy52aWV3KSB7XHJcbiAgICAgICAgbGV0IGh0bWwgPSBhd2FpdCB0aGlzLnNvdXJjZSh0aGlzLnZpZXcpO1xyXG4gICAgICAgIGxldCBkb2MgPSB0aGlzLmh0bWxfdG9fZG9tKGh0bWwpO1xyXG4gICAgICAgIHJldHVybiBkb2M7XHJcbiAgICB9XHJcblxyXG4gICAgaHRtbF90b19kb20oaHRtbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuICAgICAgICBsZXQgZG9tID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhodG1sLCBcInRleHQvaHRtbFwiKTtcclxuICAgICAgICByZXR1cm4gZG9tO1xyXG4gICAgfVxyXG5cclxuICAgIGh0bWxfdG9fbWFya2Rvd24oaHRtbDpzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZG9jID0gdGhpcy5odG1sX3RvX2RvbShodG1sKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdHJlZShub2RlOmFueSwgbGV2ZWwgPSAxKSB7XHJcbiAgICAgICAgICAgIG5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZDphbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyZWUoY2hpbGQsIGxldmVsICsgMSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cmVlKGRvYylcclxuICAgICAgICBmdW5jdGlvbiBjb252ZXJ0Tm9kZShub2RlOmFueSkge1xyXG4gICAgICAgICAgICBsZXQgbWFya2Rvd24gPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHsgLy8gTm9kZS5FTEVNRU5UX05PREVcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAobm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImgxXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImgyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImgzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImg0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImg1XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImg2XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsZXZlbCA9IHBhcnNlSW50KG5vZGUubm9kZU5hbWUuY2hhckF0KDEpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IFwiI1wiLnJlcGVhdChsZXZlbCkgKyBcIiBcIiArIG5vZGUudGV4dENvbnRlbnQudHJpbSgpICsgXCJcXG5cXG5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IG5vZGUudGV4dENvbnRlbnQudHJpbSgpICsgXCJcXG5cXG5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1bFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGQ6YW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJsaVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gXCItIFwiICsgY2hpbGQudGV4dENvbnRlbnQudHJpbSgpICsgXCJcXG5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IFwiXFxuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBgWyR7bm9kZS50ZXh0Q29udGVudC50cmltKCl9XSgke25vZGUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbWdcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gYCFbJHtub2RlLmdldEF0dHJpYnV0ZShcImFsdFwiKSB8fCBcIkltYWdlXCJ9XSgke25vZGUuZ2V0QXR0cmlidXRlKFwic3JjXCIpfSlgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cm9uZ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJiXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IGAqKiR7bm9kZS50ZXh0Q29udGVudC50cmltKCl9KipgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVtXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImlcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gYCoke25vZGUudGV4dENvbnRlbnQudHJpbSgpfSpgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJsb2NrcXVvdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gXCI+IFwiICsgbm9kZS50ZXh0Q29udGVudC50cmltKCkgKyBcIlxcblxcblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInByZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5maXJzdENoaWxkICYmIG5vZGUuZmlyc3RDaGlsZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImNvZGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvZGUgPSBub2RlLmZpcnN0Q2hpbGQudGV4dENvbnRlbnQudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gXCJgYGBcIiArIFwiXFxuXCIgKyBjb2RlICsgXCJcXG5cIiArIFwiYGBgXCIgKyBcIlxcblxcblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb2RlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gXCJgXCIgKyBub2RlLnRleHRDb250ZW50ICsgXCJgXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlICcjdGV4dCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IG5vZGUudGV4dENvbnRlbnQudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkOmFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gY29udmVydE5vZGUoY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSAzKSB7IC8vTm9kZS5URVhUX05PREVcclxuICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IG5vZGUudGV4dENvbnRlbnQudHJpbSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtYXJrZG93bjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG1kID0gY29udmVydE5vZGUoZG9jLmJvZHkpO1xyXG4gICAgICAgIHJldHVybiBtZDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxheShtczogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBY3RpdmVMZWFmKHZpZXc9dGhpcy52aWV3KXtcclxuICAgICAgICBpZighdmlldyl7cmV0dXJufTtcclxuICAgICAgICBsZXQgbGVhZiA9IHRoaXMuYWxsTGVhdmVzLmZpbHRlcih4PT54LnZpZXc9PXZpZXcpWzBdO1xyXG4gICAgICAgIGlmKCFsZWFmKXtyZXR1cm59O1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldF9zYWZlX2N0eChjdHg6c3RyaW5nKXtcclxuICAgICAgICBsZXQgc2FmZUN0eCA9IEpTT04uc3RyaW5naWZ5KGN0eC5yZXBsYWNlKC9gL2csJ34nKS5yZXBsYWNlKC9cXCQvZywnXHVGRkU1JykpO1xyXG4gICAgICAgIHJldHVybiBzYWZlQ3R4LnNsaWNlKDEsc2FmZUN0eC5sZW5ndGgtMSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFzeW5jIHBhc3RlX21zZyhjdHg6c3RyaW5nKXtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY2xpY2tfYnRuX29mX3NlbmQoKXtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0X2xhc3RfY29udGVudCgpe1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZXF1ZXN0KGN0eDpzdHJpbmcsdGltZW91dD02MCl7XHJcblxyXG5cdFx0bGV0IE4xID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHJcblx0XHRhd2FpdCB0aGlzLnBhc3RlX21zZyhjdHgpO1xyXG5cdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuXHRcdGF3YWl0IHRoaXMuY2xpY2tfYnRuX29mX3NlbmQoKTtcclxuXHRcdGxldCBOMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcclxuXHRcdHdoaWxlKE4yIT1OMSsxKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuXHRcdFx0TjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHR0aW1lb3V0ID0gdGltZW91dC0xO1xyXG5cdFx0XHRpZih0aW1lb3V0PDApe1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYoTjI9PU4xKzEpe1xyXG5cdFx0XHRsZXQgY3R4ID0gYXdhaXQgdGhpcy5nZXRfbGFzdF9jb250ZW50KCk7XHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5uYW1lfSBcdThCRjRcdTRFODZcdTcwQjlcdTRFQzBcdTRFNDhgKVxyXG5cdFx0XHRyZXR1cm4gY3R4O1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5uYW1lfSBcdTRFMERcdThCRjRcdThCRERgKVxyXG5cdFx0XHRjb25zb2xlLmxvZygnRG91YmFvIE46JyxOMSxOMilcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufSAiLCAiaW1wb3J0IHsgQXBwLE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQmFzZVdlYlZpZXdlciB9IGZyb20gJy4vQmFzZVdlYlZpZXdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgRGVlcFNlZWsgZXh0ZW5kcyBCYXNlV2ViVmlld2VyIHtcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCxob21lcGFnZT0naHR0cHM6Ly9jaGF0LmRlZXBzZWVrLmNvbScpIHtcclxuXHRcdHN1cGVyKGFwcCwgaG9tZXBhZ2UsJ0RlZXBTZWVrJyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjbGlja19idG5fb2Zfc2VuZCgpIHtcclxuXHRcdGxldCB2aWV3ID0gdGhpcy52aWV3O1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0ICh0aGlzLnZpZXcgYXMgYW55KS53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0YXN5bmMgZnVuY3Rpb24gY2xpY2soKXtcclxuXHRcdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3JvbGU9XCJidXR0b25cIl06bm90KC5kcy1idXR0b24pJyk7XHJcblx0XHRcdFx0bGV0IGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnKTtcclxuXHRcdFx0XHR3aGlsZSghYXJpYURpc2FibGVkIHx8IGFyaWFEaXNhYmxlZCA9PSAnZmFsc2UnKXtcclxuXHRcdFx0XHRcdGJ1dHRvbi5jbGljaygpO1xyXG5cdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdltyb2xlPVwiYnV0dG9uXCJdOm5vdCguZHMtYnV0dG9uKScpO1xyXG5cdFx0XHRcdFx0YXJpYURpc2FibGVkID0gIGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Y2xpY2soKTtcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIHBhc3RlX21zZyhjdHg6c3RyaW5nKSB7XHJcblx0XHRsZXQgbXNnO1xyXG5cdFx0Y3R4ID0gdGhpcy5nZXRfc2FmZV9jdHgoY3R4KTtcclxuXHRcdGNvbnN0IG1heFJldHJpZXMgPSAxOyAvLyBcdTY3MDBcdTU5MjdcdTkxQ0RcdThCRDVcdTZCMjFcdTY1NzBcclxuXHRcdGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgbWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XHJcblx0XHRcdG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0XHRgXHJcblx0XHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdTVDMDZcdTVGMDJcdTZCNjVcdTkwM0JcdThGOTFcdTVDMDFcdTg4QzVcdTUyMzBcdTRFMDBcdTRFMkEgYXN5bmMgXHU1MUZEXHU2NTcwXHU0RTJEXHJcblx0XHRcdFx0YXN5bmMgZnVuY3Rpb24gaW5zZXJ0VGV4dEFuZFNlbmQoY3R4KSB7XHJcblx0XHRcdFx0XHQvLyBcdTgzQjdcdTUzRDYgdGV4dGFyZWEgXHU1RTc2XHU4MDVBXHU3MTI2XHJcblx0XHRcdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhW2lkPVwiY2hhdC1pbnB1dFwiXScpO1xyXG5cdFx0XHRcdFx0aXRlbS5mb2N1cygpO1xyXG5cclxuXHRcdFx0XHRcdC8vIFx1NjNEMlx1NTE2NVx1NjU4N1x1NjcyQ1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRUZXh0JywgZmFsc2UsIGN0eCk7XHJcblx0XHRcdFx0XHR9LCAxMDAwKTtcclxuXHRcdFx0XHRcdGxldCBpID0gMTAwO1xyXG5cdFx0XHRcdFx0Ly8gXHU3QjQ5XHU1Rjg1XHU2MzA5XHU5NEFFXHU1M0VGXHU3MEI5XHU1MUZCXHJcblx0XHRcdFx0XHR3aGlsZSAodHJ1ZSkge1xyXG5cdFx0XHRcdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3JvbGU9XCJidXR0b25cIl06bm90KC5kcy1idXR0b24pJyk7XHJcblx0XHRcdFx0XHRcdGxldCBhcmlhRGlzYWJsZWQgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XHJcblx0XHRcdFx0XHRcdGlmICghYXJpYURpc2FibGVkIHx8IGFyaWFEaXNhYmxlZCA9PSAnZmFsc2UnKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ1x1NTkwRFx1NTIzNlx1NjIxMFx1NTI5RicpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aSA9IGktMTtcclxuXHRcdFx0XHRcdFx0aWYoaTwwKXticmVha31cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1OEMwM1x1NzUyOCBhc3luYyBcdTUxRkRcdTY1NzBcclxuXHRcdFx0XHRpbnNlcnRUZXh0QW5kU2VuZChcXGAke2N0eH1cXGApO1xyXG5cdFx0XHRcdGBcclxuXHRcdFx0KTtcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2MjEwXHU1MjlGXHU3Qzk4XHU4RDM0XHJcblx0XHRcdGlmIChtc2cpIHtcclxuXHRcdFx0XHRicmVhazsgLy8gXHU1OTgyXHU2NzlDXHU2MjEwXHU1MjlGXHVGRjBDXHU5MDAwXHU1MUZBXHU5MUNEXHU4QkQ1XHU1RkFBXHU3M0FGXHJcblx0XHRcdH1cclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTsgLy8gXHU3QjQ5XHU1Rjg1XHU0RTAwXHU2QkI1XHU2NUY2XHU5NUY0XHU1NDBFXHU5MUNEXHU4QkQ1XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfcmVzcG9uc2UoKSB7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcy1tYXJrZG93bicpO1xyXG5cdFx0aWYoaXRlbXMubGVuZ3RoPDEpe3JldHVybiBudWxsfVxyXG5cdFx0XHJcblx0XHRsZXQgaXRlbSA9IGl0ZW1zW2l0ZW1zLmxlbmd0aC0xXVxyXG5cdFx0bGV0IGN0eCA9IHRoaXMuaHRtbF90b19tYXJrZG93bihpdGVtLm91dGVySFRNTCk7XHJcblx0XHRyZXR1cm4gY3R4O1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbnVtYmVyX29mX3JlY2VpdmVfbXNnKCkge1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRmdW5jdGlvbiBudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKXtcclxuXHRcdFx0XHRsZXQgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcy1mbGV4Pi5kcy1mbGV4ID4uZHMtaWNvbi1idXR0b246bnRoLWNoaWxkKDQpJyk7XHJcblx0XHRcdFx0bGV0IE4gPSBwYXJzZUludChidG5zLmxlbmd0aCk7XHJcblx0XHRcdFx0cmV0dXJuIE47XHJcblx0XHRcdH1cclxuXHRcdFx0bnVtYmVyX29mX3JlY2VpdmVfbXNnKClcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIG51bWJlcl9vZl9jb250ZW50cygpIHtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgaXRlbXMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLm1lc3NhZ2UtY29udGVudCcpXHJcblx0XHRyZXR1cm4gaXRlbXMubGVuZ3RoO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgcmVxdWVzdChjdHg6c3RyaW5nLHRpbWVvdXQ9NjApIHtcclxuXHRcdHRoaXMuc2V0QWN0aXZlTGVhZigpO1xyXG5cdFx0bGV0IE4xID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHJcblx0XHRhd2FpdCB0aGlzLnBhc3RlX21zZyhjdHgpO1xyXG5cdFx0bGV0IE4yID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHRcdFxyXG5cdFx0YXdhaXQgdGhpcy5jbGlja19idG5fb2Zfc2VuZCgpO1xyXG5cclxuXHRcdHdoaWxlKE4yIT1OMSsxKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuXHRcdFx0TjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHR0aW1lb3V0ID0gdGltZW91dC0xO1xyXG5cdFx0XHRpZih0aW1lb3V0PDApe1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZihOMj09TjErMSl7XHJcblx0XHRcdGxldCBjdHggPSBhd2FpdCB0aGlzLmdldF9sYXN0X3Jlc3BvbnNlKCk7XHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5uYW1lfSBcdThCRjRcdTRFODZcdTcwQjlcdTRFQzBcdTRFNDhgKVxyXG5cdFx0XHRyZXR1cm4gY3R4O1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5uYW1lfSBcdTRFMERcdThCRjRcdThCRERgKVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCxOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBCYXNlV2ViVmlld2VyIH0gZnJvbSAnLi9CYXNlV2ViVmlld2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEb3ViYW8gZXh0ZW5kcyBCYXNlV2ViVmlld2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLGhvbWVwYWdlPSdodHRwczovL3d3dy5kb3ViYW8uY29tJykge1xyXG5cdFx0c3VwZXIoYXBwLCBob21lcGFnZSwnXHU4QzQ2XHU1MzA1Jyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjbGlja19idG5fb2Zfc2VuZCgpIHtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRhc3luYyBmdW5jdGlvbiBjbGljaygpe1xyXG5cdFx0XHRcdGxldCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxvdy1lbmQtbXNnLXNlbmQnKTtcclxuXHRcdFx0XHRsZXQgYXJpYURpc2FibGVkID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHRcdHdoaWxlKGFyaWFEaXNhYmxlZD09J2ZhbHNlJyl7XHJcblx0XHRcdFx0XHRidXR0b24uY2xpY2soKTtcclxuXHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxvdy1lbmQtbXNnLXNlbmQnKTtcclxuXHRcdFx0XHRcdGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Y2xpY2soKTtcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIHBhc3RlX21zZyhjdHg6c3RyaW5nKSB7XHJcblx0XHRsZXQgbXNnO1xyXG5cdFx0Y3R4ID0gdGhpcy5nZXRfc2FmZV9jdHgoY3R4KTtcclxuXHRcdGNvbnN0IG1heFJldHJpZXMgPSAxOyAvLyBcdTY3MDBcdTU5MjdcdTkxQ0RcdThCRDVcdTZCMjFcdTY1NzBcclxuXHRcdGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgbWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XHJcblx0XHRcdG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0XHRgXHJcblx0XHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdTVDMDZcdTVGMDJcdTZCNjVcdTkwM0JcdThGOTFcdTVDMDFcdTg4QzVcdTUyMzBcdTRFMDBcdTRFMkEgYXN5bmMgXHU1MUZEXHU2NTcwXHU0RTJEXHJcblx0XHRcdFx0YXN5bmMgZnVuY3Rpb24gaW5zZXJ0VGV4dEFuZFNlbmQoY3R4KSB7XHJcblx0XHRcdFx0XHQvLyBcdTgzQjdcdTUzRDYgdGV4dGFyZWEgXHU1RTc2XHU4MDVBXHU3MTI2XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnaHJlcicsZG9jdW1lbnQpXHJcblx0XHRcdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhW2RhdGEtdGVzdGlkPVwiY2hhdF9pbnB1dF9pbnB1dFwiXScpO1xyXG5cdFx0XHRcdFx0aXRlbS5mb2N1cygpO1xyXG5cclxuXHRcdFx0XHRcdC8vIFx1NjNEMlx1NTE2NVx1NjU4N1x1NjcyQ1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRUZXh0JywgZmFsc2UsIGN0eCk7XHJcblx0XHRcdFx0XHR9LCAxMDAwKTtcclxuXHRcdFx0XHRcdGxldCBpID0gMTAwO1xyXG5cdFx0XHRcdFx0Ly8gXHU3QjQ5XHU1Rjg1XHU2MzA5XHU5NEFFXHU1M0VGXHU3MEI5XHU1MUZCXHJcblx0XHRcdFx0XHR3aGlsZSAodHJ1ZSkge1xyXG5cdFx0XHRcdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zsb3ctZW5kLW1zZy1zZW5kJyk7XHJcblx0XHRcdFx0XHRcdGxldCBhcmlhRGlzYWJsZWQgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XHJcblx0XHRcdFx0XHRcdGlmIChhcmlhRGlzYWJsZWQgPT0gJ2ZhbHNlJykge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdcdTU5MERcdTUyMzZcdTYyMTBcdTUyOUYnKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGkgPSBpLTE7XHJcblx0XHRcdFx0XHRcdGlmKGk8MCl7YnJlYWt9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdThDMDNcdTc1MjggYXN5bmMgXHU1MUZEXHU2NTcwXHJcblx0XHRcdFx0aW5zZXJ0VGV4dEFuZFNlbmQoXFxgJHtjdHh9XFxgKTtcclxuXHRcdFx0XHRgXHJcblx0XHRcdCk7XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjIxMFx1NTI5Rlx1N0M5OFx1OEQzNFxyXG5cdFx0XHRpZiAobXNnKSB7XHJcblx0XHRcdFx0YnJlYWs7IC8vIFx1NTk4Mlx1Njc5Q1x1NjIxMFx1NTI5Rlx1RkYwQ1x1OTAwMFx1NTFGQVx1OTFDRFx1OEJENVx1NUZBQVx1NzNBRlxyXG5cdFx0XHR9XHJcblx0XHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7IC8vIFx1N0I0OVx1NUY4NVx1NEUwMFx1NkJCNVx1NjVGNlx1OTVGNFx1NTQwRVx1OTFDRFx1OEJENVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfcmVzcG9uc2UoKSB7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltkYXRhLXRlc3RpZD1cInJlY2VpdmVfbWVzc2FnZVwiXScpO1xyXG5cdFx0aWYoaXRlbXMubGVuZ3RoPDEpe3JldHVybiBudWxsfVxyXG5cdFx0XHJcblx0XHRsZXQgaXRlbSA9IGl0ZW1zW2l0ZW1zLmxlbmd0aC0xXVxyXG5cdFx0bGV0IGN0eCA9IHRoaXMuaHRtbF90b19tYXJrZG93bihpdGVtLm91dGVySFRNTCk7XHJcblx0XHRyZXR1cm4gY3R4O1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIG51bWJlcl9vZl9yZWNlaXZlX21zZygpe1xyXG5cdFx0XHRcdGxldCBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltkYXRhLXRlc3RpZD1cInJlY2VpdmVfbWVzc2FnZVwiXScpO1xyXG5cdFx0XHRcdGlmKGl0ZW1zLmxlbmd0aD09MCl7XHJcblx0XHRcdFx0XHRyZXR1cm4gMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aXRlbSA9IGl0ZW1zW2l0ZW1zLmxlbmd0aC0xXVxyXG5cdFx0XHRcdGlmKGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtdGVzdGlkPVwibWVzc2FnZV9hY3Rpb25fbGlrZVwiXScpLmxlbmd0aD09MCl7XHJcblx0XHRcdFx0XHRtc2cgPSBpdGVtcy5sZW5ndGgtMTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdG1zZyA9IGl0ZW1zLmxlbmd0aDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIG1zZztcclxuXHRcdFx0fVxyXG5cdFx0XHRudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY29weV9sYXN0X2NvbnRlbnQoKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0YnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWdtZW50LWFjdGlvbnMtY29udGVudC1idG4nKTtcclxuXHRcdFx0YnRucyA9IEFycmF5LmZyb20oYnRucykuZmlsdGVyKHg9PngudGV4dENvbnRlbnQ9PSdcdTU5MERcdTUyMzYnKTtcclxuXHRcdFx0aWYoYnRucy5sZW5ndGg+MCl7XHJcblx0XHRcdFx0YnRuc1tidG5zLmxlbmd0aC0xXS5jbGljaygpO1xyXG5cdFx0XHRcdG1zZyA9IHRydWU7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdG1zZyA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfY29udGVudHMoKXtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgaXRlbXMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLm1lc3NhZ2UtY29udGVudCcpXHJcblx0XHRyZXR1cm4gaXRlbXMubGVuZ3RoO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfY29udGVudCgpe1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcubWVzc2FnZS1jb250ZW50JylcclxuXHRcdHJldHVybiBpdGVtc1tpdGVtcy5sZW5ndGgtMV0udGV4dENvbnRlbnQgfHwgJyc7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZXF1ZXN0KGN0eDpzdHJpbmcsdGltZW91dD02MCl7XHJcblx0XHRsZXQgdmlldyA9IHRoaXMudmlldztcclxuXHRcdGxldCBOMSA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5wYXN0ZV9tc2coY3R4KTtcclxuXHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7XHJcblx0XHRhd2FpdCB0aGlzLmNsaWNrX2J0bl9vZl9zZW5kKCk7XHJcblx0XHRsZXQgTjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHJcblx0XHR3aGlsZShOMiE9TjErMSl7XHJcblx0XHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7XHJcblx0XHRcdE4yID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHRcdFx0dGltZW91dCA9IHRpbWVvdXQtMTtcclxuXHRcdFx0aWYodGltZW91dDwwKXtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmKE4yPT1OMSsxKXtcclxuXHRcdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdFx0bGV0IGl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlLWNvbnRlbnQnKVxyXG5cdFx0XHROMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX2NvbnRlbnRzKClcclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1OEJGNFx1NEU4Nlx1NzBCOVx1NEVDMFx1NEU0OGApXHJcblx0XHRcdHJldHVybiBpdGVtc1tOMi0xXS50ZXh0Q29udGVudDtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRuZXcgTm90aWNlKGAke3RoaXMubmFtZX0gXHU0RTBEXHU4QkY0XHU4QkREYClcclxuXHRcdFx0Y29uc29sZS5sb2coJ0RvdWJhbyBOOicsTjEsTjIpXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IEJhc2VXZWJWaWV3ZXIgfSBmcm9tICcuL0Jhc2VXZWJWaWV3ZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIEtpbWkgZXh0ZW5kcyBCYXNlV2ViVmlld2VyIHtcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCxob21lcGFnZT0naHR0cHM6Ly9raW1pLm1vb25zaG90LmNuLycpIHtcclxuXHRcdHN1cGVyKGFwcCwgaG9tZXBhZ2UsJ0tpbWknKTtcclxuXHR9XHJcblx0YXN5bmMgbmV3X2NoYXQoKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCAodGhpcy52aWV3IGFzIGFueSkud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LWNoYXQtYnRuJykuY2xpY2soKVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHRhc3luYyBjbGlja19idG5fb2Zfc2VuZCgpe1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0ICh0aGlzLnZpZXcgYXMgYW55KS53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0YXN5bmMgZnVuY3Rpb24gY2xpY2soKXtcclxuXHRcdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbmQtYnV0dG9uJyk7XHJcblx0XHRcdFx0bGV0IGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKTtcclxuXHRcdFx0XHR3aGlsZSghYXJpYURpc2FibGVkKXtcclxuXHRcdFx0XHRcdGJ1dHRvbi5jbGljaygpO1xyXG5cdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kLWJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0YXJpYURpc2FibGVkID0gYnV0dG9uLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRjbGljaygpO1xyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblxyXG5cdGFzeW5jIHBhc3RlX21zZyhjdHg6c3RyaW5nKSB7XHJcblx0XHRsZXQgbXNnO1xyXG5cdFx0Y3R4ID0gdGhpcy5nZXRfc2FmZV9jdHgoY3R4KTtcclxuXHRcdGNvbnN0IG1heFJldHJpZXMgPSAxOyAvLyBcdTY3MDBcdTU5MjdcdTkxQ0RcdThCRDVcdTZCMjFcdTY1NzBcclxuXHRcdGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgbWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XHJcblx0XHRcdG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0XHRgXHJcblx0XHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdTVDMDZcdTVGMDJcdTZCNjVcdTkwM0JcdThGOTFcdTVDMDFcdTg4QzVcdTUyMzBcdTRFMDBcdTRFMkEgYXN5bmMgXHU1MUZEXHU2NTcwXHU0RTJEXHJcblx0XHRcdFx0YXN5bmMgZnVuY3Rpb24gaW5zZXJ0VGV4dEFuZFNlbmQoY3R4KSB7XHJcblx0XHRcdFx0XHQvLyBcdTgzQjdcdTUzRDYgdGV4dGFyZWEgXHU1RTc2XHU4MDVBXHU3MTI2XHJcblx0XHRcdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWlucHV0LWVkaXRvci1jb250YWluZXInKS5xdWVyeVNlbGVjdG9yKCcuY2hhdC1pbnB1dC1lZGl0b3InKTtcclxuXHRcdFx0XHRcdGl0ZW0uZm9jdXMoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBcdTYzRDJcdTUxNjVcdTY1ODdcdTY3MkNcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VGV4dCcsIGZhbHNlLCBjdHgpO1xyXG5cdFx0XHRcdFx0fSwgMTAwMCk7XHJcblx0XHRcdFx0XHRsZXQgaSA9IDEwMDtcclxuXHRcdFx0XHRcdC8vIFx1N0I0OVx1NUY4NVx1NjMwOVx1OTRBRVx1NTNFRlx1NzBCOVx1NTFGQlxyXG5cdFx0XHRcdFx0d2hpbGUgKHRydWUpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kLWJ1dHRvbicpOztcclxuXHRcdFx0XHRcdFx0bGV0IGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKTtcclxuXHRcdFx0XHRcdFx0aWYgKGFyaWFEaXNhYmxlZCA9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aSA9IGktMTtcclxuXHRcdFx0XHRcdFx0aWYoaTwwKXticmVha31cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1OEMwM1x1NzUyOCBhc3luYyBcdTUxRkRcdTY1NzBcclxuXHRcdFx0XHRpbnNlcnRUZXh0QW5kU2VuZChcXGAke2N0eH1cXGApO1xyXG5cdFx0XHRcdGBcclxuXHRcdFx0KTtcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2MjEwXHU1MjlGXHU3Qzk4XHU4RDM0XHJcblx0XHRcdGlmIChtc2cpIHtcclxuXHRcdFx0XHRicmVhazsgLy8gXHU1OTgyXHU2NzlDXHU2MjEwXHU1MjlGXHVGRjBDXHU5MDAwXHU1MUZBXHU5MUNEXHU4QkQ1XHU1RkFBXHU3M0FGXHJcblx0XHRcdH1cclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTsgLy8gXHU3QjQ5XHU1Rjg1XHU0RTAwXHU2QkI1XHU2NUY2XHU5NUY0XHU1NDBFXHU5MUNEXHU4QkQ1XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblxyXG5cdGFzeW5jIGdldF9sYXN0X3Jlc3BvbnNlKCkge1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcubWFya2Rvd24tY29udGFpbmVyJyk7XHJcblx0XHRpZihpdGVtcy5sZW5ndGg8MSl7cmV0dXJuIG51bGx9XHJcblx0XHRcclxuXHRcdGxldCBpdGVtID0gaXRlbXNbaXRlbXMubGVuZ3RoLTFdXHJcblx0XHRsZXQgY3R4ID0gdGhpcy5odG1sX3RvX21hcmtkb3duKGl0ZW0ub3V0ZXJIVE1MKTtcclxuXHRcdHJldHVybiBjdHg7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfY29weV9idG5zKCl7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGJ0bnMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnc3ZnW25hbWU9XCJMaWtlXCJdJylcclxuXHRcdHJldHVybiBidG5zLmxlbmd0aDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNvcHlfbGFzdF9jb250ZW50KCl7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VnbWVudC1hY3Rpb25zLWNvbnRlbnQtYnRuJyk7XHJcblx0XHRcdGJ0bnMgPSBBcnJheS5mcm9tKGJ0bnMpLmZpbHRlcih4PT54LnRleHRDb250ZW50PT0nXHU1OTBEXHU1MjM2Jyk7XHJcblx0XHRcdGlmKGJ0bnMubGVuZ3RoPjApe1xyXG5cdFx0XHRcdGJ0bnNbYnRucy5sZW5ndGgtMV0uY2xpY2soKTtcclxuXHRcdFx0XHRtc2cgPSB0cnVlO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRtc2cgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfY29udGVudCgpe1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBjaGF0cyA9IGRvYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2hhdC1jb250ZW50LWl0ZW1cIik7XHJcblx0XHRyZXR1cm4gY2hhdHNbY2hhdHMubGVuZ3RoLTFdLnF1ZXJ5U2VsZWN0b3IoJy5zZWdtZW50LWNvbnRlbnQtYm94Jyk/LnRleHRDb250ZW50Py50cmltKCkgPz8gXCJcIlxyXG5cdH1cclxuXHJcblx0YXN5bmMgbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGJ0bnMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnc3ZnW25hbWU9XCJMaWtlXCJdJylcclxuXHRcdHJldHVybiBidG5zLmxlbmd0aDtcclxuXHR9XHJcblxyXG5cclxuXHRhc3luYyByZXF1ZXN0KGN0eDpzdHJpbmcsdGltZW91dD02MCk6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0XHRsZXQgTjEgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHJcblx0XHRhd2FpdCB0aGlzLnBhc3RlX21zZyhjdHgpO1xyXG5cdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuXHRcdGF3YWl0IHRoaXMuY2xpY2tfYnRuX29mX3NlbmQoKTtcclxuXHRcdGxldCBOMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcclxuXHRcdHdoaWxlKE4yIT1OMSsxKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuXHRcdFx0TjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHR0aW1lb3V0ID0gdGltZW91dC0xO1xyXG5cdFx0XHRpZih0aW1lb3V0PDApe1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZihOMj09TjErMSl7XHJcblx0XHRcdGxldCBkb2M9YXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0XHRsZXQgY2hhdHMgPSBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNoYXQtY29udGVudC1pdGVtXCIpO1xyXG5cdFx0XHRuZXcgTm90aWNlKGAke3RoaXMubmFtZX0gXHU4QkY0XHU0RTg2XHU3MEI5XHU0RUMwXHU0RTQ4YClcclxuXHRcdFx0bGV0IHJlcyA9IGNoYXRzW2NoYXRzLmxlbmd0aC0xXS5xdWVyeVNlbGVjdG9yKCcuc2VnbWVudC1jb250ZW50LWJveCcpPy50ZXh0Q29udGVudCA/PyBcIlwiO1xyXG5cdFx0XHRpZihyZXM/LmNvbnRhaW5zKCdcdTVGNTNcdTUyNERcdTk1N0ZcdTY1ODdcdTY3MkNcdTVCRjlcdThCRERcdTVERjJcdThGQkUyMFx1OEY2RScpKXtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLm5ld19jaGF0KCk7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMucmVxdWVzdChjdHgpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRyZXR1cm4gcmVzO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGxldCByZXMgPSBhd2FpdCB0aGlzLmdldF9sYXN0X2NvbnRlbnQoKTtcclxuXHRcdFx0aWYocmVzPy5jb250YWlucygnXHU1RjUzXHU1MjREXHU5NTdGXHU2NTg3XHU2NzJDXHU1QkY5XHU4QkREXHU1REYyXHU4RkJFMjBcdThGNkUnKSl7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5uZXdfY2hhdCgpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLnJlcXVlc3QoY3R4KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRuZXcgTm90aWNlKGAke3RoaXMubmFtZX0gXHU0RTBEXHU4QkY0XHU4QkREYClcclxuXHRcdFx0cmV0dXJuIFwiXCI7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IEJhc2VXZWJWaWV3ZXIgfSBmcm9tICcuL0Jhc2VXZWJWaWV3ZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFl1YW5iYW8gZXh0ZW5kcyBCYXNlV2ViVmlld2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLGhvbWVwYWdlPSdodHRwczovL3l1YW5iYW8udGVuY2VudC5jb20vY2hhdCcpIHtcclxuXHRcdHN1cGVyKGFwcCwgaG9tZXBhZ2UsJ1x1NTE0M1x1NUI5RCcpO1xyXG5cdH1cclxuXHRcclxuXHRhc3luYyBuZXdfY2hhdCgpe1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0ICh0aGlzLnZpZXcgYXMgYW55KS53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy55Yi1jb21tb24tbmF2X19uZXctY2hhdCcpLmNsaWNrKClcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIHBhc3RlX21zZyhjdHg6c3RyaW5nKSB7XHJcblx0XHRsZXQgbXNnO1xyXG5cdFx0Y3R4ID0gdGhpcy5nZXRfc2FmZV9jdHgoY3R4KTtcclxuXHRcdGNvbnN0IG1heFJldHJpZXMgPSAxOyAvLyBcdTY3MDBcdTU5MjdcdTkxQ0RcdThCRDVcdTZCMjFcdTY1NzBcclxuXHRcdGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgbWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XHJcblx0XHRcdG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0XHRgXHJcblx0XHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdTVDMDZcdTVGMDJcdTZCNjVcdTkwM0JcdThGOTFcdTVDMDFcdTg4QzVcdTUyMzBcdTRFMDBcdTRFMkEgYXN5bmMgXHU1MUZEXHU2NTcwXHU0RTJEXHJcblx0XHRcdFx0YXN5bmMgZnVuY3Rpb24gaW5zZXJ0VGV4dEFuZFNlbmQoY3R4KSB7XHJcblx0XHRcdFx0XHQvLyBcdTgzQjdcdTUzRDYgdGV4dGFyZWEgXHU1RTc2XHU4MDVBXHU3MTI2XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGxldCBpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtaW5wdXQtZWRpdG9yICAucWwtZWRpdG9yLnFsLWJsYW5rJyk7XHJcblx0XHRcdFx0XHRpdGVtLmZvY3VzKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gXHU2M0QyXHU1MTY1XHU2NTg3XHU2NzJDXHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFRleHQnLCBmYWxzZSwgY3R4KTtcclxuXHRcdFx0XHRcdH0sIDEwMDApO1xyXG5cdFx0XHRcdFx0bGV0IGkgPSAxMDA7XHJcblx0XHRcdFx0XHQvLyBcdTdCNDlcdTVGODVcdTYzMDlcdTk0QUVcdTUzRUZcdTcwQjlcdTUxRkJcclxuXHRcdFx0XHRcdHdoaWxlICh0cnVlKSB7XHJcblx0XHRcdFx0XHRcdGxldCBpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtaW5wdXQtZWRpdG9yJykucXVlcnlTZWxlY3RvcignLnFsLWVkaXRvci5xbC1ibGFuaycpXHJcblx0XHRcdFx0XHRcdGlmKGl0ZW0pe1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGkgPSBpLTE7XHJcblx0XHRcdFx0XHRcdGlmKGk8MCl7YnJlYWt9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdThDMDNcdTc1MjggYXN5bmMgXHU1MUZEXHU2NTcwXHJcblx0XHRcdFx0aW5zZXJ0VGV4dEFuZFNlbmQoXFxgJHtjdHh9XFxgKTtcclxuXHRcdFx0XHRgXHJcblx0XHRcdCk7XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjIxMFx1NTI5Rlx1N0M5OFx1OEQzNFxyXG5cdFx0XHRpZiAobXNnKSB7XHJcblx0XHRcdFx0YnJlYWs7IC8vIFx1NTk4Mlx1Njc5Q1x1NjIxMFx1NTI5Rlx1RkYwQ1x1OTAwMFx1NTFGQVx1OTFDRFx1OEJENVx1NUZBQVx1NzNBRlxyXG5cdFx0XHR9XHJcblx0XHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7IC8vIFx1N0I0OVx1NUY4NVx1NEUwMFx1NkJCNVx1NjVGNlx1OTVGNFx1NTQwRVx1OTFDRFx1OEJENVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY2xpY2tfYnRuX29mX3NlbmQoKSB7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0YXN5bmMgZnVuY3Rpb24gY2xpY2soKXtcclxuXHRcdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYVtjbGFzc149XCJzdHlsZV9fc2VuZC1idG5cIl0nKTtcclxuXHRcdFx0XHR3aGlsZSghYnV0dG9uKXtcclxuXHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdhW2NsYXNzXj1cInN0eWxlX19zZW5kLWJ0blwiXScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRidXR0b24uY2xpY2soKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjbGljaygpO1xyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIG51bWJlcl9vZl9yZWNlaXZlX21zZygpe1xyXG5cdFx0XHRcdGxldCBidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFnZW50LWNoYXRfX3Rvb2xiYXIgPiAuYWdlbnQtY2hhdF9fdG9vbGJhcl9fcmlnaHQgPiAuYWdlbnQtY2hhdF9fdG9vbGJhcl9faXRlbTpudGgtY2hpbGQoNSknKTtcclxuXHRcdFx0XHRsZXQgTiA9IHBhcnNlSW50KGJ0bnMubGVuZ3RoKTtcclxuXHRcdFx0XHRyZXR1cm4gTjtcclxuXHRcdFx0fVxyXG5cdFx0XHRudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfY29udGVudCgpe1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IEFycmF5LmZyb20oZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5oeWMtY29udGVudC1tZCAuaHljLWNvbW1vbi1tYXJrZG93bicpKS5maWx0ZXIoXHJcblx0XHRcdGVsID0+ICFlbC5wYXJlbnRFbGVtZW50Py5wYXJlbnRFbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoJ2h5Yy1jb21wb25lbnQtcmVhc29uZXJfX3RoaW5rLWNvbnRlbnQnKVxyXG5cdFx0KTtcclxuXHRcdGxldCBjdHggPSB0aGlzLmh0bWxfdG9fbWFya2Rvd24oaXRlbXNbaXRlbXMubGVuZ3RoLTFdLm91dGVySFRNTCk7XHJcblx0XHRyZXR1cm4gY3R4O1xyXG5cdH1cclxuXHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCxOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBCYXNlV2ViVmlld2VyIH0gZnJvbSAnLi9CYXNlV2ViVmlld2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDaGF0R1BUIGV4dGVuZHMgQmFzZVdlYlZpZXdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCxob21lcGFnZT0naHR0cHM6Ly9jaGF0Z3B0LmNvbScpIHtcclxuXHRcdHN1cGVyKGFwcCwgaG9tZXBhZ2UsJ0NoYXRHUFQnKTtcclxuXHR9XHJcblx0XHJcblx0YXN5bmMgbmV3X2NoYXQoKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCAodGhpcy52aWV3IGFzIGFueSkud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdhW2RhdGEtdGVzdGlkPVwiY3JlYXRlLW5ldy1jaGF0LWJ1dHRvblwiXScpLmNsaWNrKClcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIHBhc3RlX21zZyhjdHg6c3RyaW5nKSB7XHJcblx0XHRsZXQgbXNnO1xyXG5cdFx0Y3R4ID0gdGhpcy5nZXRfc2FmZV9jdHgoY3R4KTtcclxuXHRcdGNvbnN0IG1heFJldHJpZXMgPSAxOyAvLyBcdTY3MDBcdTU5MjdcdTkxQ0RcdThCRDVcdTZCMjFcdTY1NzBcclxuXHRcdGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgbWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XHJcblx0XHRcdG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0XHRgXHJcblx0XHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdTVDMDZcdTVGMDJcdTZCNjVcdTkwM0JcdThGOTFcdTVDMDFcdTg4QzVcdTUyMzBcdTRFMDBcdTRFMkEgYXN5bmMgXHU1MUZEXHU2NTcwXHU0RTJEXHJcblx0XHRcdFx0YXN5bmMgZnVuY3Rpb24gaW5zZXJ0VGV4dEFuZFNlbmQoY3R4KSB7XHJcblx0XHRcdFx0XHQvLyBcdTgzQjdcdTUzRDYgdGV4dGFyZWEgXHU1RTc2XHU4MDVBXHU3MTI2XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGN0eCA9ICdcdTRGNjBcdTY2MkZcdThDMDEnXHJcblx0XHRcdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdiNwcm9tcHQtdGV4dGFyZWEuUHJvc2VNaXJyb3InKTtcclxuXHRcdFx0XHRcdGl0ZW0uZm9jdXMoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBcdTYzRDJcdTUxNjVcdTY1ODdcdTY3MkNcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VGV4dCcsIGZhbHNlLCBjdHgpO1xyXG5cdFx0XHRcdFx0fSwgMTAwMCk7XHJcblx0XHRcdFx0XHRsZXQgaSA9IDEwMDtcclxuXHRcdFx0XHRcdC8vIFx1N0I0OVx1NUY4NVx1NjMwOVx1OTRBRVx1NTNFRlx1NzBCOVx1NTFGQlxyXG5cdFx0XHRcdFx0d2hpbGUgKHRydWUpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24jY29tcG9zZXItc3VibWl0LWJ1dHRvbicpXHJcblx0XHRcdFx0XHRcdGlmKCFpdGVtKXtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpID0gaS0xO1xyXG5cdFx0XHRcdFx0XHRpZihpPDApe2JyZWFrfVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU4QzAzXHU3NTI4IGFzeW5jIFx1NTFGRFx1NjU3MFxyXG5cdFx0XHRcdGluc2VydFRleHRBbmRTZW5kKFxcYCR7Y3R4fVxcYCk7XHJcblx0XHRcdFx0YFxyXG5cdFx0XHQpO1xyXG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTYyMTBcdTUyOUZcdTdDOThcdThEMzRcclxuXHRcdFx0aWYgKG1zZykge1xyXG5cdFx0XHRcdGJyZWFrOyAvLyBcdTU5ODJcdTY3OUNcdTYyMTBcdTUyOUZcdUZGMENcdTkwMDBcdTUxRkFcdTkxQ0RcdThCRDVcdTVGQUFcdTczQUZcclxuXHRcdFx0fVxyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApOyAvLyBcdTdCNDlcdTVGODVcdTRFMDBcdTZCQjVcdTY1RjZcdTk1RjRcdTU0MEVcdTkxQ0RcdThCRDVcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNsaWNrX2J0bl9vZl9zZW5kKCkge1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRmdW5jdGlvbiBkZWxheShtcykge1xyXG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGFzeW5jIGZ1bmN0aW9uIGNsaWNrKCl7XHJcblx0XHRcdFx0bGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbiNjb21wb3Nlci1zdWJtaXQtYnV0dG9uJyk7XHJcblx0XHRcdFx0d2hpbGUoIWJ1dHRvbil7XHJcblx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0YnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uI2NvbXBvc2VyLXN1Ym1pdC1idXR0b24nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YnV0dG9uLmNsaWNrKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Y2xpY2soKTtcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIG51bWJlcl9vZl9yZWNlaXZlX21zZygpe1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRmdW5jdGlvbiBudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKXtcclxuXHRcdFx0XHRsZXQgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5mbGV4Lmp1c3RpZnktc3RhcnQgc3BhbltkYXRhLXN0YXRlPVwiY2xvc2VkXCJdOm50aC1jaGlsZCg1KScpO1xyXG5cdFx0XHRcdGxldCBOID0gcGFyc2VJbnQoYnRucy5sZW5ndGgpO1xyXG5cdFx0XHRcdHJldHVybiBOO1xyXG5cdFx0XHR9XHJcblx0XHRcdG51bWJlcl9vZl9yZWNlaXZlX21zZygpXHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXRfbGFzdF9jb250ZW50KCl7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGl0ZW1zID0gQXJyYXkuZnJvbShkb2MucXVlcnlTZWxlY3RvckFsbCgnZGl2W2RhdGEtbWVzc2FnZS1hdXRob3Itcm9sZT1cImFzc2lzdGFudFwiXSBkaXYubWFya2Rvd24nKSk7XHJcblx0XHRsZXQgY3R4ID0gdGhpcy5odG1sX3RvX21hcmtkb3duKGl0ZW1zW2l0ZW1zLmxlbmd0aC0xXS5vdXRlckhUTUwpO1xyXG5cdFx0cmV0dXJuIGN0eDtcclxuXHR9XHJcblxyXG59XHJcbiIsICJpbXBvcnQgeyBcclxuXHROb3RpY2UsIFRGaWxlXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IFdlYlZpZXdMTE1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IERlZXBTZWVrIH0gZnJvbSAnLi9MTE0vRGVlcFNlZWsnO1xyXG5pbXBvcnQgeyBEb3ViYW8gfSBmcm9tICcuL0xMTS9Eb3ViYW8nO1xyXG5pbXBvcnQgeyBLaW1pIH0gZnJvbSAnLi9MTE0vS2ltaSc7XHJcbmltcG9ydCB7IENoYXRHUFQgfSBmcm9tICcuL0xMTS9DaGF0R1BUJztcclxuXHJcbmNvbnN0IGNtZF9yZWZyZXNoX2xsbXMgPSAocGx1Z2luOldlYlZpZXdMTE1QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdjbWRfcmVmcmVzaF9sbG1zJyxcclxuXHRuYW1lOiBwbHVnaW4uc3RyaW5ncy5jbWRfcmVmcmVzaF9sbG1zLFxyXG5cdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcblx0XHRwbHVnaW4uY21kX3JlZnJlc2hfbGxtcygpO1xyXG5cdH1cclxufSk7XHJcblxyXG5jb25zdCBjbWRfY2hhdF9zZXF1ZW5jZSA9IChwbHVnaW46V2ViVmlld0xMTVBsdWdpbikgPT4gKHtcclxuXHRpZDogJ2NtZF9jaGF0X3NlcXVlbmNlJyxcclxuXHRuYW1lOiBwbHVnaW4uc3RyaW5ncy5jbWRfY2hhdF9zZXF1ZW5jZSxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0YXdhaXQgcGx1Z2luLmNtZF9jaGF0X3NlcXVlbmNlKCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGNtZF9jaGF0X3NlcXVlbmNlX3N0b3AgPSAocGx1Z2luOldlYlZpZXdMTE1QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdjbWRfY2hhdF9zZXF1ZW5jZV9zdG9wJyxcclxuXHRuYW1lOiBwbHVnaW4uc3RyaW5ncy5jbWRfY2hhdF9zZXF1ZW5jZV9zdG9wLFxyXG5cdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcblx0XHRwbHVnaW4uYXV0b19jaGF0ID0gZmFsc2U7XHJcblx0fVxyXG59KTtcclxuXHJcblxyXG5jb25zdCBjbWRfb3Blbl9uZXdfbGxtID0gKHBsdWdpbjpXZWJWaWV3TExNUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAnY21kX29wZW5fbmV3X2xsbScsXHJcblx0bmFtZTogcGx1Z2luLnN0cmluZ3MuY21kX29wZW5fbmV3X2xsbSxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0bGV0IGhwYWdlID0gYXdhaXQgcGx1Z2luLmVhc3lhcGkuZGlhbG9nX3N1Z2dlc3QoXHJcblx0XHRcdHBsdWdpbi5iYXNlbGxtcy5tYXAoeD0+eC5uYW1lKSxcclxuXHRcdFx0cGx1Z2luLmJhc2VsbG1zLm1hcCh4PT54LmhvbWVwYWdlKVxyXG5cdFx0KVxyXG5cdFx0aWYoaHBhZ2Upe1xyXG5cdFx0XHRhd2FpdCBwbHVnaW4uYmFzZXd2Lm9wZW5faG9tZXBhZ2UoaHBhZ2UsLTEpO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG5jb25zdCBjbWRfY2hhdF9ldmVyeV9sbG1zID0gKHBsdWdpbjpXZWJWaWV3TExNUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAnY21kX2NoYXRfZXZlcnlfbGxtcycsXHJcblx0bmFtZTogcGx1Z2luLnN0cmluZ3MuY21kX2NoYXRfZXZlcnlfbGxtcyxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0YXdhaXQgcGx1Z2luLmNtZF9jaGF0X2V2ZXJ5X2xsbXMoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuY29uc3QgY21kX2NoYXRfZmlyc3RfbGxtcyA9IChwbHVnaW46V2ViVmlld0xMTVBsdWdpbikgPT4gKHtcclxuXHRpZDogJ2NtZF9jaGF0X2ZpcnN0X2xsbXMnLFxyXG5cdG5hbWU6IHBsdWdpbi5zdHJpbmdzLmNtZF9jaGF0X2ZpcnN0X2xsbXMsXHJcblx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdGF3YWl0IHBsdWdpbi5jbWRfY2hhdF9maXJzdF9sbG1zKCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGNvbW1hbmRCdWlsZGVyczpBcnJheTxGdW5jdGlvbj4gPSBbXHJcbiAgICBcclxuXTtcclxuXHJcbmNvbnN0IGNvbW1hbmRCdWlsZGVyc0Rlc2t0b3A6QXJyYXk8RnVuY3Rpb24+ID0gW1xyXG5cdC8vIGNtZF9yZWZyZXNoX2xsbXMsXHJcblx0Y21kX29wZW5fbmV3X2xsbSxcclxuXHRjbWRfY2hhdF9maXJzdF9sbG1zLFxyXG5cdGNtZF9jaGF0X2V2ZXJ5X2xsbXMsXHJcblx0Y21kX2NoYXRfc2VxdWVuY2UsXHJcblx0Y21kX2NoYXRfc2VxdWVuY2Vfc3RvcCxcclxuXTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRDb21tYW5kcyhwbHVnaW46V2ViVmlld0xMTVBsdWdpbikge1xyXG4gICAgY29tbWFuZEJ1aWxkZXJzLmZvckVhY2goKGMpID0+IHtcclxuICAgICAgICBwbHVnaW4uYWRkQ29tbWFuZChjKHBsdWdpbikpO1xyXG4gICAgfSk7XHJcblx0aWYoKHBsdWdpbi5hcHAgYXMgYW55KS5pc01vYmlsZT09ZmFsc2Upe1xyXG5cdFx0Y29tbWFuZEJ1aWxkZXJzRGVza3RvcC5mb3JFYWNoKChjKSA9PiB7XHJcblx0XHRcdHBsdWdpbi5hZGRDb21tYW5kKGMocGx1Z2luKSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQThDOzs7QUNBdkMsSUFBTSxVQUFOLE1BQWE7QUFBQSxFQUVoQixjQUFhO0FBQ1QsUUFBSSxPQUFPLE9BQU8sYUFBYSxRQUFRLFVBQVU7QUFDakQsUUFBRyxNQUFLO0FBQ0osV0FBSyxXQUFXO0FBQUEsSUFDcEIsT0FBSztBQUNELFdBQUss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QUFDckUsVUFBRyxRQUFPO0FBQUMsZUFBTztBQUFBLE1BQU07QUFBQSxJQUN6QjtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxNQUFNLHNCQUFxQjtBQUMxQixVQUFNLEtBQUssaUJBQWlCO0FBRTVCLFFBQUksU0FBUyxNQUFNLEtBQUssV0FBVyxLQUFLLFFBQVEsS0FBSztBQUNyRCxRQUFHLFVBQVEsSUFBRztBQUFDO0FBQUEsSUFBTTtBQUVyQixhQUFRLE9BQU8sS0FBSyxNQUFLO0FBQ3hCLFVBQUksTUFBTSxNQUFNLElBQUksUUFBUSxNQUFNO0FBQUEsSUFDbkM7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLHNCQUFxQjtBQUMxQixVQUFNLEtBQUssaUJBQWlCO0FBRTVCLFFBQUksU0FBUyxNQUFNLEtBQUssV0FBVyxLQUFLLFFBQVEsS0FBSztBQUNyRCxRQUFHLFVBQVEsSUFBRztBQUFDO0FBQUEsSUFBTTtBQUVyQixhQUFRLE9BQU8sS0FBSyxNQUFLO0FBQ3hCLFlBQU0sSUFBSSxRQUFRLE1BQU07QUFDeEI7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUVEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAidmFsdWUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJ2YWx1ZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImN0eCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY3R4IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
