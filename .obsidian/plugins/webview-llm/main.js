/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => WebViewLLMPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/strings.ts
var Strings = class {
  constructor() {
    let lang = window.localStorage.getItem("language");
    if (lang) {
      this.language = lang;
    } else {
      this.language = "en";
    }
  }
  get cmd_refresh_llms() {
    if (this.language == "zh") {
      return "\u5237\u65B0\u7FA4\u7EC4";
    } else {
      return "Refresh llms";
    }
  }
  get cmd_open_new_llm() {
    if (this.language == "zh") {
      return "\u6253\u5F00\u65B0AI";
    } else {
      return "Open new llm";
    }
  }
};
var strings = new Strings();

// src/setting.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  strict_mode: false,
  vaultDir: ""
};

// src/LLM/DeepSeek.ts
var import_obsidian2 = require("obsidian");

// src/LLM/BaseWebViewer.ts
var BaseWebViewer = class {
  constructor(app, homepage = "", name = "") {
    this.app = app;
    this.homepage = homepage;
    this.view = this.get_webviews(this.homepage)[0];
    this.name = name;
  }
  get allLeaves() {
    let leaves = [];
    this.app.workspace.iterateAllLeaves((x) => {
      leaves.push(x);
    });
    return leaves;
  }
  get allViews() {
    return this.allLeaves.map(
      (x) => x.view
    );
  }
  // 所有 webview 标签
  get leaves() {
    let leaves = this.allLeaves.filter(
      (x) => x.view.webview
    );
    return leaves;
  }
  // 所有 webview 视图
  get views() {
    return this.leaves.map(
      (x) => x.view
    );
  }
  get activeLeaf() {
    let leaves = this.leaves.filter(
      (x) => x.containerEl.className.contains("mod-active")
    );
    if (leaves.length != 1) {
      return null;
    } else {
      return leaves[0];
    }
  }
  get activeView() {
    let leaf = this.activeLeaf;
    if (leaf) {
      return leaf.view;
    } else {
      return null;
    }
  }
  get webviews_blank() {
    return this.get_webviews("about:blank");
  }
  get webview() {
    if (this.view) {
      return this.view.webview;
    } else {
      return null;
    }
  }
  // 获取指定标签
  get_webviews(prefix) {
    return this.views.filter(
      (x) => x.url.startsWith(prefix)
    );
  }
  async open_homepage(url = this.homepage, idx = 0) {
    let views = this.get_webviews(url);
    if (idx == -1) {
      idx = views.length;
    }
    while (views.length < idx + 1) {
      let blank = this.webviews_blank;
      if (blank.length == 0) {
        await this.app.commands.executeCommandById("webviewer:open");
        await this.delay(3e3);
        blank = this.webviews_blank;
      }
      if (blank.length == 0) {
        return null;
      }
      await blank[0].webview.setAttr("src", url);
      await this.delay(3e3);
      views = this.get_webviews(url);
      break;
    }
    if (views.length >= idx + 1) {
      return views[idx];
    } else {
      return null;
    }
  }
  async set_homepage(url = this.homepage, idx = 0) {
    this.view = await this.open_homepage(url, idx);
  }
  async source(view = this.view) {
    if (!view || !view.webview) {
      return "";
    }
    let html = await view.webview.executeJavaScript(`document.documentElement.outerHTML`);
    return html;
  }
  async document(view = this.view) {
    let html = await this.source(this.view);
    let doc = this.html_to_dom(html);
    return doc;
  }
  html_to_dom(html) {
    let parser = new DOMParser();
    let dom = parser.parseFromString(html, "text/html");
    return dom;
  }
  html_to_markdown(html) {
    let doc = this.html_to_dom(html);
    function tree(node, level = 1) {
      node.childNodes.forEach((child) => {
        tree(child, level + 1);
      });
    }
    tree(doc);
    function convertNode(node) {
      let markdown = "";
      if (node.nodeType === 1) {
        switch (node.nodeName.toLowerCase()) {
          case "h1":
          case "h2":
          case "h3":
          case "h4":
          case "h5":
          case "h6":
            let level = parseInt(node.nodeName.charAt(1), 10);
            markdown += "#".repeat(level) + " " + node.textContent.trim() + "\n\n";
            break;
          case "p":
            markdown += node.textContent.trim() + "\n\n";
            break;
          case "ul":
          case "ol":
            node.childNodes.forEach((child) => {
              if (child.nodeName.toLowerCase() === "li") {
                markdown += "- " + child.textContent.trim() + "\n";
              }
            });
            markdown += "\n";
            break;
          case "a":
            markdown += `[${node.textContent.trim()}](${node.getAttribute("href")})`;
            break;
          case "img":
            markdown += `![${node.getAttribute("alt") || "Image"}](${node.getAttribute("src")})`;
            break;
          case "strong":
          case "b":
            markdown += `**${node.textContent.trim()}**`;
            break;
          case "em":
          case "i":
            markdown += `*${node.textContent.trim()}*`;
            break;
          case "blockquote":
            markdown += "> " + node.textContent.trim() + "\n\n";
            break;
          case "pre":
            if (node.firstChild && node.firstChild.nodeName.toLowerCase() === "code") {
              let code = node.firstChild.textContent.trim();
              markdown += "```\n" + code + "\n```\n\n";
            }
            break;
          case "code":
            markdown += "`" + node.textContent + "`";
            break;
          case "#text":
            markdown += node.textContent.trim();
            break;
          default:
            node.childNodes.forEach((child) => {
              markdown += convertNode(child);
            });
        }
      } else if (node.nodeType === 3) {
        markdown += node.textContent.trim();
      }
      return markdown;
    }
    let md = convertNode(doc.body);
    return md;
  }
  async delay(ms) {
    return new Promise((resolve) => {
      setTimeout(resolve, ms);
    });
  }
  setActiveLeaf(view = this.view) {
    if (!view) {
      return;
    }
    ;
    let leaf = this.allLeaves.filter((x) => x.view == view)[0];
    if (!leaf) {
      return;
    }
    ;
    this.app.workspace.setActiveLeaf(leaf);
  }
  get_safe_ctx(ctx) {
    let safeCtx = JSON.stringify(ctx.replace(/`/g, "~").replace(/\$/g, "\uFFE5"));
    return safeCtx;
  }
};

// src/LLM/DeepSeek.ts
var DeepSeek = class extends BaseWebViewer {
  constructor(app, homepage = "https://chat.deepseek.com") {
    super(app, homepage, "DeepSeek");
  }
  async click_btn_of_send() {
    let view = this.view;
    let msg = await this.view.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('div[role="button"]:not(.ds-button)');
				let ariaDisabled = button.getAttribute('aria-disabled');
				while(!ariaDisabled || ariaDisabled == 'false'){
					button.click();
					await delay(100);
					button = document.querySelector('div[role="button"]:not(.ds-button)');
					ariaDisabled =  button.getAttribute('aria-disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					let item = document.querySelector('textarea[id="chat-input"]');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.querySelector('div[role="button"]:not(.ds-button)');
						let ariaDisabled = button.getAttribute('aria-disabled');
						if (!ariaDisabled || ariaDisabled == 'false') {
							console.log('\u590D\u5236\u6210\u529F');
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".ds-markdown");
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let N = parseInt(document.querySelectorAll('rect[id="\u590D\u5236"]').length/2);
				return N;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async number_of_contents() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items.length;
  }
  async request(ctx, timeout = 60) {
    this.setActiveLeaf();
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let ctx2 = await this.get_last_response();
      new import_obsidian2.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return ctx2;
    } else {
      new import_obsidian2.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      return null;
    }
  }
};

// src/LLM/Doubao.ts
var import_obsidian3 = require("obsidian");
var Doubao = class extends BaseWebViewer {
  constructor(app, homepage = "https://www.doubao.com") {
    super(app, homepage, "\u8C46\u5305");
  }
  async click_btn_of_send() {
    let msg = await this.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.getElementById('flow-end-msg-send');
				let ariaDisabled = button.getAttribute('aria-disabled');
				while(ariaDisabled=='false'){
					button.click();
					await delay(100);
					button = document.getElementById('flow-end-msg-send');
					ariaDisabled = button.getAttribute('aria-disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					console.log('hrer',document)
					let item = document.querySelector('textarea[data-testid="chat_input_input"]');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.getElementById('flow-end-msg-send');
						let ariaDisabled = button.getAttribute('aria-disabled');
						if (ariaDisabled == 'false') {
							console.log('\u590D\u5236\u6210\u529F');
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll('div[data-testid="receive_message"]');
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let items = document.querySelectorAll('div[data-testid="receive_message"]');
				if(items.length==0){
					return 0;
				}
				item = items[items.length-1]
				if(item.querySelectorAll('button[data-testid="message_action_like"]').length==0){
					msg = items.length-1;
				}else{
					msg = items.length;
				}
				return msg;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async copy_last_content() {
    let msg = await this.webview.executeJavaScript(
      `
			btns = document.querySelectorAll('.segment-actions-content-btn');
			btns = Array.from(btns).filter(x=>x.textContent=='\u590D\u5236');
			if(btns.length>0){
				btns[btns.length-1].click();
				msg = true;
			}else{
				msg = false;
			}
			`
    );
    return msg;
  }
  async number_of_contents() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items.length;
  }
  async get_last_content() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items[items.length - 1].textContent;
  }
  async request(ctx, timeout = 60) {
    let view = this.view;
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    let click = await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let doc = await this.document();
      let items = doc.querySelectorAll(".message-content");
      N2 = await this.number_of_contents();
      new import_obsidian3.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return items[N2 - 1].textContent;
    } else {
      new import_obsidian3.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      console.log("Doubao N:", N1, N2);
      return null;
    }
  }
};

// src/LLM/Kimi.ts
var import_obsidian4 = require("obsidian");
var Kimi = class extends BaseWebViewer {
  constructor(app, homepage = "https://kimi.moonshot.cn/") {
    super(app, homepage, "Kimi");
  }
  async new_chat() {
    let msg = await this.view.webview.executeJavaScript(
      `
			document.querySelector('.new-chat-btn').click()
			`
    );
    return msg;
  }
  async click_btn_of_send() {
    let msg = await this.view.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('.send-button');
				let ariaDisabled = button.parentElement.classList.contains('disabled');
				while(!ariaDisabled){
					button.click();
					await delay(100);
					button = document.querySelector('.send-button');
					ariaDisabled = button.parentElement.classList.contains('disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					let item = document.querySelector('.chat-input-editor-container').querySelector('.chat-input-editor');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.querySelector('.send-button');;
						let ariaDisabled = button.parentElement.classList.contains('disabled');
						if (ariaDisabled == false) {
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".markdown-container");
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_copy_btns() {
    let doc = await this.document();
    let btns = doc.querySelectorAll('svg[name="Like"]');
    return btns.length;
  }
  async copy_last_content() {
    let msg = await this.webview.executeJavaScript(
      `
			btns = document.querySelectorAll('.segment-actions-content-btn');
			btns = Array.from(btns).filter(x=>x.textContent=='\u590D\u5236');
			if(btns.length>0){
				btns[btns.length-1].click();
				msg = true;
			}else{
				msg = false;
			}
			`
    );
    return msg;
  }
  async get_last_content() {
    var _a;
    let doc = await this.document();
    let chats = doc.getElementsByClassName("chat-content-item");
    return (_a = chats[chats.length - 1].querySelector(".segment-content-box")) == null ? void 0 : _a.textContent;
  }
  async number_of_receive_msg() {
    let doc = await this.document();
    let btns = doc.querySelectorAll('svg[name="Like"]');
    return btns.length;
  }
  async request(ctx, timeout = 60) {
    var _a;
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let doc = await this.document();
      let chats = doc.getElementsByClassName("chat-content-item");
      new import_obsidian4.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      let res = (_a = chats[chats.length - 1].querySelector(".segment-content-box")) == null ? void 0 : _a.textContent;
      if (res == null ? void 0 : res.contains("\u5F53\u524D\u957F\u6587\u672C\u5BF9\u8BDD\u5DF2\u8FBE20\u8F6E")) {
        await this.new_chat();
        return this.request(ctx);
      } else {
        return res;
      }
    } else {
      let res = await this.get_last_content();
      if (res == null ? void 0 : res.contains("\u5F53\u524D\u957F\u6587\u672C\u5BF9\u8BDD\u5DF2\u8FBE20\u8F6E")) {
        await this.new_chat();
        return this.request(ctx);
      }
      new import_obsidian4.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      return null;
    }
  }
};

// src/commands.ts
var cmd_refresh_llms = (plugin) => ({
  id: "cmd_refresh_llms",
  name: plugin.strings.cmd_refresh_llms,
  callback: async () => {
    let views = plugin.basewv.views;
    plugin.llms = plugin.llms.slice(0, 0);
    for (let view of views) {
      if (view.url.startsWith(plugin.deepseek.homepage)) {
        let llm = new DeepSeek(plugin.app);
        llm.view = view;
        plugin.llms.push(llm);
      } else if (view.url.startsWith(plugin.doubao.homepage)) {
        let llm = new Doubao(plugin.app);
        llm.view = view;
        plugin.llms.push(llm);
      } else if (view.url.startsWith(plugin.kimi.homepage)) {
        let llm = new Kimi(plugin.app);
        llm.view = view;
        plugin.llms.push(llm);
      }
    }
  }
});
var cmd_open_new_llm = (plugin) => ({
  id: "cmd_open_new_llm",
  name: plugin.strings.cmd_open_new_llm,
  callback: async () => {
    let hpage = await plugin.easyapi.dialog_suggest(
      plugin.basellms.map((x) => x.name),
      plugin.basellms.map((x) => x.homepage)
    );
    if (hpage) {
      await plugin.basewv.open_homepage(hpage, -1);
    }
  }
});
var commandBuilders = [];
var commandBuildersDesktop = [
  cmd_refresh_llms,
  cmd_open_new_llm
];
function addCommands(plugin) {
  commandBuilders.forEach((c) => {
    plugin.addCommand(c(plugin));
  });
  if (plugin.app.isMobile == false) {
    commandBuildersDesktop.forEach((c) => {
      plugin.addCommand(c(plugin));
    });
  }
}

// main.ts
var WebViewLLMPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    this.app.workspace.onLayoutReady(
      async () => {
        await this._onload_();
      }
    );
  }
  get easyapi() {
    var _a;
    return (_a = this.app.plugins.plugins["easyapi"]) == null ? void 0 : _a.api;
  }
  async _onload_() {
    this.strings = new Strings();
    await this.loadSettings();
    this.llms = [];
    this.deepseek = new DeepSeek(this.app);
    this.doubao = new Doubao(this.app);
    this.kimi = new Kimi(this.app);
    this.basellms = [
      this.kimi,
      this.doubao,
      this.deepseek
    ];
    this.basewv = new BaseWebViewer(this.app, "");
    addCommands(this);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvc3RyaW5ncy50cyIsICJzcmMvc2V0dGluZy50cyIsICJzcmMvTExNL0RlZXBTZWVrLnRzIiwgInNyYy9MTE0vQmFzZVdlYlZpZXdlci50cyIsICJzcmMvTExNL0RvdWJhby50cyIsICJzcmMvTExNL0tpbWkudHMiLCAic3JjL2NvbW1hbmRzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge05vdGljZSwgUGx1Z2luLCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IFN0cmluZ3MgfSBmcm9tICdzcmMvc3RyaW5ncyc7XHJcbmltcG9ydCB7TXlTZXR0aW5ncyxXZWJWaWV3TExNU2V0dGluZ1RhYixERUZBVUxUX1NFVFRJTkdTfSBmcm9tICdzcmMvc2V0dGluZydcclxuXHJcbmltcG9ydCB7RGVlcFNlZWt9IGZyb20gJ3NyYy9MTE0vRGVlcFNlZWsnXHJcbmltcG9ydCB7RG91YmFvfSBmcm9tICdzcmMvTExNL0RvdWJhbydcclxuaW1wb3J0IHtLaW1pfSBmcm9tICdzcmMvTExNL0tpbWknXHJcbmltcG9ydCB7QmFzZVdlYlZpZXdlcn0gZnJvbSAnc3JjL0xMTS9CYXNlV2ViVmlld2VyJ1xyXG5pbXBvcnQgeyBhZGRDb21tYW5kcyB9IGZyb20gJ3NyYy9jb21tYW5kcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJWaWV3TExNUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzdHJpbmdzIDogU3RyaW5ncztcclxuXHRzZXR0aW5nczogTXlTZXR0aW5ncztcclxuXHR5YW1sOiBzdHJpbmc7XHJcblx0ZGlhbG9nX3N1Z2dlc3Q6IEZ1bmN0aW9uXHJcblx0ZGlhbG9nX3Byb21wdDogRnVuY3Rpb25cclxuXHJcblx0bGxtczogQXJyYXk8QmFzZVdlYlZpZXdlcj47XHJcblx0YmFzZWxsbXM6IEFycmF5PEJhc2VXZWJWaWV3ZXI+O1xyXG5cdGRlZXBzZWVrOiBEZWVwU2VlaztcclxuXHRkb3ViYW86IERvdWJhbztcclxuXHRraW1pOiBLaW1pO1xyXG5cdGJhc2V3djogQmFzZVdlYlZpZXdlcjtcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeShcclxuXHRcdFx0YXN5bmMoKT0+e1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuX29ubG9hZF8oKVxyXG5cdFx0XHR9XHJcblx0XHQpXHJcblx0fVxyXG5cclxuXHRnZXQgZWFzeWFwaSgpe1xyXG5cdFx0cmV0dXJuICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMucGx1Z2luc1snZWFzeWFwaSddPy5hcGk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBfb25sb2FkXygpIHtcclxuXHRcdC8vIFx1NTIxRFx1NTlDQlx1NTlDQlx1NTMxNlx1RkYwQ1x1NTJBMFx1OEY3RFx1NEUyRFx1ODJGMVx1NjU4N1x1NTQ4Q1x1NTNDMlx1NjU3MFxyXG5cdFx0dGhpcy5zdHJpbmdzID0gbmV3IFN0cmluZ3MoKTtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cclxuXHRcdHRoaXMubGxtcyA9IFtdO1xyXG5cdFx0dGhpcy5kZWVwc2VlayA9IG5ldyBEZWVwU2Vlayh0aGlzLmFwcCk7XHJcblx0XHR0aGlzLmRvdWJhbyA9IG5ldyBEb3ViYW8odGhpcy5hcHApO1xyXG5cdFx0dGhpcy5raW1pID0gbmV3IEtpbWkodGhpcy5hcHApO1xyXG5cdFx0dGhpcy5iYXNlbGxtcyA9IFtcclxuXHRcdFx0dGhpcy5raW1pLFxyXG5cdFx0XHR0aGlzLmRvdWJhbyxcclxuXHRcdFx0dGhpcy5kZWVwc2Vla1xyXG5cdFx0XVxyXG5cdFx0dGhpcy5iYXNld3YgPSBuZXcgQmFzZVdlYlZpZXdlcih0aGlzLmFwcCwnJyk7XHJcblxyXG5cdFx0XHJcblx0XHQvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTRcclxuXHRcdGFkZENvbW1hbmRzKHRoaXMpO1xyXG5cclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHJcblxyXG59XHJcbiIsICJcclxuZXhwb3J0IGNsYXNzIFN0cmluZ3N7XHJcbiAgICBsYW5ndWFnZTpzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIGxldCBsYW5nID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYW5ndWFnZScpO1xyXG4gICAgICAgIGlmKGxhbmcpe1xyXG4gICAgICAgICAgICB0aGlzLmxhbmd1YWdlID0gbGFuZztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5sYW5ndWFnZSA9ICdlbic7XHJcbiAgICAgICAgfVxyXG5cdH1cclxuXHJcbiAgICBnZXQgY21kX3JlZnJlc2hfbGxtcygpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1NTIzN1x1NjVCMFx1N0ZBNFx1N0VDNCdcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdSZWZyZXNoIGxsbXMnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgY21kX29wZW5fbmV3X2xsbSgpe1xyXG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2U9PSd6aCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1NjI1M1x1NUYwMFx1NjVCMEFJJ1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gJ09wZW4gbmV3IGxsbSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgbGV0IHN0cmluZ3MgPSBuZXcgU3RyaW5ncygpOyIsICJpbXBvcnQgeyBcclxuXHRBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsUGx1Z2luXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IFdlYlZpZXdMTE1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE15U2V0dGluZ3Mge1xyXG5cdHN0cmljdF9tb2RlOiBib29sZWFuO1xyXG5cdHZhdWx0RGlyOnN0cmluZztcclxuXHRkZWVwc2Vla0ZvbGRlcjogc3RyaW5nO1xyXG5cdGRvdWJhb0ZvbGRlcjogc3RyaW5nO1xyXG5cdGtpbWlGb2xkZXI6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15U2V0dGluZ3MgPSB7XHJcblx0c3RyaWN0X21vZGU6ZmFsc2UsXHJcblx0dmF1bHREaXI6JydcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFdlYlZpZXdMTE1TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBXZWJWaWV3TExNUGx1Z2luO1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFdlYlZpZXdMTE1QbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0Z2V0U2V0dGluZ1ZhbHVlKGZpZWxkOiBrZXlvZiBNeVNldHRpbmdzKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3NbZmllbGRdO1xyXG5cdH1cclxuXHJcblx0YWRkX3RvZ2dsZShuYW1lOnN0cmluZyxkZXNjOnN0cmluZyxmaWVsZDprZXlvZiBNeVNldHRpbmdzKXtcclxuXHRcdGxldCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHRcdGxldCB2YWx1ZSA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncyBhcyBhbnkpW2ZpZWxkXSBhcyBib29sZWFuO1xyXG5cdFx0bGV0IGl0ZW0gPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCkgIFxyXG5cdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHQuc2V0RGVzYyhkZXNjKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh2YWx1ZSlcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOm5ldmVyKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1tmaWVsZF0gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRyZXR1cm4gaXRlbTtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSh0aGlzLnBsdWdpbi5zdHJpbmdzLnNldHRpbmdfdmF1bHRfZGlyKVxyXG5cdFx0XHRcdC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy52YXVsdERpcilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudmF1bHREaXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdHRoaXMuYWRkX3RvZ2dsZShcclxuXHRcdFx0dGhpcy5wbHVnaW4uc3RyaW5ncy5zZXR0aW5nX3N0cmljdF9tb2RlLFxyXG5cdFx0XHR0aGlzLnBsdWdpbi5zdHJpbmdzLnNldHRpbmdfc3RyaWN0X21vZGVfZGVzYyxcclxuXHRcdFx0J3N0cmljdF9tb2RlJ1xyXG5cdFx0KTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCxOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEJhc2VXZWJWaWV3ZXIgfSBmcm9tICcuL0Jhc2VXZWJWaWV3ZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIERlZXBTZWVrIGV4dGVuZHMgQmFzZVdlYlZpZXdlciB7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsaG9tZXBhZ2U9J2h0dHBzOi8vY2hhdC5kZWVwc2Vlay5jb20nKSB7XHJcblx0XHRzdXBlcihhcHAsIGhvbWVwYWdlLCdEZWVwU2VlaycpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY2xpY2tfYnRuX29mX3NlbmQoKSB7XHJcblx0XHRsZXQgdmlldyA9IHRoaXMudmlldztcclxuXHRcdGxldCBtc2cgPSBhd2FpdCAodGhpcy52aWV3IGFzIGFueSkud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRmdW5jdGlvbiBkZWxheShtcykge1xyXG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGFzeW5jIGZ1bmN0aW9uIGNsaWNrKCl7XHJcblx0XHRcdFx0bGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdltyb2xlPVwiYnV0dG9uXCJdOm5vdCguZHMtYnV0dG9uKScpO1xyXG5cdFx0XHRcdGxldCBhcmlhRGlzYWJsZWQgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XHJcblx0XHRcdFx0d2hpbGUoIWFyaWFEaXNhYmxlZCB8fCBhcmlhRGlzYWJsZWQgPT0gJ2ZhbHNlJyl7XHJcblx0XHRcdFx0XHRidXR0b24uY2xpY2soKTtcclxuXHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbcm9sZT1cImJ1dHRvblwiXTpub3QoLmRzLWJ1dHRvbiknKTtcclxuXHRcdFx0XHRcdGFyaWFEaXNhYmxlZCA9ICBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGNsaWNrKCk7XHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBwYXN0ZV9tc2coY3R4OnN0cmluZykge1xyXG5cdFx0bGV0IG1zZztcclxuXHRcdGN0eCA9IHRoaXMuZ2V0X3NhZmVfY3R4KGN0eCk7XHJcblx0XHRjb25zdCBtYXhSZXRyaWVzID0gMTsgLy8gXHU2NzAwXHU1OTI3XHU5MUNEXHU4QkQ1XHU2QjIxXHU2NTcwXHJcblx0XHRmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xyXG5cdFx0XHRtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdFx0YFxyXG5cdFx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU1QzA2XHU1RjAyXHU2QjY1XHU5MDNCXHU4RjkxXHU1QzAxXHU4OEM1XHU1MjMwXHU0RTAwXHU0RTJBIGFzeW5jIFx1NTFGRFx1NjU3MFx1NEUyRFxyXG5cdFx0XHRcdGFzeW5jIGZ1bmN0aW9uIGluc2VydFRleHRBbmRTZW5kKGN0eCkge1xyXG5cdFx0XHRcdFx0Ly8gXHU4M0I3XHU1M0Q2IHRleHRhcmVhIFx1NUU3Nlx1ODA1QVx1NzEyNlxyXG5cdFx0XHRcdFx0bGV0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYVtpZD1cImNoYXQtaW5wdXRcIl0nKTtcclxuXHRcdFx0XHRcdGl0ZW0uZm9jdXMoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBcdTYzRDJcdTUxNjVcdTY1ODdcdTY3MkNcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VGV4dCcsIGZhbHNlLCBjdHgpO1xyXG5cdFx0XHRcdFx0fSwgMTAwMCk7XHJcblx0XHRcdFx0XHRsZXQgaSA9IDEwMDtcclxuXHRcdFx0XHRcdC8vIFx1N0I0OVx1NUY4NVx1NjMwOVx1OTRBRVx1NTNFRlx1NzBCOVx1NTFGQlxyXG5cdFx0XHRcdFx0d2hpbGUgKHRydWUpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdltyb2xlPVwiYnV0dG9uXCJdOm5vdCguZHMtYnV0dG9uKScpO1xyXG5cdFx0XHRcdFx0XHRsZXQgYXJpYURpc2FibGVkID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHRcdFx0XHRpZiAoIWFyaWFEaXNhYmxlZCB8fCBhcmlhRGlzYWJsZWQgPT0gJ2ZhbHNlJykge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdcdTU5MERcdTUyMzZcdTYyMTBcdTUyOUYnKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGkgPSBpLTE7XHJcblx0XHRcdFx0XHRcdGlmKGk8MCl7YnJlYWt9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdThDMDNcdTc1MjggYXN5bmMgXHU1MUZEXHU2NTcwXHJcblx0XHRcdFx0aW5zZXJ0VGV4dEFuZFNlbmQoXFxgJHtjdHh9XFxgKTtcclxuXHRcdFx0XHRgXHJcblx0XHRcdCk7XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjIxMFx1NTI5Rlx1N0M5OFx1OEQzNFxyXG5cdFx0XHRpZiAobXNnKSB7XHJcblx0XHRcdFx0YnJlYWs7IC8vIFx1NTk4Mlx1Njc5Q1x1NjIxMFx1NTI5Rlx1RkYwQ1x1OTAwMFx1NTFGQVx1OTFDRFx1OEJENVx1NUZBQVx1NzNBRlxyXG5cdFx0XHR9XHJcblx0XHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7IC8vIFx1N0I0OVx1NUY4NVx1NEUwMFx1NkJCNVx1NjVGNlx1OTVGNFx1NTQwRVx1OTFDRFx1OEJENVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIGdldF9sYXN0X3Jlc3BvbnNlKCkge1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcuZHMtbWFya2Rvd24nKTtcclxuXHRcdGlmKGl0ZW1zLmxlbmd0aDwxKXtyZXR1cm4gbnVsbH1cclxuXHRcdFxyXG5cdFx0bGV0IGl0ZW0gPSBpdGVtc1tpdGVtcy5sZW5ndGgtMV1cclxuXHRcdGxldCBjdHggPSB0aGlzLmh0bWxfdG9fbWFya2Rvd24oaXRlbS5vdXRlckhUTUwpO1xyXG5cdFx0cmV0dXJuIGN0eDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIG51bWJlcl9vZl9yZWNlaXZlX21zZygpIHtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZnVuY3Rpb24gbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcblx0XHRcdFx0bGV0IE4gPSBwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdyZWN0W2lkPVwiXHU1OTBEXHU1MjM2XCJdJykubGVuZ3RoLzIpO1xyXG5cdFx0XHRcdHJldHVybiBOO1xyXG5cdFx0XHR9XHJcblx0XHRcdG51bWJlcl9vZl9yZWNlaXZlX21zZygpXHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfY29udGVudHMoKSB7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlLWNvbnRlbnQnKVxyXG5cdFx0cmV0dXJuIGl0ZW1zLmxlbmd0aDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHJlcXVlc3QoY3R4OnN0cmluZyx0aW1lb3V0PTYwKSB7XHJcblx0XHR0aGlzLnNldEFjdGl2ZUxlYWYoKTtcclxuXHRcdGxldCBOMSA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5wYXN0ZV9tc2coY3R4KTtcclxuXHRcdGxldCBOMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcclxuXHRcdHdoaWxlKE4yIT1OMSsxKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuXHRcdFx0TjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHR0aW1lb3V0ID0gdGltZW91dC0xO1xyXG5cdFx0XHRpZih0aW1lb3V0PDApe1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZihOMj09TjErMSl7XHJcblx0XHRcdGxldCBjdHggPSBhd2FpdCB0aGlzLmdldF9sYXN0X3Jlc3BvbnNlKCk7XHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5uYW1lfSBcdThCRjRcdTRFODZcdTcwQjlcdTRFQzBcdTRFNDhgKVxyXG5cdFx0XHRyZXR1cm4gY3R4O1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5uYW1lfSBcdTRFMERcdThCRjRcdThCRERgKVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIlxyXG5pbXBvcnQgeyBBcHAsIFZpZXcsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNlV2ViVmlld2VyIHtcclxuICAgIGFwcDogQXBwO1xyXG4gICAgaG9tZXBhZ2U6IGFueTtcclxuICAgIHZpZXc6IFZpZXcgfCBudWxsOyAvLyBEZWNsYXJlIHRoZSB0eXBlIG9mIHZpZXdcclxuICAgIG5hbWU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaG9tZXBhZ2U6IHN0cmluZyA9ICcnLCBuYW1lOnN0cmluZz0nJykge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuaG9tZXBhZ2UgPSBob21lcGFnZTtcclxuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmdldF93ZWJ2aWV3cyh0aGlzLmhvbWVwYWdlKVswXTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhbGxMZWF2ZXMoKSB7XHJcbiAgICAgICAgbGV0IGxlYXZlczogQXJyYXk8V29ya3NwYWNlTGVhZj4gPSBbXTtcclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcyh4ID0+IHtcclxuICAgICAgICAgICAgbGVhdmVzLnB1c2goeCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGxlYXZlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWxsVmlld3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxsTGVhdmVzLm1hcChcclxuICAgICAgICAgICAgeCA9PiB4LnZpZXdcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU2MjQwXHU2NzA5IHdlYnZpZXcgXHU2ODA3XHU3QjdFXHJcbiAgICBnZXQgbGVhdmVzKCkge1xyXG4gICAgICAgIGxldCBsZWF2ZXMgPSB0aGlzLmFsbExlYXZlcy5maWx0ZXIoXHJcbiAgICAgICAgICAgIHggPT4gKHgudmlldyBhcyBhbnkpLndlYnZpZXdcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBsZWF2ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU2MjQwXHU2NzA5IHdlYnZpZXcgXHU4OUM2XHU1NkZFXHJcbiAgICBnZXQgdmlld3MoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5sZWF2ZXMubWFwKFxyXG4gICAgICAgICAgICB4ID0+IHgudmlld1xyXG4gICAgICAgIClcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0IGFjdGl2ZUxlYWYoKXtcclxuICAgICAgICBsZXQgbGVhdmVzID0gdGhpcy5sZWF2ZXMuZmlsdGVyKFxyXG4gICAgICAgICAgICB4ID0+ICh4IGFzIGFueSkuY29udGFpbmVyRWwuY2xhc3NOYW1lLmNvbnRhaW5zKCdtb2QtYWN0aXZlJylcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmKGxlYXZlcy5sZW5ndGghPTEpe1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIGxlYXZlc1swXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdGl2ZVZpZXcoKXtcclxuICAgICAgICBsZXQgbGVhZiA9IHRoaXMuYWN0aXZlTGVhZjtcclxuICAgICAgICBpZihsZWFmKXtcclxuICAgICAgICAgICAgcmV0dXJuIGxlYWYudmlldztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCB3ZWJ2aWV3c19ibGFuaygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRfd2Vidmlld3MoJ2Fib3V0OmJsYW5rJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHdlYnZpZXcoKXtcclxuICAgICAgICBpZih0aGlzLnZpZXcpe1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMudmlldyBhcyBhbnkpLndlYnZpZXc7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTYzMDdcdTVCOUFcdTY4MDdcdTdCN0VcclxuICAgIGdldF93ZWJ2aWV3cyhwcmVmaXg6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdzLmZpbHRlcihcclxuICAgICAgICAgICAgKHg6IGFueSkgPT4geC51cmwuc3RhcnRzV2l0aChwcmVmaXgpXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9wZW5faG9tZXBhZ2UodXJsID0gdGhpcy5ob21lcGFnZSwgaWR4ID0gMCkge1xyXG4gICAgICAgIGxldCB2aWV3cyA9IHRoaXMuZ2V0X3dlYnZpZXdzKHVybCk7XHJcbiAgICAgICAgaWYoaWR4PT0tMSl7XHJcbiAgICAgICAgICAgIGlkeCA9IHZpZXdzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKHZpZXdzLmxlbmd0aCA8IGlkeCArIDEpIHtcclxuICAgICAgICAgICAgbGV0IGJsYW5rID0gdGhpcy53ZWJ2aWV3c19ibGFuaztcclxuICAgICAgICAgICAgaWYgKGJsYW5rLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCAodGhpcy5hcHAgYXMgYW55KS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoJ3dlYnZpZXdlcjpvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDMwMDApO1xyXG4gICAgICAgICAgICAgICAgYmxhbmsgPSB0aGlzLndlYnZpZXdzX2JsYW5rO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChibGFuay5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgKGJsYW5rWzBdIGFzIGFueSkud2Vidmlldy5zZXRBdHRyKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDMwMDApO1xyXG4gICAgICAgICAgICB2aWV3cyA9IHRoaXMuZ2V0X3dlYnZpZXdzKHVybCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmlld3MubGVuZ3RoID49IGlkeCArIDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZpZXdzW2lkeF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhc3luYyBzZXRfaG9tZXBhZ2UodXJsID0gdGhpcy5ob21lcGFnZSwgaWR4ID0gMCkge1xyXG4gICAgICAgIHRoaXMudmlldyA9IGF3YWl0IHRoaXMub3Blbl9ob21lcGFnZSh1cmwsIGlkeCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc291cmNlKHZpZXcgPSB0aGlzLnZpZXcpIHtcclxuICAgICAgICBpZiAoIXZpZXcgfHwgISh2aWV3IGFzIGFueSkud2VidmlldykgeyByZXR1cm4gJyc7IH1cclxuICAgICAgICBsZXQgaHRtbCA9IGF3YWl0ICh2aWV3IGFzIGFueSkud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTGApO1xyXG4gICAgICAgIHJldHVybiBodG1sO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRvY3VtZW50KHZpZXcgPSB0aGlzLnZpZXcpIHtcclxuICAgICAgICBsZXQgaHRtbCA9IGF3YWl0IHRoaXMuc291cmNlKHRoaXMudmlldyk7XHJcbiAgICAgICAgbGV0IGRvYyA9IHRoaXMuaHRtbF90b19kb20oaHRtbCk7XHJcbiAgICAgICAgcmV0dXJuIGRvYztcclxuICAgIH1cclxuXHJcbiAgICBodG1sX3RvX2RvbShodG1sOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xyXG4gICAgICAgIGxldCBkb20gPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGh0bWwsIFwidGV4dC9odG1sXCIpO1xyXG4gICAgICAgIHJldHVybiBkb207XHJcbiAgICB9XHJcblxyXG4gICAgaHRtbF90b19tYXJrZG93bihodG1sOnN0cmluZykge1xyXG4gICAgICAgIGxldCBkb2MgPSB0aGlzLmh0bWxfdG9fZG9tKGh0bWwpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB0cmVlKG5vZGU6YW55LCBsZXZlbCA9IDEpIHtcclxuICAgICAgICAgICAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkOmFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJlZShjaGlsZCwgbGV2ZWwgKyAxKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyZWUoZG9jKVxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbnZlcnROb2RlKG5vZGU6YW55KSB7XHJcbiAgICAgICAgICAgIGxldCBtYXJrZG93biA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkgeyAvLyBOb2RlLkVMRU1FTlRfTk9ERVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDFcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDJcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDNcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDRcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDVcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDZcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxldmVsID0gcGFyc2VJbnQobm9kZS5ub2RlTmFtZS5jaGFyQXQoMSksIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gXCIjXCIucmVwZWF0KGxldmVsKSArIFwiIFwiICsgbm9kZS50ZXh0Q29udGVudC50cmltKCkgKyBcIlxcblxcblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gbm9kZS50ZXh0Q29udGVudC50cmltKCkgKyBcIlxcblxcblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm9sXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZDphbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImxpXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBcIi0gXCIgKyBjaGlsZC50ZXh0Q29udGVudC50cmltKCkgKyBcIlxcblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gXCJcXG5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IGBbJHtub2RlLnRleHRDb250ZW50LnRyaW0oKX1dKCR7bm9kZS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSlgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImltZ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBgIVske25vZGUuZ2V0QXR0cmlidXRlKFwiYWx0XCIpIHx8IFwiSW1hZ2VcIn1dKCR7bm9kZS5nZXRBdHRyaWJ1dGUoXCJzcmNcIil9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3Ryb25nXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gYCoqJHtub2RlLnRleHRDb250ZW50LnRyaW0oKX0qKmA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW1cIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBgKiR7bm9kZS50ZXh0Q29udGVudC50cmltKCl9KmA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmxvY2txdW90ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBcIj4gXCIgKyBub2RlLnRleHRDb250ZW50LnRyaW0oKSArIFwiXFxuXFxuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicHJlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmZpcnN0Q2hpbGQgJiYgbm9kZS5maXJzdENoaWxkLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiY29kZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29kZSA9IG5vZGUuZmlyc3RDaGlsZC50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBcImBgYFwiICsgXCJcXG5cIiArIGNvZGUgKyBcIlxcblwiICsgXCJgYGBcIiArIFwiXFxuXFxuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvZGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBcImBcIiArIG5vZGUudGV4dENvbnRlbnQgKyBcImBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJyN0ZXh0JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gbm9kZS50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGQ6YW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBjb252ZXJ0Tm9kZShjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHsgLy9Ob2RlLlRFWFRfTk9ERVxyXG4gICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gbm9kZS50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1hcmtkb3duO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbWQgPSBjb252ZXJ0Tm9kZShkb2MuYm9keSk7XHJcbiAgICAgICAgcmV0dXJuIG1kO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGF5KG1zOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFjdGl2ZUxlYWYodmlldz10aGlzLnZpZXcpe1xyXG4gICAgICAgIGlmKCF2aWV3KXtyZXR1cm59O1xyXG4gICAgICAgIGxldCBsZWFmID0gdGhpcy5hbGxMZWF2ZXMuZmlsdGVyKHg9Pngudmlldz09dmlldylbMF07XHJcbiAgICAgICAgaWYoIWxlYWYpe3JldHVybn07XHJcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobGVhZik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0X3NhZmVfY3R4KGN0eDpzdHJpbmcpe1xyXG4gICAgICAgIGxldCBzYWZlQ3R4ID0gSlNPTi5zdHJpbmdpZnkoY3R4LnJlcGxhY2UoL2AvZywnficpLnJlcGxhY2UoL1xcJC9nLCdcdUZGRTUnKSk7XHJcbiAgICAgICAgcmV0dXJuIHNhZmVDdHg7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IEFwcCxOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBCYXNlV2ViVmlld2VyIH0gZnJvbSAnLi9CYXNlV2ViVmlld2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEb3ViYW8gZXh0ZW5kcyBCYXNlV2ViVmlld2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLGhvbWVwYWdlPSdodHRwczovL3d3dy5kb3ViYW8uY29tJykge1xyXG5cdFx0c3VwZXIoYXBwLCBob21lcGFnZSwnXHU4QzQ2XHU1MzA1Jyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjbGlja19idG5fb2Zfc2VuZCgpIHtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRhc3luYyBmdW5jdGlvbiBjbGljaygpe1xyXG5cdFx0XHRcdGxldCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxvdy1lbmQtbXNnLXNlbmQnKTtcclxuXHRcdFx0XHRsZXQgYXJpYURpc2FibGVkID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHRcdHdoaWxlKGFyaWFEaXNhYmxlZD09J2ZhbHNlJyl7XHJcblx0XHRcdFx0XHRidXR0b24uY2xpY2soKTtcclxuXHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxvdy1lbmQtbXNnLXNlbmQnKTtcclxuXHRcdFx0XHRcdGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Y2xpY2soKTtcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIHBhc3RlX21zZyhjdHg6c3RyaW5nKSB7XHJcblx0XHRsZXQgbXNnO1xyXG5cdFx0Y3R4ID0gdGhpcy5nZXRfc2FmZV9jdHgoY3R4KTtcclxuXHRcdGNvbnN0IG1heFJldHJpZXMgPSAxOyAvLyBcdTY3MDBcdTU5MjdcdTkxQ0RcdThCRDVcdTZCMjFcdTY1NzBcclxuXHRcdGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgbWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XHJcblx0XHRcdG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0XHRgXHJcblx0XHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdTVDMDZcdTVGMDJcdTZCNjVcdTkwM0JcdThGOTFcdTVDMDFcdTg4QzVcdTUyMzBcdTRFMDBcdTRFMkEgYXN5bmMgXHU1MUZEXHU2NTcwXHU0RTJEXHJcblx0XHRcdFx0YXN5bmMgZnVuY3Rpb24gaW5zZXJ0VGV4dEFuZFNlbmQoY3R4KSB7XHJcblx0XHRcdFx0XHQvLyBcdTgzQjdcdTUzRDYgdGV4dGFyZWEgXHU1RTc2XHU4MDVBXHU3MTI2XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnaHJlcicsZG9jdW1lbnQpXHJcblx0XHRcdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhW2RhdGEtdGVzdGlkPVwiY2hhdF9pbnB1dF9pbnB1dFwiXScpO1xyXG5cdFx0XHRcdFx0aXRlbS5mb2N1cygpO1xyXG5cclxuXHRcdFx0XHRcdC8vIFx1NjNEMlx1NTE2NVx1NjU4N1x1NjcyQ1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRUZXh0JywgZmFsc2UsIGN0eCk7XHJcblx0XHRcdFx0XHR9LCAxMDAwKTtcclxuXHRcdFx0XHRcdGxldCBpID0gMTAwO1xyXG5cdFx0XHRcdFx0Ly8gXHU3QjQ5XHU1Rjg1XHU2MzA5XHU5NEFFXHU1M0VGXHU3MEI5XHU1MUZCXHJcblx0XHRcdFx0XHR3aGlsZSAodHJ1ZSkge1xyXG5cdFx0XHRcdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zsb3ctZW5kLW1zZy1zZW5kJyk7XHJcblx0XHRcdFx0XHRcdGxldCBhcmlhRGlzYWJsZWQgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XHJcblx0XHRcdFx0XHRcdGlmIChhcmlhRGlzYWJsZWQgPT0gJ2ZhbHNlJykge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdcdTU5MERcdTUyMzZcdTYyMTBcdTUyOUYnKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGkgPSBpLTE7XHJcblx0XHRcdFx0XHRcdGlmKGk8MCl7YnJlYWt9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdThDMDNcdTc1MjggYXN5bmMgXHU1MUZEXHU2NTcwXHJcblx0XHRcdFx0aW5zZXJ0VGV4dEFuZFNlbmQoXFxgJHtjdHh9XFxgKTtcclxuXHRcdFx0XHRgXHJcblx0XHRcdCk7XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjIxMFx1NTI5Rlx1N0M5OFx1OEQzNFxyXG5cdFx0XHRpZiAobXNnKSB7XHJcblx0XHRcdFx0YnJlYWs7IC8vIFx1NTk4Mlx1Njc5Q1x1NjIxMFx1NTI5Rlx1RkYwQ1x1OTAwMFx1NTFGQVx1OTFDRFx1OEJENVx1NUZBQVx1NzNBRlxyXG5cdFx0XHR9XHJcblx0XHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7IC8vIFx1N0I0OVx1NUY4NVx1NEUwMFx1NkJCNVx1NjVGNlx1OTVGNFx1NTQwRVx1OTFDRFx1OEJENVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfcmVzcG9uc2UoKSB7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltkYXRhLXRlc3RpZD1cInJlY2VpdmVfbWVzc2FnZVwiXScpO1xyXG5cdFx0aWYoaXRlbXMubGVuZ3RoPDEpe3JldHVybiBudWxsfVxyXG5cdFx0XHJcblx0XHRsZXQgaXRlbSA9IGl0ZW1zW2l0ZW1zLmxlbmd0aC0xXVxyXG5cdFx0bGV0IGN0eCA9IHRoaXMuaHRtbF90b19tYXJrZG93bihpdGVtLm91dGVySFRNTCk7XHJcblx0XHRyZXR1cm4gY3R4O1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIG51bWJlcl9vZl9yZWNlaXZlX21zZygpe1xyXG5cdFx0XHRcdGxldCBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltkYXRhLXRlc3RpZD1cInJlY2VpdmVfbWVzc2FnZVwiXScpO1xyXG5cdFx0XHRcdGlmKGl0ZW1zLmxlbmd0aD09MCl7XHJcblx0XHRcdFx0XHRyZXR1cm4gMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aXRlbSA9IGl0ZW1zW2l0ZW1zLmxlbmd0aC0xXVxyXG5cdFx0XHRcdGlmKGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtdGVzdGlkPVwibWVzc2FnZV9hY3Rpb25fbGlrZVwiXScpLmxlbmd0aD09MCl7XHJcblx0XHRcdFx0XHRtc2cgPSBpdGVtcy5sZW5ndGgtMTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdG1zZyA9IGl0ZW1zLmxlbmd0aDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIG1zZztcclxuXHRcdFx0fVxyXG5cdFx0XHRudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY29weV9sYXN0X2NvbnRlbnQoKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0YnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWdtZW50LWFjdGlvbnMtY29udGVudC1idG4nKTtcclxuXHRcdFx0YnRucyA9IEFycmF5LmZyb20oYnRucykuZmlsdGVyKHg9PngudGV4dENvbnRlbnQ9PSdcdTU5MERcdTUyMzYnKTtcclxuXHRcdFx0aWYoYnRucy5sZW5ndGg+MCl7XHJcblx0XHRcdFx0YnRuc1tidG5zLmxlbmd0aC0xXS5jbGljaygpO1xyXG5cdFx0XHRcdG1zZyA9IHRydWU7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdG1zZyA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfY29udGVudHMoKXtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgaXRlbXMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLm1lc3NhZ2UtY29udGVudCcpXHJcblx0XHRyZXR1cm4gaXRlbXMubGVuZ3RoO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfY29udGVudCgpe1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcubWVzc2FnZS1jb250ZW50JylcclxuXHRcdHJldHVybiBpdGVtc1tpdGVtcy5sZW5ndGgtMV0udGV4dENvbnRlbnRcclxuXHR9XHJcblxyXG5cdGFzeW5jIHJlcXVlc3QoY3R4OnN0cmluZyx0aW1lb3V0PTYwKXtcclxuXHRcdGxldCB2aWV3ID0gdGhpcy52aWV3O1xyXG5cdFx0bGV0IE4xID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHJcblx0XHRhd2FpdCB0aGlzLnBhc3RlX21zZyhjdHgpO1xyXG5cdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuXHRcdGxldCBjbGljayA9IGF3YWl0IHRoaXMuY2xpY2tfYnRuX29mX3NlbmQoKTtcclxuXHRcdGxldCBOMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcclxuXHRcdHdoaWxlKE4yIT1OMSsxKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuXHRcdFx0TjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHR0aW1lb3V0ID0gdGltZW91dC0xO1xyXG5cdFx0XHRpZih0aW1lb3V0PDApe1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYoTjI9PU4xKzEpe1xyXG5cdFx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0XHRsZXQgaXRlbXMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLm1lc3NhZ2UtY29udGVudCcpXHJcblx0XHRcdE4yID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfY29udGVudHMoKVxyXG5cdFx0XHRuZXcgTm90aWNlKGAke3RoaXMubmFtZX0gXHU4QkY0XHU0RTg2XHU3MEI5XHU0RUMwXHU0RTQ4YClcclxuXHRcdFx0cmV0dXJuIGl0ZW1zW04yLTFdLnRleHRDb250ZW50O1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5uYW1lfSBcdTRFMERcdThCRjRcdThCRERgKVxyXG5cdFx0XHRjb25zb2xlLmxvZygnRG91YmFvIE46JyxOMSxOMilcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHsgQmFzZVdlYlZpZXdlciB9IGZyb20gJy4vQmFzZVdlYlZpZXdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgS2ltaSBleHRlbmRzIEJhc2VXZWJWaWV3ZXIge1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLGhvbWVwYWdlPSdodHRwczovL2tpbWkubW9vbnNob3QuY24vJykge1xyXG5cdFx0c3VwZXIoYXBwLCBob21lcGFnZSwnS2ltaScpO1xyXG5cdH1cclxuXHRhc3luYyBuZXdfY2hhdCgpe1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0ICh0aGlzLnZpZXcgYXMgYW55KS53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctY2hhdC1idG4nKS5jbGljaygpXHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cdGFzeW5jIGNsaWNrX2J0bl9vZl9zZW5kKCl7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgKHRoaXMudmlldyBhcyBhbnkpLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRhc3luYyBmdW5jdGlvbiBjbGljaygpe1xyXG5cdFx0XHRcdGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VuZC1idXR0b24nKTtcclxuXHRcdFx0XHRsZXQgYXJpYURpc2FibGVkID0gYnV0dG9uLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpO1xyXG5cdFx0XHRcdHdoaWxlKCFhcmlhRGlzYWJsZWQpe1xyXG5cdFx0XHRcdFx0YnV0dG9uLmNsaWNrKCk7XHJcblx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0YnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbmQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRhcmlhRGlzYWJsZWQgPSBidXR0b24ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGNsaWNrKCk7XHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHJcblx0YXN5bmMgcGFzdGVfbXNnKGN0eDpzdHJpbmcpIHtcclxuXHRcdGxldCBtc2c7XHJcblx0XHRjdHggPSB0aGlzLmdldF9zYWZlX2N0eChjdHgpO1xyXG5cdFx0Y29uc3QgbWF4UmV0cmllcyA9IDE7IC8vIFx1NjcwMFx1NTkyN1x1OTFDRFx1OEJENVx1NkIyMVx1NjU3MFxyXG5cdFx0Zm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcclxuXHRcdFx0bXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRcdGBcclxuXHRcdFx0XHRmdW5jdGlvbiBkZWxheShtcykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1NUMwNlx1NUYwMlx1NkI2NVx1OTAzQlx1OEY5MVx1NUMwMVx1ODhDNVx1NTIzMFx1NEUwMFx1NEUyQSBhc3luYyBcdTUxRkRcdTY1NzBcdTRFMkRcclxuXHRcdFx0XHRhc3luYyBmdW5jdGlvbiBpbnNlcnRUZXh0QW5kU2VuZChjdHgpIHtcclxuXHRcdFx0XHRcdC8vIFx1ODNCN1x1NTNENiB0ZXh0YXJlYSBcdTVFNzZcdTgwNUFcdTcxMjZcclxuXHRcdFx0XHRcdGxldCBpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtaW5wdXQtZWRpdG9yLWNvbnRhaW5lcicpLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWlucHV0LWVkaXRvcicpO1xyXG5cdFx0XHRcdFx0aXRlbS5mb2N1cygpO1xyXG5cclxuXHRcdFx0XHRcdC8vIFx1NjNEMlx1NTE2NVx1NjU4N1x1NjcyQ1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRUZXh0JywgZmFsc2UsIGN0eCk7XHJcblx0XHRcdFx0XHR9LCAxMDAwKTtcclxuXHRcdFx0XHRcdGxldCBpID0gMTAwO1xyXG5cdFx0XHRcdFx0Ly8gXHU3QjQ5XHU1Rjg1XHU2MzA5XHU5NEFFXHU1M0VGXHU3MEI5XHU1MUZCXHJcblx0XHRcdFx0XHR3aGlsZSAodHJ1ZSkge1xyXG5cdFx0XHRcdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbmQtYnV0dG9uJyk7O1xyXG5cdFx0XHRcdFx0XHRsZXQgYXJpYURpc2FibGVkID0gYnV0dG9uLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpO1xyXG5cdFx0XHRcdFx0XHRpZiAoYXJpYURpc2FibGVkID09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpID0gaS0xO1xyXG5cdFx0XHRcdFx0XHRpZihpPDApe2JyZWFrfVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU4QzAzXHU3NTI4IGFzeW5jIFx1NTFGRFx1NjU3MFxyXG5cdFx0XHRcdGluc2VydFRleHRBbmRTZW5kKFxcYCR7Y3R4fVxcYCk7XHJcblx0XHRcdFx0YFxyXG5cdFx0XHQpO1xyXG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTYyMTBcdTUyOUZcdTdDOThcdThEMzRcclxuXHRcdFx0aWYgKG1zZykge1xyXG5cdFx0XHRcdGJyZWFrOyAvLyBcdTU5ODJcdTY3OUNcdTYyMTBcdTUyOUZcdUZGMENcdTkwMDBcdTUxRkFcdTkxQ0RcdThCRDVcdTVGQUFcdTczQUZcclxuXHRcdFx0fVxyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApOyAvLyBcdTdCNDlcdTVGODVcdTRFMDBcdTZCQjVcdTY1RjZcdTk1RjRcdTU0MEVcdTkxQ0RcdThCRDVcclxuXHRcdH1cclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfcmVzcG9uc2UoKSB7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYXJrZG93bi1jb250YWluZXInKTtcclxuXHRcdGlmKGl0ZW1zLmxlbmd0aDwxKXtyZXR1cm4gbnVsbH1cclxuXHRcdFxyXG5cdFx0bGV0IGl0ZW0gPSBpdGVtc1tpdGVtcy5sZW5ndGgtMV1cclxuXHRcdGxldCBjdHggPSB0aGlzLmh0bWxfdG9fbWFya2Rvd24oaXRlbS5vdXRlckhUTUwpO1xyXG5cdFx0cmV0dXJuIGN0eDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIG51bWJlcl9vZl9jb3B5X2J0bnMoKXtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgYnRucyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdzdmdbbmFtZT1cIkxpa2VcIl0nKVxyXG5cdFx0cmV0dXJuIGJ0bnMubGVuZ3RoO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY29weV9sYXN0X2NvbnRlbnQoKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0YnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWdtZW50LWFjdGlvbnMtY29udGVudC1idG4nKTtcclxuXHRcdFx0YnRucyA9IEFycmF5LmZyb20oYnRucykuZmlsdGVyKHg9PngudGV4dENvbnRlbnQ9PSdcdTU5MERcdTUyMzYnKTtcclxuXHRcdFx0aWYoYnRucy5sZW5ndGg+MCl7XHJcblx0XHRcdFx0YnRuc1tidG5zLmxlbmd0aC0xXS5jbGljaygpO1xyXG5cdFx0XHRcdG1zZyA9IHRydWU7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdG1zZyA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXRfbGFzdF9jb250ZW50KCl7XHJcblx0XHRsZXQgZG9jPWF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBjaGF0cyA9IGRvYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2hhdC1jb250ZW50LWl0ZW1cIik7XHJcblx0XHRyZXR1cm4gY2hhdHNbY2hhdHMubGVuZ3RoLTFdLnF1ZXJ5U2VsZWN0b3IoJy5zZWdtZW50LWNvbnRlbnQtYm94Jyk/LnRleHRDb250ZW50XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKXtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgYnRucyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdzdmdbbmFtZT1cIkxpa2VcIl0nKVxyXG5cdFx0cmV0dXJuIGJ0bnMubGVuZ3RoO1xyXG5cdH1cclxuXHJcblxyXG5cdGFzeW5jIHJlcXVlc3QoY3R4OnN0cmluZyx0aW1lb3V0PTYwKXtcclxuXHRcdGxldCBOMSA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcclxuXHRcdGF3YWl0IHRoaXMucGFzdGVfbXNnKGN0eCk7XHJcblx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xyXG5cdFx0YXdhaXQgdGhpcy5jbGlja19idG5fb2Zfc2VuZCgpO1xyXG5cdFx0bGV0IE4yID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHRcdFxyXG5cdFx0d2hpbGUoTjIhPU4xKzEpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xyXG5cdFx0XHROMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcdHRpbWVvdXQgPSB0aW1lb3V0LTE7XHJcblx0XHRcdGlmKHRpbWVvdXQ8MCl7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmKE4yPT1OMSsxKXtcclxuXHRcdFx0bGV0IGRvYz1hd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRcdGxldCBjaGF0cyA9IGRvYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2hhdC1jb250ZW50LWl0ZW1cIik7XHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5uYW1lfSBcdThCRjRcdTRFODZcdTcwQjlcdTRFQzBcdTRFNDhgKVxyXG5cdFx0XHRsZXQgcmVzID0gY2hhdHNbY2hhdHMubGVuZ3RoLTFdLnF1ZXJ5U2VsZWN0b3IoJy5zZWdtZW50LWNvbnRlbnQtYm94Jyk/LnRleHRDb250ZW50O1xyXG5cdFx0XHRpZihyZXM/LmNvbnRhaW5zKCdcdTVGNTNcdTUyNERcdTk1N0ZcdTY1ODdcdTY3MkNcdTVCRjlcdThCRERcdTVERjJcdThGQkUyMFx1OEY2RScpKXtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLm5ld19jaGF0KCk7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMucmVxdWVzdChjdHgpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRyZXR1cm4gcmVzO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGxldCByZXMgPSBhd2FpdCB0aGlzLmdldF9sYXN0X2NvbnRlbnQoKTtcclxuXHRcdFx0aWYocmVzPy5jb250YWlucygnXHU1RjUzXHU1MjREXHU5NTdGXHU2NTg3XHU2NzJDXHU1QkY5XHU4QkREXHU1REYyXHU4RkJFMjBcdThGNkUnKSl7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5uZXdfY2hhdCgpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLnJlcXVlc3QoY3R4KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRuZXcgTm90aWNlKGAke3RoaXMubmFtZX0gXHU0RTBEXHU4QkY0XHU4QkREYClcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG4iLCAiaW1wb3J0IHsgXHJcblx0Tm90aWNlLCBURmlsZVxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCBXZWJWaWV3TExNUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBEZWVwU2VlayB9IGZyb20gJy4vTExNL0RlZXBTZWVrJztcclxuaW1wb3J0IHsgRG91YmFvIH0gZnJvbSAnLi9MTE0vRG91YmFvJztcclxuaW1wb3J0IHsgS2ltaSB9IGZyb20gJy4vTExNL0tpbWknO1xyXG5cclxuY29uc3QgY21kX3JlZnJlc2hfbGxtcyA9IChwbHVnaW46V2ViVmlld0xMTVBsdWdpbikgPT4gKHtcclxuXHRpZDogJ2NtZF9yZWZyZXNoX2xsbXMnLFxyXG5cdG5hbWU6IHBsdWdpbi5zdHJpbmdzLmNtZF9yZWZyZXNoX2xsbXMsXHJcblx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdGxldCB2aWV3cyA9IHBsdWdpbi5iYXNld3Yudmlld3M7XHJcblx0XHRwbHVnaW4ubGxtcyA9IHBsdWdpbi5sbG1zLnNsaWNlKDAsMCk7XHJcblx0XHRmb3IobGV0IHZpZXcgb2Ygdmlld3Mpe1xyXG5cdFx0XHRpZigodmlldyBhcyBhbnkpLnVybC5zdGFydHNXaXRoKHBsdWdpbi5kZWVwc2Vlay5ob21lcGFnZSkpe1xyXG5cdFx0XHRcdGxldCBsbG0gPSBuZXcgRGVlcFNlZWsocGx1Z2luLmFwcCk7XHJcblx0XHRcdFx0bGxtLnZpZXcgPSB2aWV3O1xyXG5cdFx0XHRcdHBsdWdpbi5sbG1zLnB1c2gobGxtKTtcclxuXHRcdFx0fWVsc2UgaWYoKHZpZXcgYXMgYW55KS51cmwuc3RhcnRzV2l0aChwbHVnaW4uZG91YmFvLmhvbWVwYWdlKSl7XHJcblx0XHRcdFx0bGV0IGxsbSA9IG5ldyBEb3ViYW8ocGx1Z2luLmFwcCk7XHJcblx0XHRcdFx0bGxtLnZpZXcgPSB2aWV3O1xyXG5cdFx0XHRcdHBsdWdpbi5sbG1zLnB1c2gobGxtKTtcclxuXHRcdFx0fWVsc2UgaWYoKHZpZXcgYXMgYW55KS51cmwuc3RhcnRzV2l0aChwbHVnaW4ua2ltaS5ob21lcGFnZSkpe1xyXG5cdFx0XHRcdGxldCBsbG0gPSBuZXcgS2ltaShwbHVnaW4uYXBwKTtcclxuXHRcdFx0XHRsbG0udmlldyA9IHZpZXc7XHJcblx0XHRcdFx0cGx1Z2luLmxsbXMucHVzaChsbG0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcblxyXG5jb25zdCBjbWRfb3Blbl9uZXdfbGxtID0gKHBsdWdpbjpXZWJWaWV3TExNUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAnY21kX29wZW5fbmV3X2xsbScsXHJcblx0bmFtZTogcGx1Z2luLnN0cmluZ3MuY21kX29wZW5fbmV3X2xsbSxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0bGV0IGhwYWdlID0gYXdhaXQgcGx1Z2luLmVhc3lhcGkuZGlhbG9nX3N1Z2dlc3QoXHJcblx0XHRcdHBsdWdpbi5iYXNlbGxtcy5tYXAoeD0+eC5uYW1lKSxcclxuXHRcdFx0cGx1Z2luLmJhc2VsbG1zLm1hcCh4PT54LmhvbWVwYWdlKVxyXG5cdFx0KVxyXG5cdFx0aWYoaHBhZ2Upe1xyXG5cdFx0XHRhd2FpdCBwbHVnaW4uYmFzZXd2Lm9wZW5faG9tZXBhZ2UoaHBhZ2UsLTEpO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG5jb25zdCBjb21tYW5kQnVpbGRlcnM6QXJyYXk8RnVuY3Rpb24+ID0gW1xyXG4gICAgXHJcbl07XHJcblxyXG5jb25zdCBjb21tYW5kQnVpbGRlcnNEZXNrdG9wOkFycmF5PEZ1bmN0aW9uPiA9IFtcclxuXHRjbWRfcmVmcmVzaF9sbG1zLFxyXG5cdGNtZF9vcGVuX25ld19sbG1cclxuXTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRDb21tYW5kcyhwbHVnaW46V2ViVmlld0xMTVBsdWdpbikge1xyXG4gICAgY29tbWFuZEJ1aWxkZXJzLmZvckVhY2goKGMpID0+IHtcclxuICAgICAgICBwbHVnaW4uYWRkQ29tbWFuZChjKHBsdWdpbikpO1xyXG4gICAgfSk7XHJcblx0aWYoKHBsdWdpbi5hcHAgYXMgYW55KS5pc01vYmlsZT09ZmFsc2Upe1xyXG5cdFx0Y29tbWFuZEJ1aWxkZXJzRGVza3RvcC5mb3JFYWNoKChjKSA9PiB7XHJcblx0XHRcdHBsdWdpbi5hZGRDb21tYW5kKGMocGx1Z2luKSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7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RSxRQUFRO0FBQUEsSUFDbEM7QUFDQSxRQUFHLE9BQU07QUFDUixZQUFNLE9BQU8sT0FBTyxjQUFjLE9BQU0sRUFBRTtBQUFBLElBQzNDO0FBQUEsRUFDRDtBQUNEO0FBRUEsSUFBTSxrQkFBa0MsQ0FFeEM7QUFFQSxJQUFNLHlCQUF5QztBQUFBLEVBQzlDO0FBQUEsRUFDQTtBQUNEO0FBRU8sU0FBUyxZQUFZLFFBQXlCO0FBQ2pELGtCQUFnQixRQUFRLENBQUMsTUFBTTtBQUMzQixXQUFPLFdBQVcsRUFBRSxNQUFNLENBQUM7QUFBQSxFQUMvQixDQUFDO0FBQ0osTUFBSSxPQUFPLElBQVksWUFBVSxPQUFNO0FBQ3RDLDJCQUF1QixRQUFRLENBQUMsTUFBTTtBQUNyQyxhQUFPLFdBQVcsRUFBRSxNQUFNLENBQUM7QUFBQSxJQUM1QixDQUFDO0FBQUEsRUFDRjtBQUNEOzs7QVB2REEsSUFBcUIsbUJBQXJCLGNBQThDLHdCQUFPO0FBQUEsRUFjcEQsTUFBTSxTQUFTO0FBRWQsU0FBSyxJQUFJLFVBQVU7QUFBQSxNQUNsQixZQUFTO0FBQ1IsY0FBTSxLQUFLLFNBQVM7QUFBQSxNQUNyQjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFQSxJQUFJLFVBQVM7QUFsQ2Q7QUFtQ0UsWUFBUSxVQUFLLElBQVksUUFBUSxRQUFRLFNBQVMsTUFBMUMsbUJBQTZDO0FBQUEsRUFDdEQ7QUFBQSxFQUVBLE1BQU0sV0FBVztBQUVoQixTQUFLLFVBQVUsSUFBSSxRQUFRO0FBQzNCLFVBQU0sS0FBSyxhQUFhO0FBR3hCLFNBQUssT0FBTyxDQUFDO0FBQ2IsU0FBSyxXQUFXLElBQUksU0FBUyxLQUFLLEdBQUc7QUFDckMsU0FBSyxTQUFTLElBQUksT0FBTyxLQUFLLEdBQUc7QUFDakMsU0FBSyxPQUFPLElBQUksS0FBSyxLQUFLLEdBQUc7QUFDN0IsU0FBSyxXQUFXO0FBQUEsTUFDZixLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQUEsSUFDTjtBQUNBLFNBQUssU0FBUyxJQUFJLGNBQWMsS0FBSyxLQUFJLEVBQUU7QUFJM0MsZ0JBQVksSUFBSTtBQUFBLEVBRWpCO0FBQUEsRUFFQSxXQUFXO0FBQUEsRUFFWDtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDMUU7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNsQztBQUlEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImN0eCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIl0KfQo=
