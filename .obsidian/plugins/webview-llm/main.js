/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => WebViewLLMPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");

// src/strings.ts
var Strings = class {
  constructor() {
    let lang = window.localStorage.getItem("language");
    if (lang) {
      this.language = lang;
    } else {
      this.language = "en";
    }
  }
  get cmd_refresh_llms() {
    if (this.language == "zh") {
      return "\u5237\u65B0\u7FA4\u7EC4";
    } else {
      return "Refresh llms";
    }
  }
  get cmd_open_new_llm() {
    if (this.language == "zh") {
      return "\u6253\u5F00\u65B0AI";
    } else {
      return "Open new llm";
    }
  }
};
var strings = new Strings();

// src/setting.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  strict_mode: false,
  vaultDir: ""
};

// src/LLM/DeepSeek.ts
var import_obsidian2 = require("obsidian");

// src/LLM/BaseWebViewer.ts
var BaseWebViewer = class {
  constructor(app, homepage = "", name = "") {
    this.app = app;
    this.homepage = homepage;
    this.view = this.get_webviews(this.homepage)[0];
    this.name = name;
  }
  get allLeaves() {
    let leaves = [];
    this.app.workspace.iterateAllLeaves((x) => {
      leaves.push(x);
    });
    return leaves;
  }
  get allViews() {
    return this.allLeaves.map(
      (x) => x.view
    );
  }
  // 所有 webview 标签
  get leaves() {
    let leaves = this.allLeaves.filter(
      (x) => x.view.webview
    );
    return leaves;
  }
  // 所有 webview 视图
  get views() {
    return this.leaves.map(
      (x) => x.view
    );
  }
  get activeLeaf() {
    let leaves = this.leaves.filter(
      (x) => x.containerEl.className.contains("mod-active")
    );
    if (leaves.length != 1) {
      return null;
    } else {
      return leaves[0];
    }
  }
  get activeView() {
    let leaf = this.activeLeaf;
    if (leaf) {
      return leaf.view;
    } else {
      return null;
    }
  }
  get webviews_blank() {
    return this.get_webviews("about:blank");
  }
  get webview() {
    if (this.view) {
      return this.view.webview;
    } else {
      return null;
    }
  }
  // 获取指定标签
  get_webviews(prefix) {
    return this.views.filter(
      (x) => x.url.startsWith(prefix)
    );
  }
  async open_homepage(url = this.homepage, idx = 0) {
    let views = this.get_webviews(url);
    if (idx == -1) {
      idx = views.length;
    }
    while (views.length < idx + 1) {
      let blank = this.webviews_blank;
      if (blank.length == 0) {
        await this.app.commands.executeCommandById("webviewer:open");
        await this.delay(3e3);
        blank = this.webviews_blank;
      }
      if (blank.length == 0) {
        return null;
      }
      await blank[0].webview.setAttr("src", url);
      await this.delay(3e3);
      views = this.get_webviews(url);
      break;
    }
    if (views.length >= idx + 1) {
      return views[idx];
    } else {
      return null;
    }
  }
  async set_homepage(url = this.homepage, idx = 0) {
    this.view = await this.open_homepage(url, idx);
  }
  async source(view = this.view) {
    if (!view || !view.webview) {
      return "";
    }
    let html = await view.webview.executeJavaScript(`document.documentElement.outerHTML`);
    return html;
  }
  async document(view = this.view) {
    let html = await this.source(this.view);
    let doc = this.html_to_dom(html);
    return doc;
  }
  html_to_dom(html) {
    let parser = new DOMParser();
    let dom = parser.parseFromString(html, "text/html");
    return dom;
  }
  html_to_markdown(html) {
    let doc = this.html_to_dom(html);
    function tree(node, level = 1) {
      node.childNodes.forEach((child) => {
        tree(child, level + 1);
      });
    }
    tree(doc);
    function convertNode(node) {
      let markdown = "";
      if (node.nodeType === 1) {
        switch (node.nodeName.toLowerCase()) {
          case "h1":
          case "h2":
          case "h3":
          case "h4":
          case "h5":
          case "h6":
            let level = parseInt(node.nodeName.charAt(1), 10);
            markdown += "#".repeat(level) + " " + node.textContent.trim() + "\n\n";
            break;
          case "p":
            markdown += node.textContent.trim() + "\n\n";
            break;
          case "ul":
          case "ol":
            node.childNodes.forEach((child) => {
              if (child.nodeName.toLowerCase() === "li") {
                markdown += "- " + child.textContent.trim() + "\n";
              }
            });
            markdown += "\n";
            break;
          case "a":
            markdown += `[${node.textContent.trim()}](${node.getAttribute("href")})`;
            break;
          case "img":
            markdown += `![${node.getAttribute("alt") || "Image"}](${node.getAttribute("src")})`;
            break;
          case "strong":
          case "b":
            markdown += `**${node.textContent.trim()}**`;
            break;
          case "em":
          case "i":
            markdown += `*${node.textContent.trim()}*`;
            break;
          case "blockquote":
            markdown += "> " + node.textContent.trim() + "\n\n";
            break;
          case "pre":
            if (node.firstChild && node.firstChild.nodeName.toLowerCase() === "code") {
              let code = node.firstChild.textContent.trim();
              markdown += "```\n" + code + "\n```\n\n";
            }
            break;
          case "code":
            markdown += "`" + node.textContent + "`";
            break;
          case "#text":
            markdown += node.textContent.trim();
            break;
          default:
            node.childNodes.forEach((child) => {
              markdown += convertNode(child);
            });
        }
      } else if (node.nodeType === 3) {
        markdown += node.textContent.trim();
      }
      return markdown;
    }
    let md = convertNode(doc.body);
    return md;
  }
  async delay(ms) {
    return new Promise((resolve) => {
      setTimeout(resolve, ms);
    });
  }
  setActiveLeaf(view = this.view) {
    if (!view) {
      return;
    }
    ;
    let leaf = this.allLeaves.filter((x) => x.view == view)[0];
    if (!leaf) {
      return;
    }
    ;
    this.app.workspace.setActiveLeaf(leaf);
  }
  get_safe_ctx(ctx) {
    let safeCtx = JSON.stringify(ctx.replace(/`/g, "~").replace(/\$/g, "\uFFE5"));
    return safeCtx;
  }
};

// src/LLM/DeepSeek.ts
var DeepSeek = class extends BaseWebViewer {
  constructor(app, homepage = "https://chat.deepseek.com") {
    super(app, homepage, "DeepSeek");
  }
  async click_btn_of_send() {
    let view = this.view;
    let msg = await this.view.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('div[role="button"]:not(.ds-button)');
				let ariaDisabled = button.getAttribute('aria-disabled');
				while(!ariaDisabled || ariaDisabled == 'false'){
					button.click();
					await delay(100);
					button = document.querySelector('div[role="button"]:not(.ds-button)');
					ariaDisabled =  button.getAttribute('aria-disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					let item = document.querySelector('textarea[id="chat-input"]');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.querySelector('div[role="button"]:not(.ds-button)');
						let ariaDisabled = button.getAttribute('aria-disabled');
						if (!ariaDisabled || ariaDisabled == 'false') {
							console.log('\u590D\u5236\u6210\u529F');
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".ds-markdown");
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let btns = document.querySelectorAll('.ds-flex>.ds-flex >.ds-icon-button:nth-child(4)');
				let N = parseInt(btns.length);
				return N;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async number_of_contents() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items.length;
  }
  async request(ctx, timeout = 60) {
    this.setActiveLeaf();
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    let N2 = await this.number_of_receive_msg();
    await this.click_btn_of_send();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let ctx2 = await this.get_last_response();
      new import_obsidian2.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return ctx2;
    } else {
      new import_obsidian2.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      return null;
    }
  }
};

// src/LLM/Doubao.ts
var import_obsidian3 = require("obsidian");
var Doubao = class extends BaseWebViewer {
  constructor(app, homepage = "https://www.doubao.com") {
    super(app, homepage, "\u8C46\u5305");
  }
  async click_btn_of_send() {
    let msg = await this.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.getElementById('flow-end-msg-send');
				let ariaDisabled = button.getAttribute('aria-disabled');
				while(ariaDisabled=='false'){
					button.click();
					await delay(100);
					button = document.getElementById('flow-end-msg-send');
					ariaDisabled = button.getAttribute('aria-disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					console.log('hrer',document)
					let item = document.querySelector('textarea[data-testid="chat_input_input"]');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.getElementById('flow-end-msg-send');
						let ariaDisabled = button.getAttribute('aria-disabled');
						if (ariaDisabled == 'false') {
							console.log('\u590D\u5236\u6210\u529F');
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll('div[data-testid="receive_message"]');
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let items = document.querySelectorAll('div[data-testid="receive_message"]');
				if(items.length==0){
					return 0;
				}
				item = items[items.length-1]
				if(item.querySelectorAll('button[data-testid="message_action_like"]').length==0){
					msg = items.length-1;
				}else{
					msg = items.length;
				}
				return msg;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async copy_last_content() {
    let msg = await this.webview.executeJavaScript(
      `
			btns = document.querySelectorAll('.segment-actions-content-btn');
			btns = Array.from(btns).filter(x=>x.textContent=='\u590D\u5236');
			if(btns.length>0){
				btns[btns.length-1].click();
				msg = true;
			}else{
				msg = false;
			}
			`
    );
    return msg;
  }
  async number_of_contents() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items.length;
  }
  async get_last_content() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items[items.length - 1].textContent;
  }
  async request(ctx, timeout = 60) {
    let view = this.view;
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let doc = await this.document();
      let items = doc.querySelectorAll(".message-content");
      N2 = await this.number_of_contents();
      new import_obsidian3.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return items[N2 - 1].textContent;
    } else {
      new import_obsidian3.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      console.log("Doubao N:", N1, N2);
      return null;
    }
  }
};

// src/LLM/Kimi.ts
var import_obsidian4 = require("obsidian");
var Kimi = class extends BaseWebViewer {
  constructor(app, homepage = "https://kimi.moonshot.cn/") {
    super(app, homepage, "Kimi");
  }
  async new_chat() {
    let msg = await this.view.webview.executeJavaScript(
      `
			document.querySelector('.new-chat-btn').click()
			`
    );
    return msg;
  }
  async click_btn_of_send() {
    let msg = await this.view.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('.send-button');
				let ariaDisabled = button.parentElement.classList.contains('disabled');
				while(!ariaDisabled){
					button.click();
					await delay(100);
					button = document.querySelector('.send-button');
					ariaDisabled = button.parentElement.classList.contains('disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					let item = document.querySelector('.chat-input-editor-container').querySelector('.chat-input-editor');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.querySelector('.send-button');;
						let ariaDisabled = button.parentElement.classList.contains('disabled');
						if (ariaDisabled == false) {
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".markdown-container");
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_copy_btns() {
    let doc = await this.document();
    let btns = doc.querySelectorAll('svg[name="Like"]');
    return btns.length;
  }
  async copy_last_content() {
    let msg = await this.webview.executeJavaScript(
      `
			btns = document.querySelectorAll('.segment-actions-content-btn');
			btns = Array.from(btns).filter(x=>x.textContent=='\u590D\u5236');
			if(btns.length>0){
				btns[btns.length-1].click();
				msg = true;
			}else{
				msg = false;
			}
			`
    );
    return msg;
  }
  async get_last_content() {
    var _a;
    let doc = await this.document();
    let chats = doc.getElementsByClassName("chat-content-item");
    return (_a = chats[chats.length - 1].querySelector(".segment-content-box")) == null ? void 0 : _a.textContent;
  }
  async number_of_receive_msg() {
    let doc = await this.document();
    let btns = doc.querySelectorAll('svg[name="Like"]');
    return btns.length;
  }
  async request(ctx, timeout = 60) {
    var _a;
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let doc = await this.document();
      let chats = doc.getElementsByClassName("chat-content-item");
      new import_obsidian4.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      let res = (_a = chats[chats.length - 1].querySelector(".segment-content-box")) == null ? void 0 : _a.textContent;
      if (res == null ? void 0 : res.contains("\u5F53\u524D\u957F\u6587\u672C\u5BF9\u8BDD\u5DF2\u8FBE20\u8F6E")) {
        await this.new_chat();
        return this.request(ctx);
      } else {
        return res;
      }
    } else {
      let res = await this.get_last_content();
      if (res == null ? void 0 : res.contains("\u5F53\u524D\u957F\u6587\u672C\u5BF9\u8BDD\u5DF2\u8FBE20\u8F6E")) {
        await this.new_chat();
        return this.request(ctx);
      }
      new import_obsidian4.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      return null;
    }
  }
};

// src/commands.ts
var cmd_refresh_llms = (plugin) => ({
  id: "cmd_refresh_llms",
  name: plugin.strings.cmd_refresh_llms,
  callback: async () => {
    let views = plugin.basewv.views;
    plugin.llms = plugin.llms.slice(0, 0);
    for (let view of views) {
      if (view.url.startsWith(plugin.deepseek.homepage)) {
        let llm = new DeepSeek(plugin.app);
        llm.view = view;
        plugin.llms.push(llm);
      } else if (view.url.startsWith(plugin.doubao.homepage)) {
        let llm = new Doubao(plugin.app);
        llm.view = view;
        plugin.llms.push(llm);
      } else if (view.url.startsWith(plugin.kimi.homepage)) {
        let llm = new Kimi(plugin.app);
        llm.view = view;
        plugin.llms.push(llm);
      }
    }
  }
});
var cmd_open_new_llm = (plugin) => ({
  id: "cmd_open_new_llm",
  name: plugin.strings.cmd_open_new_llm,
  callback: async () => {
    let hpage = await plugin.easyapi.dialog_suggest(
      plugin.basellms.map((x) => x.name),
      plugin.basellms.map((x) => x.homepage)
    );
    if (hpage) {
      await plugin.basewv.open_homepage(hpage, -1);
    }
  }
});
var commandBuilders = [];
var commandBuildersDesktop = [
  cmd_refresh_llms,
  cmd_open_new_llm
];
function addCommands(plugin) {
  commandBuilders.forEach((c) => {
    plugin.addCommand(c(plugin));
  });
  if (plugin.app.isMobile == false) {
    commandBuildersDesktop.forEach((c) => {
      plugin.addCommand(c(plugin));
    });
  }
}

// src/LLM/Yuanbao.ts
var import_obsidian5 = require("obsidian");
var Yuanbao = class extends BaseWebViewer {
  constructor(app, homepage = "https://yuanbao.tencent.com/chat") {
    super(app, homepage, "\u5143\u5B9D");
  }
  async new_chat() {
    let msg = await this.view.webview.executeJavaScript(
      `
			document.querySelector('.yb-common-nav__new-chat').click()
			`
    );
    return msg;
  }
  async click_btn_of_send() {
    let msg = await this.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('a[class^="style__send-btn"]');
				while(!button){
					await delay(100);
					button = document.querySelector('a[class^="style__send-btn"]');
				}
				button.click();
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					
					let item = document.querySelector('.chat-input-editor  .ql-editor.ql-blank');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let item = document.querySelector('.chat-input-editor').querySelector('.ql-editor.ql-blank')
						if(item){
							await delay(100);
						}else{
							break;
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let btns = document.querySelectorAll('.agent-chat__toolbar > .agent-chat__toolbar__right > .agent-chat__toolbar__item:nth-child(5)');
				let N = parseInt(btns.length);
				return N;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async number_of_contents() {
    let doc = await this.document();
    let items = Array.from(doc.querySelectorAll(".hyc-content-md .hyc-common-markdown")).filter(
      (el) => {
        var _a, _b;
        return !((_b = (_a = el.parentElement) == null ? void 0 : _a.parentElement) == null ? void 0 : _b.classList.contains("hyc-component-reasoner__think-content"));
      }
    );
    return items.length;
  }
  async get_last_content() {
    let doc = await this.document();
    let items = Array.from(doc.querySelectorAll(".hyc-content-md .hyc-common-markdown")).filter(
      (el) => {
        var _a, _b;
        return !((_b = (_a = el.parentElement) == null ? void 0 : _a.parentElement) == null ? void 0 : _b.classList.contains("hyc-component-reasoner__think-content"));
      }
    );
    let ctx = this.html_to_markdown(items[items.length - 1].outerHTML);
    return ctx;
  }
  async request(ctx, timeout = 60) {
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let ctx2 = await this.get_last_content();
      new import_obsidian5.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return ctx2;
    } else {
      new import_obsidian5.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      console.log("Doubao N:", N1, N2);
      return null;
    }
  }
};

// main.ts
var WebViewLLMPlugin = class extends import_obsidian6.Plugin {
  async onload() {
    this.app.workspace.onLayoutReady(
      async () => {
        await this._onload_();
      }
    );
  }
  get easyapi() {
    var _a;
    return (_a = this.app.plugins.plugins["easyapi"]) == null ? void 0 : _a.api;
  }
  async _onload_() {
    this.strings = new Strings();
    await this.loadSettings();
    this.llms = [];
    this.deepseek = new DeepSeek(this.app);
    this.doubao = new Doubao(this.app);
    this.kimi = new Kimi(this.app);
    this.yuanbao = new Yuanbao(this.app);
    this.basellms = [
      this.kimi,
      this.doubao,
      this.deepseek,
      this.yuanbao
    ];
    this.basewv = new BaseWebViewer(this.app, "");
    addCommands(this);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvc3RyaW5ncy50cyIsICJzcmMvc2V0dGluZy50cyIsICJzcmMvTExNL0RlZXBTZWVrLnRzIiwgInNyYy9MTE0vQmFzZVdlYlZpZXdlci50cyIsICJzcmMvTExNL0RvdWJhby50cyIsICJzcmMvTExNL0tpbWkudHMiLCAic3JjL2NvbW1hbmRzLnRzIiwgInNyYy9MTE0vWXVhbmJhby50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBTdHJpbmdzIH0gZnJvbSAnc3JjL3N0cmluZ3MnO1xyXG5pbXBvcnQge015U2V0dGluZ3MsV2ViVmlld0xMTVNldHRpbmdUYWIsREVGQVVMVF9TRVRUSU5HU30gZnJvbSAnc3JjL3NldHRpbmcnXHJcblxyXG5pbXBvcnQge0RlZXBTZWVrfSBmcm9tICdzcmMvTExNL0RlZXBTZWVrJ1xyXG5pbXBvcnQge0RvdWJhb30gZnJvbSAnc3JjL0xMTS9Eb3ViYW8nXHJcbmltcG9ydCB7S2ltaX0gZnJvbSAnc3JjL0xMTS9LaW1pJ1xyXG5pbXBvcnQge0Jhc2VXZWJWaWV3ZXJ9IGZyb20gJ3NyYy9MTE0vQmFzZVdlYlZpZXdlcidcclxuaW1wb3J0IHsgYWRkQ29tbWFuZHMgfSBmcm9tICdzcmMvY29tbWFuZHMnO1xyXG5pbXBvcnQgeyBZdWFuYmFvIH0gZnJvbSAnc3JjL0xMTS9ZdWFuYmFvJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYlZpZXdMTE1QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHN0cmluZ3MgOiBTdHJpbmdzO1xyXG5cdHNldHRpbmdzOiBNeVNldHRpbmdzO1xyXG5cdHlhbWw6IHN0cmluZztcclxuXHRkaWFsb2dfc3VnZ2VzdDogRnVuY3Rpb25cclxuXHRkaWFsb2dfcHJvbXB0OiBGdW5jdGlvblxyXG5cclxuXHRsbG1zOiBBcnJheTxCYXNlV2ViVmlld2VyPjtcclxuXHRiYXNlbGxtczogQXJyYXk8QmFzZVdlYlZpZXdlcj47XHJcblxyXG5cdGJhc2V3djogQmFzZVdlYlZpZXdlcjtcclxuXHRkZWVwc2VlazogRGVlcFNlZWs7XHJcblx0ZG91YmFvOiBEb3ViYW87XHJcblx0a2ltaTogS2ltaTtcclxuXHR5dWFuYmFvOiBZdWFuYmFvXHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdFxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoXHJcblx0XHRcdGFzeW5jKCk9PntcclxuXHRcdFx0XHRhd2FpdCB0aGlzLl9vbmxvYWRfKClcclxuXHRcdFx0fVxyXG5cdFx0KVxyXG5cdH1cclxuXHJcblx0Z2V0IGVhc3lhcGkoKXtcclxuXHRcdHJldHVybiAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zLnBsdWdpbnNbJ2Vhc3lhcGknXT8uYXBpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgX29ubG9hZF8oKSB7XHJcblx0XHQvLyBcdTUyMURcdTU5Q0JcdTU5Q0JcdTUzMTZcdUZGMENcdTUyQTBcdThGN0RcdTRFMkRcdTgyRjFcdTY1ODdcdTU0OENcdTUzQzJcdTY1NzBcclxuXHRcdHRoaXMuc3RyaW5ncyA9IG5ldyBTdHJpbmdzKCk7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHJcblx0XHR0aGlzLmxsbXMgPSBbXTtcclxuXHRcdHRoaXMuZGVlcHNlZWsgPSBuZXcgRGVlcFNlZWsodGhpcy5hcHApO1xyXG5cdFx0dGhpcy5kb3ViYW8gPSBuZXcgRG91YmFvKHRoaXMuYXBwKTtcclxuXHRcdHRoaXMua2ltaSA9IG5ldyBLaW1pKHRoaXMuYXBwKTtcclxuXHRcdHRoaXMueXVhbmJhbyA9IG5ldyBZdWFuYmFvKHRoaXMuYXBwKTtcclxuXHRcdHRoaXMuYmFzZWxsbXMgPSBbXHJcblx0XHRcdHRoaXMua2ltaSxcclxuXHRcdFx0dGhpcy5kb3ViYW8sXHJcblx0XHRcdHRoaXMuZGVlcHNlZWssXHJcblx0XHRcdHRoaXMueXVhbmJhbyxcclxuXHRcdF1cclxuXHRcdHRoaXMuYmFzZXd2ID0gbmV3IEJhc2VXZWJWaWV3ZXIodGhpcy5hcHAsJycpO1xyXG5cclxuXHRcdFxyXG5cdFx0Ly8gXHU2REZCXHU1MkEwXHU1NDdEXHU0RUU0XHJcblx0XHRhZGRDb21tYW5kcyh0aGlzKTtcclxuXHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdFxyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblxyXG5cclxufVxyXG4iLCAiXHJcbmV4cG9ydCBjbGFzcyBTdHJpbmdze1xyXG4gICAgbGFuZ3VhZ2U6c3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBsZXQgbGFuZyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2UnKTtcclxuICAgICAgICBpZihsYW5nKXtcclxuICAgICAgICAgICAgdGhpcy5sYW5ndWFnZSA9IGxhbmc7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMubGFuZ3VhZ2UgPSAnZW4nO1xyXG4gICAgICAgIH1cclxuXHR9XHJcblxyXG4gICAgZ2V0IGNtZF9yZWZyZXNoX2xsbXMoKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdTUyMzdcdTY1QjBcdTdGQTRcdTdFQzQnXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnUmVmcmVzaCBsbG1zJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNtZF9vcGVuX25ld19sbG0oKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdTYyNTNcdTVGMDBcdTY1QjBBSSdcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdPcGVuIG5ldyBsbG0nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGxldCBzdHJpbmdzID0gbmV3IFN0cmluZ3MoKTsiLCAiaW1wb3J0IHsgXHJcblx0QXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLFBsdWdpblxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCBXZWJWaWV3TExNUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNeVNldHRpbmdzIHtcclxuXHRzdHJpY3RfbW9kZTogYm9vbGVhbjtcclxuXHR2YXVsdERpcjpzdHJpbmc7XHJcblx0ZGVlcHNlZWtGb2xkZXI6IHN0cmluZztcclxuXHRkb3ViYW9Gb2xkZXI6IHN0cmluZztcclxuXHRraW1pRm9sZGVyOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVNldHRpbmdzID0ge1xyXG5cdHN0cmljdF9tb2RlOmZhbHNlLFxyXG5cdHZhdWx0RGlyOicnXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXZWJWaWV3TExNU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogV2ViVmlld0xMTVBsdWdpbjtcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBXZWJWaWV3TExNUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGdldFNldHRpbmdWYWx1ZShmaWVsZDoga2V5b2YgTXlTZXR0aW5ncykge1xyXG5cdFx0cmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzW2ZpZWxkXTtcclxuXHR9XHJcblxyXG5cdGFkZF90b2dnbGUobmFtZTpzdHJpbmcsZGVzYzpzdHJpbmcsZmllbGQ6a2V5b2YgTXlTZXR0aW5ncyl7XHJcblx0XHRsZXQge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblx0XHRsZXQgdmFsdWUgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgYW55KVtmaWVsZF0gYXMgYm9vbGVhbjtcclxuXHRcdGxldCBpdGVtID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpICBcclxuXHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0LnNldERlc2MoZGVzYylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodmFsdWUpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTpuZXZlcikgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NbZmllbGRdID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0cmV0dXJuIGl0ZW07XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUodGhpcy5wbHVnaW4uc3RyaW5ncy5zZXR0aW5nX3ZhdWx0X2RpcilcclxuXHRcdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudmF1bHREaXIpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnZhdWx0RGlyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHR0aGlzLmFkZF90b2dnbGUoXHJcblx0XHRcdHRoaXMucGx1Z2luLnN0cmluZ3Muc2V0dGluZ19zdHJpY3RfbW9kZSxcclxuXHRcdFx0dGhpcy5wbHVnaW4uc3RyaW5ncy5zZXR0aW5nX3N0cmljdF9tb2RlX2Rlc2MsXHJcblx0XHRcdCdzdHJpY3RfbW9kZSdcclxuXHRcdCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBCYXNlV2ViVmlld2VyIH0gZnJvbSAnLi9CYXNlV2ViVmlld2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEZWVwU2VlayBleHRlbmRzIEJhc2VXZWJWaWV3ZXIge1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLGhvbWVwYWdlPSdodHRwczovL2NoYXQuZGVlcHNlZWsuY29tJykge1xyXG5cdFx0c3VwZXIoYXBwLCBob21lcGFnZSwnRGVlcFNlZWsnKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNsaWNrX2J0bl9vZl9zZW5kKCkge1xyXG5cdFx0bGV0IHZpZXcgPSB0aGlzLnZpZXc7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgKHRoaXMudmlldyBhcyBhbnkpLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRhc3luYyBmdW5jdGlvbiBjbGljaygpe1xyXG5cdFx0XHRcdGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbcm9sZT1cImJ1dHRvblwiXTpub3QoLmRzLWJ1dHRvbiknKTtcclxuXHRcdFx0XHRsZXQgYXJpYURpc2FibGVkID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHRcdHdoaWxlKCFhcmlhRGlzYWJsZWQgfHwgYXJpYURpc2FibGVkID09ICdmYWxzZScpe1xyXG5cdFx0XHRcdFx0YnV0dG9uLmNsaWNrKCk7XHJcblx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0YnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3JvbGU9XCJidXR0b25cIl06bm90KC5kcy1idXR0b24pJyk7XHJcblx0XHRcdFx0XHRhcmlhRGlzYWJsZWQgPSAgYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRjbGljaygpO1xyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgcGFzdGVfbXNnKGN0eDpzdHJpbmcpIHtcclxuXHRcdGxldCBtc2c7XHJcblx0XHRjdHggPSB0aGlzLmdldF9zYWZlX2N0eChjdHgpO1xyXG5cdFx0Y29uc3QgbWF4UmV0cmllcyA9IDE7IC8vIFx1NjcwMFx1NTkyN1x1OTFDRFx1OEJENVx1NkIyMVx1NjU3MFxyXG5cdFx0Zm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcclxuXHRcdFx0bXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRcdGBcclxuXHRcdFx0XHRmdW5jdGlvbiBkZWxheShtcykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1NUMwNlx1NUYwMlx1NkI2NVx1OTAzQlx1OEY5MVx1NUMwMVx1ODhDNVx1NTIzMFx1NEUwMFx1NEUyQSBhc3luYyBcdTUxRkRcdTY1NzBcdTRFMkRcclxuXHRcdFx0XHRhc3luYyBmdW5jdGlvbiBpbnNlcnRUZXh0QW5kU2VuZChjdHgpIHtcclxuXHRcdFx0XHRcdC8vIFx1ODNCN1x1NTNENiB0ZXh0YXJlYSBcdTVFNzZcdTgwNUFcdTcxMjZcclxuXHRcdFx0XHRcdGxldCBpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWFbaWQ9XCJjaGF0LWlucHV0XCJdJyk7XHJcblx0XHRcdFx0XHRpdGVtLmZvY3VzKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gXHU2M0QyXHU1MTY1XHU2NTg3XHU2NzJDXHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFRleHQnLCBmYWxzZSwgY3R4KTtcclxuXHRcdFx0XHRcdH0sIDEwMDApO1xyXG5cdFx0XHRcdFx0bGV0IGkgPSAxMDA7XHJcblx0XHRcdFx0XHQvLyBcdTdCNDlcdTVGODVcdTYzMDlcdTk0QUVcdTUzRUZcdTcwQjlcdTUxRkJcclxuXHRcdFx0XHRcdHdoaWxlICh0cnVlKSB7XHJcblx0XHRcdFx0XHRcdGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbcm9sZT1cImJ1dHRvblwiXTpub3QoLmRzLWJ1dHRvbiknKTtcclxuXHRcdFx0XHRcdFx0bGV0IGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnKTtcclxuXHRcdFx0XHRcdFx0aWYgKCFhcmlhRGlzYWJsZWQgfHwgYXJpYURpc2FibGVkID09ICdmYWxzZScpIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnXHU1OTBEXHU1MjM2XHU2MjEwXHU1MjlGJyk7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpID0gaS0xO1xyXG5cdFx0XHRcdFx0XHRpZihpPDApe2JyZWFrfVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU4QzAzXHU3NTI4IGFzeW5jIFx1NTFGRFx1NjU3MFxyXG5cdFx0XHRcdGluc2VydFRleHRBbmRTZW5kKFxcYCR7Y3R4fVxcYCk7XHJcblx0XHRcdFx0YFxyXG5cdFx0XHQpO1xyXG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTYyMTBcdTUyOUZcdTdDOThcdThEMzRcclxuXHRcdFx0aWYgKG1zZykge1xyXG5cdFx0XHRcdGJyZWFrOyAvLyBcdTU5ODJcdTY3OUNcdTYyMTBcdTUyOUZcdUZGMENcdTkwMDBcdTUxRkFcdTkxQ0RcdThCRDVcdTVGQUFcdTczQUZcclxuXHRcdFx0fVxyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApOyAvLyBcdTdCNDlcdTVGODVcdTRFMDBcdTZCQjVcdTY1RjZcdTk1RjRcdTU0MEVcdTkxQ0RcdThCRDVcclxuXHRcdH1cclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXRfbGFzdF9yZXNwb25zZSgpIHtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgaXRlbXMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLmRzLW1hcmtkb3duJyk7XHJcblx0XHRpZihpdGVtcy5sZW5ndGg8MSl7cmV0dXJuIG51bGx9XHJcblx0XHRcclxuXHRcdGxldCBpdGVtID0gaXRlbXNbaXRlbXMubGVuZ3RoLTFdXHJcblx0XHRsZXQgY3R4ID0gdGhpcy5odG1sX3RvX21hcmtkb3duKGl0ZW0ub3V0ZXJIVE1MKTtcclxuXHRcdHJldHVybiBjdHg7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKSB7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIG51bWJlcl9vZl9yZWNlaXZlX21zZygpe1xyXG5cdFx0XHRcdGxldCBidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRzLWZsZXg+LmRzLWZsZXggPi5kcy1pY29uLWJ1dHRvbjpudGgtY2hpbGQoNCknKTtcclxuXHRcdFx0XHRsZXQgTiA9IHBhcnNlSW50KGJ0bnMubGVuZ3RoKTtcclxuXHRcdFx0XHRyZXR1cm4gTjtcclxuXHRcdFx0fVxyXG5cdFx0XHRudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbnVtYmVyX29mX2NvbnRlbnRzKCkge1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcubWVzc2FnZS1jb250ZW50JylcclxuXHRcdHJldHVybiBpdGVtcy5sZW5ndGg7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZXF1ZXN0KGN0eDpzdHJpbmcsdGltZW91dD02MCkge1xyXG5cdFx0dGhpcy5zZXRBY3RpdmVMZWFmKCk7XHJcblx0XHRsZXQgTjEgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMucGFzdGVfbXNnKGN0eCk7XHJcblx0XHRsZXQgTjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHJcblx0XHRhd2FpdCB0aGlzLmNsaWNrX2J0bl9vZl9zZW5kKCk7XHJcblxyXG5cdFx0d2hpbGUoTjIhPU4xKzEpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xyXG5cdFx0XHROMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcdHRpbWVvdXQgPSB0aW1lb3V0LTE7XHJcblx0XHRcdGlmKHRpbWVvdXQ8MCl7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmKE4yPT1OMSsxKXtcclxuXHRcdFx0bGV0IGN0eCA9IGF3YWl0IHRoaXMuZ2V0X2xhc3RfcmVzcG9uc2UoKTtcclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1OEJGNFx1NEU4Nlx1NzBCOVx1NEVDMFx1NEU0OGApXHJcblx0XHRcdHJldHVybiBjdHg7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1NEUwRFx1OEJGNFx1OEJERGApXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiXHJcbmltcG9ydCB7IEFwcCwgVmlldywgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEJhc2VXZWJWaWV3ZXIge1xyXG4gICAgYXBwOiBBcHA7XHJcbiAgICBob21lcGFnZTogYW55O1xyXG4gICAgdmlldzogVmlldyB8IG51bGw7IC8vIERlY2xhcmUgdGhlIHR5cGUgb2Ygdmlld1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBob21lcGFnZTogc3RyaW5nID0gJycsIG5hbWU6c3RyaW5nPScnKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5ob21lcGFnZSA9IGhvbWVwYWdlO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHRoaXMuZ2V0X3dlYnZpZXdzKHRoaXMuaG9tZXBhZ2UpWzBdO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFsbExlYXZlcygpIHtcclxuICAgICAgICBsZXQgbGVhdmVzOiBBcnJheTxXb3Jrc3BhY2VMZWFmPiA9IFtdO1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKHggPT4ge1xyXG4gICAgICAgICAgICBsZWF2ZXMucHVzaCh4KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbGVhdmVzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhbGxWaWV3cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hbGxMZWF2ZXMubWFwKFxyXG4gICAgICAgICAgICB4ID0+IHgudmlld1xyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTYyNDBcdTY3MDkgd2VidmlldyBcdTY4MDdcdTdCN0VcclxuICAgIGdldCBsZWF2ZXMoKSB7XHJcbiAgICAgICAgbGV0IGxlYXZlcyA9IHRoaXMuYWxsTGVhdmVzLmZpbHRlcihcclxuICAgICAgICAgICAgeCA9PiAoeC52aWV3IGFzIGFueSkud2Vidmlld1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGxlYXZlcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTYyNDBcdTY3MDkgd2VidmlldyBcdTg5QzZcdTU2RkVcclxuICAgIGdldCB2aWV3cygpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlYXZlcy5tYXAoXHJcbiAgICAgICAgICAgIHggPT4geC52aWV3XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgYWN0aXZlTGVhZigpe1xyXG4gICAgICAgIGxldCBsZWF2ZXMgPSB0aGlzLmxlYXZlcy5maWx0ZXIoXHJcbiAgICAgICAgICAgIHggPT4gKHggYXMgYW55KS5jb250YWluZXJFbC5jbGFzc05hbWUuY29udGFpbnMoJ21vZC1hY3RpdmUnKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYobGVhdmVzLmxlbmd0aCE9MSl7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gbGVhdmVzWzBdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWN0aXZlVmlldygpe1xyXG4gICAgICAgIGxldCBsZWFmID0gdGhpcy5hY3RpdmVMZWFmO1xyXG4gICAgICAgIGlmKGxlYWYpe1xyXG4gICAgICAgICAgICByZXR1cm4gbGVhZi52aWV3O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHdlYnZpZXdzX2JsYW5rKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldF93ZWJ2aWV3cygnYWJvdXQ6YmxhbmsnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgd2Vidmlldygpe1xyXG4gICAgICAgIGlmKHRoaXMudmlldyl7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy52aWV3IGFzIGFueSkud2VidmlldztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1ODNCN1x1NTNENlx1NjMwN1x1NUI5QVx1NjgwN1x1N0I3RVxyXG4gICAgZ2V0X3dlYnZpZXdzKHByZWZpeDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld3MuZmlsdGVyKFxyXG4gICAgICAgICAgICAoeDogYW55KSA9PiB4LnVybC5zdGFydHNXaXRoKHByZWZpeClcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb3Blbl9ob21lcGFnZSh1cmwgPSB0aGlzLmhvbWVwYWdlLCBpZHggPSAwKSB7XHJcbiAgICAgICAgbGV0IHZpZXdzID0gdGhpcy5nZXRfd2Vidmlld3ModXJsKTtcclxuICAgICAgICBpZihpZHg9PS0xKXtcclxuICAgICAgICAgICAgaWR4ID0gdmlld3MubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAodmlld3MubGVuZ3RoIDwgaWR4ICsgMSkge1xyXG4gICAgICAgICAgICBsZXQgYmxhbmsgPSB0aGlzLndlYnZpZXdzX2JsYW5rO1xyXG4gICAgICAgICAgICBpZiAoYmxhbmsubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0ICh0aGlzLmFwcCBhcyBhbnkpLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZCgnd2Vidmlld2VyOm9wZW4nKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsYXkoMzAwMCk7XHJcbiAgICAgICAgICAgICAgICBibGFuayA9IHRoaXMud2Vidmlld3NfYmxhbms7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJsYW5rLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCAoYmxhbmtbMF0gYXMgYW55KS53ZWJ2aWV3LnNldEF0dHIoJ3NyYycsIHVybCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsYXkoMzAwMCk7XHJcbiAgICAgICAgICAgIHZpZXdzID0gdGhpcy5nZXRfd2Vidmlld3ModXJsKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2aWV3cy5sZW5ndGggPj0gaWR4ICsgMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmlld3NbaWR4XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFzeW5jIHNldF9ob21lcGFnZSh1cmwgPSB0aGlzLmhvbWVwYWdlLCBpZHggPSAwKSB7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gYXdhaXQgdGhpcy5vcGVuX2hvbWVwYWdlKHVybCwgaWR4KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzb3VyY2UodmlldyA9IHRoaXMudmlldykge1xyXG4gICAgICAgIGlmICghdmlldyB8fCAhKHZpZXcgYXMgYW55KS53ZWJ2aWV3KSB7IHJldHVybiAnJzsgfVxyXG4gICAgICAgIGxldCBodG1sID0gYXdhaXQgKHZpZXcgYXMgYW55KS53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KGBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MYCk7XHJcbiAgICAgICAgcmV0dXJuIGh0bWw7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZG9jdW1lbnQodmlldyA9IHRoaXMudmlldykge1xyXG4gICAgICAgIGxldCBodG1sID0gYXdhaXQgdGhpcy5zb3VyY2UodGhpcy52aWV3KTtcclxuICAgICAgICBsZXQgZG9jID0gdGhpcy5odG1sX3RvX2RvbShodG1sKTtcclxuICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgfVxyXG5cclxuICAgIGh0bWxfdG9fZG9tKGh0bWw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XHJcbiAgICAgICAgbGV0IGRvbSA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoaHRtbCwgXCJ0ZXh0L2h0bWxcIik7XHJcbiAgICAgICAgcmV0dXJuIGRvbTtcclxuICAgIH1cclxuXHJcbiAgICBodG1sX3RvX21hcmtkb3duKGh0bWw6c3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGRvYyA9IHRoaXMuaHRtbF90b19kb20oaHRtbCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHRyZWUobm9kZTphbnksIGxldmVsID0gMSkge1xyXG4gICAgICAgICAgICBub2RlLmNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGQ6YW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cmVlKGNoaWxkLCBsZXZlbCArIDEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJlZShkb2MpXHJcbiAgICAgICAgZnVuY3Rpb24gY29udmVydE5vZGUobm9kZTphbnkpIHtcclxuICAgICAgICAgICAgbGV0IG1hcmtkb3duID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAxKSB7IC8vIE5vZGUuRUxFTUVOVF9OT0RFXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJoMVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJoMlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJoM1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJoNFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJoNVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJoNlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGV2ZWwgPSBwYXJzZUludChub2RlLm5vZGVOYW1lLmNoYXJBdCgxKSwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBcIiNcIi5yZXBlYXQobGV2ZWwpICsgXCIgXCIgKyBub2RlLnRleHRDb250ZW50LnRyaW0oKSArIFwiXFxuXFxuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBub2RlLnRleHRDb250ZW50LnRyaW0oKSArIFwiXFxuXFxuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidWxcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib2xcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkOmFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwibGlcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IFwiLSBcIiArIGNoaWxkLnRleHRDb250ZW50LnRyaW0oKSArIFwiXFxuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBcIlxcblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gYFske25vZGUudGV4dENvbnRlbnQudHJpbSgpfV0oJHtub2RlLmdldEF0dHJpYnV0ZShcImhyZWZcIil9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW1nXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IGAhWyR7bm9kZS5nZXRBdHRyaWJ1dGUoXCJhbHRcIikgfHwgXCJJbWFnZVwifV0oJHtub2RlLmdldEF0dHJpYnV0ZShcInNyY1wiKX0pYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJvbmdcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBgKioke25vZGUudGV4dENvbnRlbnQudHJpbSgpfSoqYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IGAqJHtub2RlLnRleHRDb250ZW50LnRyaW0oKX0qYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJibG9ja3F1b3RlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IFwiPiBcIiArIG5vZGUudGV4dENvbnRlbnQudHJpbSgpICsgXCJcXG5cXG5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwcmVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuZmlyc3RDaGlsZCAmJiBub2RlLmZpcnN0Q2hpbGQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJjb2RlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2RlID0gbm9kZS5maXJzdENoaWxkLnRleHRDb250ZW50LnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IFwiYGBgXCIgKyBcIlxcblwiICsgY29kZSArIFwiXFxuXCIgKyBcImBgYFwiICsgXCJcXG5cXG5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29kZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IFwiYFwiICsgbm9kZS50ZXh0Q29udGVudCArIFwiYFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnI3RleHQnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBub2RlLnRleHRDb250ZW50LnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZDphbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IGNvbnZlcnROb2RlKGNoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMykgeyAvL05vZGUuVEVYVF9OT0RFXHJcbiAgICAgICAgICAgICAgICBtYXJrZG93biArPSBub2RlLnRleHRDb250ZW50LnRyaW0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWFya2Rvd247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtZCA9IGNvbnZlcnROb2RlKGRvYy5ib2R5KTtcclxuICAgICAgICByZXR1cm4gbWQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsYXkobXM6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QWN0aXZlTGVhZih2aWV3PXRoaXMudmlldyl7XHJcbiAgICAgICAgaWYoIXZpZXcpe3JldHVybn07XHJcbiAgICAgICAgbGV0IGxlYWYgPSB0aGlzLmFsbExlYXZlcy5maWx0ZXIoeD0+eC52aWV3PT12aWV3KVswXTtcclxuICAgICAgICBpZighbGVhZil7cmV0dXJufTtcclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihsZWFmKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRfc2FmZV9jdHgoY3R4OnN0cmluZyl7XHJcbiAgICAgICAgbGV0IHNhZmVDdHggPSBKU09OLnN0cmluZ2lmeShjdHgucmVwbGFjZSgvYC9nLCd+JykucmVwbGFjZSgvXFwkL2csJ1x1RkZFNScpKTtcclxuICAgICAgICByZXR1cm4gc2FmZUN0eDtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgQXBwLE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IEJhc2VXZWJWaWV3ZXIgfSBmcm9tICcuL0Jhc2VXZWJWaWV3ZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIERvdWJhbyBleHRlbmRzIEJhc2VXZWJWaWV3ZXIge1xyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsaG9tZXBhZ2U9J2h0dHBzOi8vd3d3LmRvdWJhby5jb20nKSB7XHJcblx0XHRzdXBlcihhcHAsIGhvbWVwYWdlLCdcdThDNDZcdTUzMDUnKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNsaWNrX2J0bl9vZl9zZW5kKCkge1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRmdW5jdGlvbiBkZWxheShtcykge1xyXG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGFzeW5jIGZ1bmN0aW9uIGNsaWNrKCl7XHJcblx0XHRcdFx0bGV0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbG93LWVuZC1tc2ctc2VuZCcpO1xyXG5cdFx0XHRcdGxldCBhcmlhRGlzYWJsZWQgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XHJcblx0XHRcdFx0d2hpbGUoYXJpYURpc2FibGVkPT0nZmFsc2UnKXtcclxuXHRcdFx0XHRcdGJ1dHRvbi5jbGljaygpO1xyXG5cdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbG93LWVuZC1tc2ctc2VuZCcpO1xyXG5cdFx0XHRcdFx0YXJpYURpc2FibGVkID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRjbGljaygpO1xyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgcGFzdGVfbXNnKGN0eDpzdHJpbmcpIHtcclxuXHRcdGxldCBtc2c7XHJcblx0XHRjdHggPSB0aGlzLmdldF9zYWZlX2N0eChjdHgpO1xyXG5cdFx0Y29uc3QgbWF4UmV0cmllcyA9IDE7IC8vIFx1NjcwMFx1NTkyN1x1OTFDRFx1OEJENVx1NkIyMVx1NjU3MFxyXG5cdFx0Zm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcclxuXHRcdFx0bXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRcdGBcclxuXHRcdFx0XHRmdW5jdGlvbiBkZWxheShtcykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1NUMwNlx1NUYwMlx1NkI2NVx1OTAzQlx1OEY5MVx1NUMwMVx1ODhDNVx1NTIzMFx1NEUwMFx1NEUyQSBhc3luYyBcdTUxRkRcdTY1NzBcdTRFMkRcclxuXHRcdFx0XHRhc3luYyBmdW5jdGlvbiBpbnNlcnRUZXh0QW5kU2VuZChjdHgpIHtcclxuXHRcdFx0XHRcdC8vIFx1ODNCN1x1NTNENiB0ZXh0YXJlYSBcdTVFNzZcdTgwNUFcdTcxMjZcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdocmVyJyxkb2N1bWVudClcclxuXHRcdFx0XHRcdGxldCBpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWFbZGF0YS10ZXN0aWQ9XCJjaGF0X2lucHV0X2lucHV0XCJdJyk7XHJcblx0XHRcdFx0XHRpdGVtLmZvY3VzKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gXHU2M0QyXHU1MTY1XHU2NTg3XHU2NzJDXHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFRleHQnLCBmYWxzZSwgY3R4KTtcclxuXHRcdFx0XHRcdH0sIDEwMDApO1xyXG5cdFx0XHRcdFx0bGV0IGkgPSAxMDA7XHJcblx0XHRcdFx0XHQvLyBcdTdCNDlcdTVGODVcdTYzMDlcdTk0QUVcdTUzRUZcdTcwQjlcdTUxRkJcclxuXHRcdFx0XHRcdHdoaWxlICh0cnVlKSB7XHJcblx0XHRcdFx0XHRcdGxldCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxvdy1lbmQtbXNnLXNlbmQnKTtcclxuXHRcdFx0XHRcdFx0bGV0IGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnKTtcclxuXHRcdFx0XHRcdFx0aWYgKGFyaWFEaXNhYmxlZCA9PSAnZmFsc2UnKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ1x1NTkwRFx1NTIzNlx1NjIxMFx1NTI5RicpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aSA9IGktMTtcclxuXHRcdFx0XHRcdFx0aWYoaTwwKXticmVha31cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1OEMwM1x1NzUyOCBhc3luYyBcdTUxRkRcdTY1NzBcclxuXHRcdFx0XHRpbnNlcnRUZXh0QW5kU2VuZChcXGAke2N0eH1cXGApO1xyXG5cdFx0XHRcdGBcclxuXHRcdFx0KTtcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2MjEwXHU1MjlGXHU3Qzk4XHU4RDM0XHJcblx0XHRcdGlmIChtc2cpIHtcclxuXHRcdFx0XHRicmVhazsgLy8gXHU1OTgyXHU2NzlDXHU2MjEwXHU1MjlGXHVGRjBDXHU5MDAwXHU1MUZBXHU5MUNEXHU4QkQ1XHU1RkFBXHU3M0FGXHJcblx0XHRcdH1cclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTsgLy8gXHU3QjQ5XHU1Rjg1XHU0RTAwXHU2QkI1XHU2NUY2XHU5NUY0XHU1NDBFXHU5MUNEXHU4QkQ1XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXRfbGFzdF9yZXNwb25zZSgpIHtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgaXRlbXMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnZGl2W2RhdGEtdGVzdGlkPVwicmVjZWl2ZV9tZXNzYWdlXCJdJyk7XHJcblx0XHRpZihpdGVtcy5sZW5ndGg8MSl7cmV0dXJuIG51bGx9XHJcblx0XHRcclxuXHRcdGxldCBpdGVtID0gaXRlbXNbaXRlbXMubGVuZ3RoLTFdXHJcblx0XHRsZXQgY3R4ID0gdGhpcy5odG1sX3RvX21hcmtkb3duKGl0ZW0ub3V0ZXJIVE1MKTtcclxuXHRcdHJldHVybiBjdHg7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZnVuY3Rpb24gbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcblx0XHRcdFx0bGV0IGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2W2RhdGEtdGVzdGlkPVwicmVjZWl2ZV9tZXNzYWdlXCJdJyk7XHJcblx0XHRcdFx0aWYoaXRlbXMubGVuZ3RoPT0wKXtcclxuXHRcdFx0XHRcdHJldHVybiAwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpdGVtID0gaXRlbXNbaXRlbXMubGVuZ3RoLTFdXHJcblx0XHRcdFx0aWYoaXRlbS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bZGF0YS10ZXN0aWQ9XCJtZXNzYWdlX2FjdGlvbl9saWtlXCJdJykubGVuZ3RoPT0wKXtcclxuXHRcdFx0XHRcdG1zZyA9IGl0ZW1zLmxlbmd0aC0xO1xyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0bXNnID0gaXRlbXMubGVuZ3RoO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gbXNnO1xyXG5cdFx0XHR9XHJcblx0XHRcdG51bWJlcl9vZl9yZWNlaXZlX21zZygpXHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjb3B5X2xhc3RfY29udGVudCgpe1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlZ21lbnQtYWN0aW9ucy1jb250ZW50LWJ0bicpO1xyXG5cdFx0XHRidG5zID0gQXJyYXkuZnJvbShidG5zKS5maWx0ZXIoeD0+eC50ZXh0Q29udGVudD09J1x1NTkwRFx1NTIzNicpO1xyXG5cdFx0XHRpZihidG5zLmxlbmd0aD4wKXtcclxuXHRcdFx0XHRidG5zW2J0bnMubGVuZ3RoLTFdLmNsaWNrKCk7XHJcblx0XHRcdFx0bXNnID0gdHJ1ZTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0bXNnID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIG51bWJlcl9vZl9jb250ZW50cygpe1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcubWVzc2FnZS1jb250ZW50JylcclxuXHRcdHJldHVybiBpdGVtcy5sZW5ndGg7XHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXRfbGFzdF9jb250ZW50KCl7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlLWNvbnRlbnQnKVxyXG5cdFx0cmV0dXJuIGl0ZW1zW2l0ZW1zLmxlbmd0aC0xXS50ZXh0Q29udGVudFxyXG5cdH1cclxuXHJcblx0YXN5bmMgcmVxdWVzdChjdHg6c3RyaW5nLHRpbWVvdXQ9NjApe1xyXG5cdFx0bGV0IHZpZXcgPSB0aGlzLnZpZXc7XHJcblx0XHRsZXQgTjEgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMucGFzdGVfbXNnKGN0eCk7XHJcblx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xyXG5cdFx0YXdhaXQgdGhpcy5jbGlja19idG5fb2Zfc2VuZCgpO1xyXG5cdFx0bGV0IE4yID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHRcdFxyXG5cdFx0d2hpbGUoTjIhPU4xKzEpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xyXG5cdFx0XHROMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcdHRpbWVvdXQgPSB0aW1lb3V0LTE7XHJcblx0XHRcdGlmKHRpbWVvdXQ8MCl7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZihOMj09TjErMSl7XHJcblx0XHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRcdGxldCBpdGVtcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcubWVzc2FnZS1jb250ZW50JylcclxuXHRcdFx0TjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9jb250ZW50cygpXHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5uYW1lfSBcdThCRjRcdTRFODZcdTcwQjlcdTRFQzBcdTRFNDhgKVxyXG5cdFx0XHRyZXR1cm4gaXRlbXNbTjItMV0udGV4dENvbnRlbnQ7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1NEUwRFx1OEJGNFx1OEJERGApXHJcblx0XHRcdGNvbnNvbGUubG9nKCdEb3ViYW8gTjonLE4xLE4yKVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCxOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBCYXNlV2ViVmlld2VyIH0gZnJvbSAnLi9CYXNlV2ViVmlld2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBLaW1pIGV4dGVuZHMgQmFzZVdlYlZpZXdlciB7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsaG9tZXBhZ2U9J2h0dHBzOi8va2ltaS5tb29uc2hvdC5jbi8nKSB7XHJcblx0XHRzdXBlcihhcHAsIGhvbWVwYWdlLCdLaW1pJyk7XHJcblx0fVxyXG5cdGFzeW5jIG5ld19jaGF0KCl7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgKHRoaXMudmlldyBhcyBhbnkpLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1jaGF0LWJ0bicpLmNsaWNrKClcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblx0YXN5bmMgY2xpY2tfYnRuX29mX3NlbmQoKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCAodGhpcy52aWV3IGFzIGFueSkud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRmdW5jdGlvbiBkZWxheShtcykge1xyXG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGFzeW5jIGZ1bmN0aW9uIGNsaWNrKCl7XHJcblx0XHRcdFx0bGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kLWJ1dHRvbicpO1xyXG5cdFx0XHRcdGxldCBhcmlhRGlzYWJsZWQgPSBidXR0b24ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJyk7XHJcblx0XHRcdFx0d2hpbGUoIWFyaWFEaXNhYmxlZCl7XHJcblx0XHRcdFx0XHRidXR0b24uY2xpY2soKTtcclxuXHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VuZC1idXR0b24nKTtcclxuXHRcdFx0XHRcdGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Y2xpY2soKTtcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cclxuXHRhc3luYyBwYXN0ZV9tc2coY3R4OnN0cmluZykge1xyXG5cdFx0bGV0IG1zZztcclxuXHRcdGN0eCA9IHRoaXMuZ2V0X3NhZmVfY3R4KGN0eCk7XHJcblx0XHRjb25zdCBtYXhSZXRyaWVzID0gMTsgLy8gXHU2NzAwXHU1OTI3XHU5MUNEXHU4QkQ1XHU2QjIxXHU2NTcwXHJcblx0XHRmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xyXG5cdFx0XHRtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdFx0YFxyXG5cdFx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU1QzA2XHU1RjAyXHU2QjY1XHU5MDNCXHU4RjkxXHU1QzAxXHU4OEM1XHU1MjMwXHU0RTAwXHU0RTJBIGFzeW5jIFx1NTFGRFx1NjU3MFx1NEUyRFxyXG5cdFx0XHRcdGFzeW5jIGZ1bmN0aW9uIGluc2VydFRleHRBbmRTZW5kKGN0eCkge1xyXG5cdFx0XHRcdFx0Ly8gXHU4M0I3XHU1M0Q2IHRleHRhcmVhIFx1NUU3Nlx1ODA1QVx1NzEyNlxyXG5cdFx0XHRcdFx0bGV0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1pbnB1dC1lZGl0b3ItY29udGFpbmVyJykucXVlcnlTZWxlY3RvcignLmNoYXQtaW5wdXQtZWRpdG9yJyk7XHJcblx0XHRcdFx0XHRpdGVtLmZvY3VzKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gXHU2M0QyXHU1MTY1XHU2NTg3XHU2NzJDXHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFRleHQnLCBmYWxzZSwgY3R4KTtcclxuXHRcdFx0XHRcdH0sIDEwMDApO1xyXG5cdFx0XHRcdFx0bGV0IGkgPSAxMDA7XHJcblx0XHRcdFx0XHQvLyBcdTdCNDlcdTVGODVcdTYzMDlcdTk0QUVcdTUzRUZcdTcwQjlcdTUxRkJcclxuXHRcdFx0XHRcdHdoaWxlICh0cnVlKSB7XHJcblx0XHRcdFx0XHRcdGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VuZC1idXR0b24nKTs7XHJcblx0XHRcdFx0XHRcdGxldCBhcmlhRGlzYWJsZWQgPSBidXR0b24ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJyk7XHJcblx0XHRcdFx0XHRcdGlmIChhcmlhRGlzYWJsZWQgPT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGkgPSBpLTE7XHJcblx0XHRcdFx0XHRcdGlmKGk8MCl7YnJlYWt9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdThDMDNcdTc1MjggYXN5bmMgXHU1MUZEXHU2NTcwXHJcblx0XHRcdFx0aW5zZXJ0VGV4dEFuZFNlbmQoXFxgJHtjdHh9XFxgKTtcclxuXHRcdFx0XHRgXHJcblx0XHRcdCk7XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjIxMFx1NTI5Rlx1N0M5OFx1OEQzNFxyXG5cdFx0XHRpZiAobXNnKSB7XHJcblx0XHRcdFx0YnJlYWs7IC8vIFx1NTk4Mlx1Njc5Q1x1NjIxMFx1NTI5Rlx1RkYwQ1x1OTAwMFx1NTFGQVx1OTFDRFx1OEJENVx1NUZBQVx1NzNBRlxyXG5cdFx0XHR9XHJcblx0XHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7IC8vIFx1N0I0OVx1NUY4NVx1NEUwMFx1NkJCNVx1NjVGNlx1OTVGNFx1NTQwRVx1OTFDRFx1OEJENVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cclxuXHRhc3luYyBnZXRfbGFzdF9yZXNwb25zZSgpIHtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgaXRlbXMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLm1hcmtkb3duLWNvbnRhaW5lcicpO1xyXG5cdFx0aWYoaXRlbXMubGVuZ3RoPDEpe3JldHVybiBudWxsfVxyXG5cdFx0XHJcblx0XHRsZXQgaXRlbSA9IGl0ZW1zW2l0ZW1zLmxlbmd0aC0xXVxyXG5cdFx0bGV0IGN0eCA9IHRoaXMuaHRtbF90b19tYXJrZG93bihpdGVtLm91dGVySFRNTCk7XHJcblx0XHRyZXR1cm4gY3R4O1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbnVtYmVyX29mX2NvcHlfYnRucygpe1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBidG5zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2Z1tuYW1lPVwiTGlrZVwiXScpXHJcblx0XHRyZXR1cm4gYnRucy5sZW5ndGg7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjb3B5X2xhc3RfY29udGVudCgpe1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlZ21lbnQtYWN0aW9ucy1jb250ZW50LWJ0bicpO1xyXG5cdFx0XHRidG5zID0gQXJyYXkuZnJvbShidG5zKS5maWx0ZXIoeD0+eC50ZXh0Q29udGVudD09J1x1NTkwRFx1NTIzNicpO1xyXG5cdFx0XHRpZihidG5zLmxlbmd0aD4wKXtcclxuXHRcdFx0XHRidG5zW2J0bnMubGVuZ3RoLTFdLmNsaWNrKCk7XHJcblx0XHRcdFx0bXNnID0gdHJ1ZTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0bXNnID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIGdldF9sYXN0X2NvbnRlbnQoKXtcclxuXHRcdGxldCBkb2M9YXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGNoYXRzID0gZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjaGF0LWNvbnRlbnQtaXRlbVwiKTtcclxuXHRcdHJldHVybiBjaGF0c1tjaGF0cy5sZW5ndGgtMV0ucXVlcnlTZWxlY3RvcignLnNlZ21lbnQtY29udGVudC1ib3gnKT8udGV4dENvbnRlbnRcclxuXHR9XHJcblxyXG5cdGFzeW5jIG51bWJlcl9vZl9yZWNlaXZlX21zZygpe1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBidG5zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2Z1tuYW1lPVwiTGlrZVwiXScpXHJcblx0XHRyZXR1cm4gYnRucy5sZW5ndGg7XHJcblx0fVxyXG5cclxuXHJcblx0YXN5bmMgcmVxdWVzdChjdHg6c3RyaW5nLHRpbWVvdXQ9NjApe1xyXG5cdFx0bGV0IE4xID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHRcdFxyXG5cdFx0YXdhaXQgdGhpcy5wYXN0ZV9tc2coY3R4KTtcclxuXHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7XHJcblx0XHRhd2FpdCB0aGlzLmNsaWNrX2J0bl9vZl9zZW5kKCk7XHJcblx0XHRsZXQgTjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHJcblx0XHR3aGlsZShOMiE9TjErMSl7XHJcblx0XHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7XHJcblx0XHRcdE4yID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHRcdFx0dGltZW91dCA9IHRpbWVvdXQtMTtcclxuXHRcdFx0aWYodGltZW91dDwwKXtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYoTjI9PU4xKzEpe1xyXG5cdFx0XHRsZXQgZG9jPWF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdFx0bGV0IGNoYXRzID0gZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjaGF0LWNvbnRlbnQtaXRlbVwiKTtcclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1OEJGNFx1NEU4Nlx1NzBCOVx1NEVDMFx1NEU0OGApXHJcblx0XHRcdGxldCByZXMgPSBjaGF0c1tjaGF0cy5sZW5ndGgtMV0ucXVlcnlTZWxlY3RvcignLnNlZ21lbnQtY29udGVudC1ib3gnKT8udGV4dENvbnRlbnQ7XHJcblx0XHRcdGlmKHJlcz8uY29udGFpbnMoJ1x1NUY1M1x1NTI0RFx1OTU3Rlx1NjU4N1x1NjcyQ1x1NUJGOVx1OEJERFx1NURGMlx1OEZCRTIwXHU4RjZFJykpe1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMubmV3X2NoYXQoKTtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5yZXF1ZXN0KGN0eCk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHJldHVybiByZXM7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bGV0IHJlcyA9IGF3YWl0IHRoaXMuZ2V0X2xhc3RfY29udGVudCgpO1xyXG5cdFx0XHRpZihyZXM/LmNvbnRhaW5zKCdcdTVGNTNcdTUyNERcdTk1N0ZcdTY1ODdcdTY3MkNcdTVCRjlcdThCRERcdTVERjJcdThGQkUyMFx1OEY2RScpKXtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLm5ld19jaGF0KCk7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMucmVxdWVzdChjdHgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5uYW1lfSBcdTRFMERcdThCRjRcdThCRERgKVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG59XHJcbiIsICJpbXBvcnQgeyBcclxuXHROb3RpY2UsIFRGaWxlXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IFdlYlZpZXdMTE1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IERlZXBTZWVrIH0gZnJvbSAnLi9MTE0vRGVlcFNlZWsnO1xyXG5pbXBvcnQgeyBEb3ViYW8gfSBmcm9tICcuL0xMTS9Eb3ViYW8nO1xyXG5pbXBvcnQgeyBLaW1pIH0gZnJvbSAnLi9MTE0vS2ltaSc7XHJcblxyXG5jb25zdCBjbWRfcmVmcmVzaF9sbG1zID0gKHBsdWdpbjpXZWJWaWV3TExNUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAnY21kX3JlZnJlc2hfbGxtcycsXHJcblx0bmFtZTogcGx1Z2luLnN0cmluZ3MuY21kX3JlZnJlc2hfbGxtcyxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0bGV0IHZpZXdzID0gcGx1Z2luLmJhc2V3di52aWV3cztcclxuXHRcdHBsdWdpbi5sbG1zID0gcGx1Z2luLmxsbXMuc2xpY2UoMCwwKTtcclxuXHRcdGZvcihsZXQgdmlldyBvZiB2aWV3cyl7XHJcblx0XHRcdGlmKCh2aWV3IGFzIGFueSkudXJsLnN0YXJ0c1dpdGgocGx1Z2luLmRlZXBzZWVrLmhvbWVwYWdlKSl7XHJcblx0XHRcdFx0bGV0IGxsbSA9IG5ldyBEZWVwU2VlayhwbHVnaW4uYXBwKTtcclxuXHRcdFx0XHRsbG0udmlldyA9IHZpZXc7XHJcblx0XHRcdFx0cGx1Z2luLmxsbXMucHVzaChsbG0pO1xyXG5cdFx0XHR9ZWxzZSBpZigodmlldyBhcyBhbnkpLnVybC5zdGFydHNXaXRoKHBsdWdpbi5kb3ViYW8uaG9tZXBhZ2UpKXtcclxuXHRcdFx0XHRsZXQgbGxtID0gbmV3IERvdWJhbyhwbHVnaW4uYXBwKTtcclxuXHRcdFx0XHRsbG0udmlldyA9IHZpZXc7XHJcblx0XHRcdFx0cGx1Z2luLmxsbXMucHVzaChsbG0pO1xyXG5cdFx0XHR9ZWxzZSBpZigodmlldyBhcyBhbnkpLnVybC5zdGFydHNXaXRoKHBsdWdpbi5raW1pLmhvbWVwYWdlKSl7XHJcblx0XHRcdFx0bGV0IGxsbSA9IG5ldyBLaW1pKHBsdWdpbi5hcHApO1xyXG5cdFx0XHRcdGxsbS52aWV3ID0gdmlldztcclxuXHRcdFx0XHRwbHVnaW4ubGxtcy5wdXNoKGxsbSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IGNtZF9vcGVuX25ld19sbG0gPSAocGx1Z2luOldlYlZpZXdMTE1QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdjbWRfb3Blbl9uZXdfbGxtJyxcclxuXHRuYW1lOiBwbHVnaW4uc3RyaW5ncy5jbWRfb3Blbl9uZXdfbGxtLFxyXG5cdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcblx0XHRsZXQgaHBhZ2UgPSBhd2FpdCBwbHVnaW4uZWFzeWFwaS5kaWFsb2dfc3VnZ2VzdChcclxuXHRcdFx0cGx1Z2luLmJhc2VsbG1zLm1hcCh4PT54Lm5hbWUpLFxyXG5cdFx0XHRwbHVnaW4uYmFzZWxsbXMubWFwKHg9PnguaG9tZXBhZ2UpXHJcblx0XHQpXHJcblx0XHRpZihocGFnZSl7XHJcblx0XHRcdGF3YWl0IHBsdWdpbi5iYXNld3Yub3Blbl9ob21lcGFnZShocGFnZSwtMSk7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGNvbW1hbmRCdWlsZGVyczpBcnJheTxGdW5jdGlvbj4gPSBbXHJcbiAgICBcclxuXTtcclxuXHJcbmNvbnN0IGNvbW1hbmRCdWlsZGVyc0Rlc2t0b3A6QXJyYXk8RnVuY3Rpb24+ID0gW1xyXG5cdGNtZF9yZWZyZXNoX2xsbXMsXHJcblx0Y21kX29wZW5fbmV3X2xsbVxyXG5dO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbW1hbmRzKHBsdWdpbjpXZWJWaWV3TExNUGx1Z2luKSB7XHJcbiAgICBjb21tYW5kQnVpbGRlcnMuZm9yRWFjaCgoYykgPT4ge1xyXG4gICAgICAgIHBsdWdpbi5hZGRDb21tYW5kKGMocGx1Z2luKSk7XHJcbiAgICB9KTtcclxuXHRpZigocGx1Z2luLmFwcCBhcyBhbnkpLmlzTW9iaWxlPT1mYWxzZSl7XHJcblx0XHRjb21tYW5kQnVpbGRlcnNEZXNrdG9wLmZvckVhY2goKGMpID0+IHtcclxuXHRcdFx0cGx1Z2luLmFkZENvbW1hbmQoYyhwbHVnaW4pKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufSIsICJpbXBvcnQgeyBBcHAsTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHsgQmFzZVdlYlZpZXdlciB9IGZyb20gJy4vQmFzZVdlYlZpZXdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgWXVhbmJhbyBleHRlbmRzIEJhc2VXZWJWaWV3ZXIge1xyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsaG9tZXBhZ2U9J2h0dHBzOi8veXVhbmJhby50ZW5jZW50LmNvbS9jaGF0Jykge1xyXG5cdFx0c3VwZXIoYXBwLCBob21lcGFnZSwnXHU1MTQzXHU1QjlEJyk7XHJcblx0fVxyXG5cdFxyXG5cdGFzeW5jIG5ld19jaGF0KCl7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgKHRoaXMudmlldyBhcyBhbnkpLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnliLWNvbW1vbi1uYXZfX25ldy1jaGF0JykuY2xpY2soKVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY2xpY2tfYnRuX29mX3NlbmQoKSB7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0YXN5bmMgZnVuY3Rpb24gY2xpY2soKXtcclxuXHRcdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYVtjbGFzc149XCJzdHlsZV9fc2VuZC1idG5cIl0nKTtcclxuXHRcdFx0XHR3aGlsZSghYnV0dG9uKXtcclxuXHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdhW2NsYXNzXj1cInN0eWxlX19zZW5kLWJ0blwiXScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRidXR0b24uY2xpY2soKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjbGljaygpO1xyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgcGFzdGVfbXNnKGN0eDpzdHJpbmcpIHtcclxuXHRcdGxldCBtc2c7XHJcblx0XHRjdHggPSB0aGlzLmdldF9zYWZlX2N0eChjdHgpO1xyXG5cdFx0Y29uc3QgbWF4UmV0cmllcyA9IDE7IC8vIFx1NjcwMFx1NTkyN1x1OTFDRFx1OEJENVx1NkIyMVx1NjU3MFxyXG5cdFx0Zm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcclxuXHRcdFx0bXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRcdGBcclxuXHRcdFx0XHRmdW5jdGlvbiBkZWxheShtcykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1NUMwNlx1NUYwMlx1NkI2NVx1OTAzQlx1OEY5MVx1NUMwMVx1ODhDNVx1NTIzMFx1NEUwMFx1NEUyQSBhc3luYyBcdTUxRkRcdTY1NzBcdTRFMkRcclxuXHRcdFx0XHRhc3luYyBmdW5jdGlvbiBpbnNlcnRUZXh0QW5kU2VuZChjdHgpIHtcclxuXHRcdFx0XHRcdC8vIFx1ODNCN1x1NTNENiB0ZXh0YXJlYSBcdTVFNzZcdTgwNUFcdTcxMjZcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0bGV0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1pbnB1dC1lZGl0b3IgIC5xbC1lZGl0b3IucWwtYmxhbmsnKTtcclxuXHRcdFx0XHRcdGl0ZW0uZm9jdXMoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBcdTYzRDJcdTUxNjVcdTY1ODdcdTY3MkNcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VGV4dCcsIGZhbHNlLCBjdHgpO1xyXG5cdFx0XHRcdFx0fSwgMTAwMCk7XHJcblx0XHRcdFx0XHRsZXQgaSA9IDEwMDtcclxuXHRcdFx0XHRcdC8vIFx1N0I0OVx1NUY4NVx1NjMwOVx1OTRBRVx1NTNFRlx1NzBCOVx1NTFGQlxyXG5cdFx0XHRcdFx0d2hpbGUgKHRydWUpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1pbnB1dC1lZGl0b3InKS5xdWVyeVNlbGVjdG9yKCcucWwtZWRpdG9yLnFsLWJsYW5rJylcclxuXHRcdFx0XHRcdFx0aWYoaXRlbSl7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aSA9IGktMTtcclxuXHRcdFx0XHRcdFx0aWYoaTwwKXticmVha31cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1OEMwM1x1NzUyOCBhc3luYyBcdTUxRkRcdTY1NzBcclxuXHRcdFx0XHRpbnNlcnRUZXh0QW5kU2VuZChcXGAke2N0eH1cXGApO1xyXG5cdFx0XHRcdGBcclxuXHRcdFx0KTtcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2MjEwXHU1MjlGXHU3Qzk4XHU4RDM0XHJcblx0XHRcdGlmIChtc2cpIHtcclxuXHRcdFx0XHRicmVhazsgLy8gXHU1OTgyXHU2NzlDXHU2MjEwXHU1MjlGXHVGRjBDXHU5MDAwXHU1MUZBXHU5MUNEXHU4QkQ1XHU1RkFBXHU3M0FGXHJcblx0XHRcdH1cclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTsgLy8gXHU3QjQ5XHU1Rjg1XHU0RTAwXHU2QkI1XHU2NUY2XHU5NUY0XHU1NDBFXHU5MUNEXHU4QkQ1XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZnVuY3Rpb24gbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcblx0XHRcdFx0bGV0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWdlbnQtY2hhdF9fdG9vbGJhciA+IC5hZ2VudC1jaGF0X190b29sYmFyX19yaWdodCA+IC5hZ2VudC1jaGF0X190b29sYmFyX19pdGVtOm50aC1jaGlsZCg1KScpO1xyXG5cdFx0XHRcdGxldCBOID0gcGFyc2VJbnQoYnRucy5sZW5ndGgpO1xyXG5cdFx0XHRcdHJldHVybiBOO1xyXG5cdFx0XHR9XHJcblx0XHRcdG51bWJlcl9vZl9yZWNlaXZlX21zZygpXHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfY29udGVudHMoKXtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgaXRlbXMgPSBBcnJheS5mcm9tKGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcuaHljLWNvbnRlbnQtbWQgLmh5Yy1jb21tb24tbWFya2Rvd24nKSkuZmlsdGVyKFxyXG5cdFx0XHRlbCA9PiAhZWwucGFyZW50RWxlbWVudD8ucGFyZW50RWxlbWVudD8uY2xhc3NMaXN0LmNvbnRhaW5zKCdoeWMtY29tcG9uZW50LXJlYXNvbmVyX190aGluay1jb250ZW50JylcclxuXHRcdCk7XHJcblx0XHRyZXR1cm4gaXRlbXMubGVuZ3RoO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfY29udGVudCgpe1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IEFycmF5LmZyb20oZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5oeWMtY29udGVudC1tZCAuaHljLWNvbW1vbi1tYXJrZG93bicpKS5maWx0ZXIoXHJcblx0XHRcdGVsID0+ICFlbC5wYXJlbnRFbGVtZW50Py5wYXJlbnRFbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoJ2h5Yy1jb21wb25lbnQtcmVhc29uZXJfX3RoaW5rLWNvbnRlbnQnKVxyXG5cdFx0KTtcclxuXHRcdGxldCBjdHggPSB0aGlzLmh0bWxfdG9fbWFya2Rvd24oaXRlbXNbaXRlbXMubGVuZ3RoLTFdLm91dGVySFRNTCk7XHJcblx0XHRyZXR1cm4gY3R4O1xyXG5cdH1cclxuXHJcblx0YXN5bmMgcmVxdWVzdChjdHg6c3RyaW5nLHRpbWVvdXQ9NjApe1xyXG5cclxuXHRcdGxldCBOMSA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5wYXN0ZV9tc2coY3R4KTtcclxuXHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7XHJcblx0XHRhd2FpdCB0aGlzLmNsaWNrX2J0bl9vZl9zZW5kKCk7XHJcblx0XHRsZXQgTjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHJcblx0XHR3aGlsZShOMiE9TjErMSl7XHJcblx0XHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7XHJcblx0XHRcdE4yID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHRcdFx0dGltZW91dCA9IHRpbWVvdXQtMTtcclxuXHRcdFx0aWYodGltZW91dDwwKXtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmKE4yPT1OMSsxKXtcclxuXHRcdFx0bGV0IGN0eCA9IGF3YWl0IHRoaXMuZ2V0X2xhc3RfY29udGVudCgpO1xyXG5cdFx0XHRuZXcgTm90aWNlKGAke3RoaXMubmFtZX0gXHU4QkY0XHU0RTg2XHU3MEI5XHU0RUMwXHU0RTQ4YClcclxuXHRcdFx0cmV0dXJuIGN0eDtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRuZXcgTm90aWNlKGAke3RoaXMubmFtZX0gXHU0RTBEXHU4QkY0XHU4QkREYClcclxuXHRcdFx0Y29uc29sZS5sb2coJ0RvdWJhbyBOOicsTjEsTjIpXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQThDOzs7QUNDdkMsSUFBTSxVQUFOLE1BQWE7QUFBQSxFQUVoQixjQUFhO0FBQ1QsUUFBSSxPQUFPLE9BQU8sYUFBYSxRQUFRLFVBQVU7QUFDakQsUUFBRyxNQUFLO0FBQ0osV0FBSyxXQUFXO0FBQUEsSUFDcEIsT0FBSztBQUNELFdBQUssV0FBVztBQUFBLElBQ3BCO0FBQUEsRUFDUDtBQUFBLEVBRUcsSUFBSSxtQkFBa0I7QUFDbEIsUUFBRyxLQUFLLFlBQVUsTUFBSztBQUNuQixhQUFPO0FBQUEsSUFDWCxPQUFLO0FBQ0QsYUFBTztBQUFBLElBQ1g7QUFBQSxFQUNKO0FB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SyxzQkFBc0I7QUFDdEMsZ0JBQVUsVUFBUTtBQUNsQixVQUFHLFVBQVEsR0FBRTtBQUNaO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFFQSxRQUFHLE1BQUksS0FBRyxHQUFFO0FBQ1gsVUFBSUMsT0FBTSxNQUFNLEtBQUssaUJBQWlCO0FBQ3RDLFVBQUksd0JBQU8sR0FBRyxLQUFLLHFDQUFZO0FBQy9CLGFBQU9BO0FBQUEsSUFDUixPQUFLO0FBQ0osVUFBSSx3QkFBTyxHQUFHLEtBQUsseUJBQVU7QUFDN0IsY0FBUSxJQUFJLGFBQVksSUFBRyxFQUFFO0FBQzdCLGFBQU87QUFBQSxJQUNSO0FBQUEsRUFDRDtBQUNEOzs7QVIzSUEsSUFBcUIsbUJBQXJCLGNBQThDLHdCQUFPO0FBQUEsRUFnQnBELE1BQU0sU0FBUztBQUVkLFNBQUssSUFBSSxVQUFVO0FBQUEsTUFDbEIsWUFBUztBQUNSLGNBQU0sS0FBSyxTQUFTO0FBQUEsTUFDckI7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBRUEsSUFBSSxVQUFTO0FBckNkO0FBc0NFLFlBQVEsVUFBSyxJQUFZLFFBQVEsUUFBUSxTQUFTLE1BQTFDLG1CQUE2QztBQUFBLEVBQ3REO0FBQUEsRUFFQSxNQUFNLFdBQVc7QUFFaEIsU0FBSyxVQUFVLElBQUksUUFBUTtBQUMzQixVQUFNLEtBQUssYUFBYTtBQUd4QixTQUFLLE9BQU8sQ0FBQztBQUNiLFNBQUssV0FBVyxJQUFJLFNBQVMsS0FBSyxHQUFHO0FBQ3JDLFNBQUssU0FBUyxJQUFJLE9BQU8sS0FBSyxHQUFHO0FBQ2pDLFNBQUssT0FBTyxJQUFJLEtBQUssS0FBSyxHQUFHO0FBQzdCLFNBQUssVUFBVSxJQUFJLFFBQVEsS0FBSyxHQUFHO0FBQ25DLFNBQUssV0FBVztBQUFBLE1BQ2YsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUFBLElBQ047QUFDQSxTQUFLLFNBQVMsSUFBSSxjQUFjLEtBQUssS0FBSSxFQUFFO0FBSTNDLGdCQUFZLElBQUk7QUFBQSxFQUVqQjtBQUFBLEVBRUEsV0FBVztBQUFBLEVBRVg7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQzFFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbEM7QUFJRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJjdHgiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY3R4Il0KfQo=
