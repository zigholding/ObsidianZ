/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => WebViewLLMPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");

// src/strings.ts
var Strings = class {
  constructor() {
    let lang = window.localStorage.getItem("language");
    if (lang) {
      this.language = lang;
    } else {
      this.language = "en";
    }
  }
  get cmd_refresh_llms() {
    if (this.language == "zh") {
      return "\u5237\u65B0\u7FA4\u7EC4";
    } else {
      return "Refresh llms";
    }
  }
  get cmd_open_new_llm() {
    if (this.language == "zh") {
      return "\u6253\u5F00\u65B0AI";
    } else {
      return "Open new llm";
    }
  }
};
var strings = new Strings();

// src/setting.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  strict_mode: false,
  vaultDir: ""
};

// src/LLM/DeepSeek.ts
var import_obsidian3 = require("obsidian");

// src/LLM/BaseWebViewer.ts
var import_obsidian2 = require("obsidian");
var BaseWebViewer = class {
  constructor(app, homepage = "", name = "") {
    this.app = app;
    this.homepage = homepage;
    this.view = this.get_webviews(this.homepage)[0];
    this.name = name;
  }
  get allLeaves() {
    let leaves = [];
    this.app.workspace.iterateAllLeaves((x) => {
      leaves.push(x);
    });
    return leaves;
  }
  get allViews() {
    return this.allLeaves.map(
      (x) => x.view
    );
  }
  // 所有 webview 标签
  get leaves() {
    let leaves = this.allLeaves.filter(
      (x) => x.view.webview
    );
    return leaves;
  }
  // 所有 webview 视图
  get views() {
    return this.leaves.map(
      (x) => x.view
    );
  }
  get activeLeaf() {
    let leaves = this.leaves.filter(
      (x) => x.containerEl.className.contains("mod-active")
    );
    if (leaves.length != 1) {
      return null;
    } else {
      return leaves[0];
    }
  }
  get activeView() {
    let leaf = this.activeLeaf;
    if (leaf) {
      return leaf.view;
    } else {
      return null;
    }
  }
  get webviews_blank() {
    return this.get_webviews("about:blank");
  }
  get webview() {
    if (this.view) {
      return this.view.webview;
    } else {
      return null;
    }
  }
  // 获取指定标签
  get_webviews(prefix) {
    return this.views.filter(
      (x) => x.url.startsWith(prefix)
    );
  }
  async open_homepage(url = this.homepage, idx = 0) {
    let views = this.get_webviews(url);
    if (idx == -1) {
      idx = views.length;
    }
    while (views.length < idx + 1) {
      let blank = this.webviews_blank;
      if (blank.length == 0) {
        await this.app.commands.executeCommandById("webviewer:open");
        await this.delay(3e3);
        blank = this.webviews_blank;
      }
      if (blank.length == 0) {
        return null;
      }
      await blank[0].webview.executeJavaScript(`
                window.location.href = '${url}';
            `);
      await blank[0].webview.setAttr("src", url);
      await this.delay(3e3);
      views = this.get_webviews(url);
      break;
    }
    if (views.length >= idx + 1) {
      return views[idx];
    } else {
      return null;
    }
  }
  async set_homepage(url = this.homepage, idx = 0) {
    this.view = await this.open_homepage(url, idx);
  }
  async source(view = this.view) {
    if (!view || !view.webview) {
      return "";
    }
    let html = await view.webview.executeJavaScript(`document.documentElement.outerHTML`);
    return html;
  }
  async document(view = this.view) {
    let html = await this.source(this.view);
    let doc = this.html_to_dom(html);
    return doc;
  }
  html_to_dom(html) {
    let parser = new DOMParser();
    let dom = parser.parseFromString(html, "text/html");
    return dom;
  }
  html_to_markdown(html) {
    let doc = this.html_to_dom(html);
    function tree(node, level = 1) {
      node.childNodes.forEach((child) => {
        tree(child, level + 1);
      });
    }
    tree(doc);
    function convertNode(node) {
      let markdown = "";
      if (node.nodeType === 1) {
        switch (node.nodeName.toLowerCase()) {
          case "h1":
          case "h2":
          case "h3":
          case "h4":
          case "h5":
          case "h6":
            let level = parseInt(node.nodeName.charAt(1), 10);
            markdown += "#".repeat(level) + " " + node.textContent.trim() + "\n\n";
            break;
          case "p":
            markdown += node.textContent.trim() + "\n\n";
            break;
          case "ul":
          case "ol":
            node.childNodes.forEach((child) => {
              if (child.nodeName.toLowerCase() === "li") {
                markdown += "- " + child.textContent.trim() + "\n";
              }
            });
            markdown += "\n";
            break;
          case "a":
            markdown += `[${node.textContent.trim()}](${node.getAttribute("href")})`;
            break;
          case "img":
            markdown += `![${node.getAttribute("alt") || "Image"}](${node.getAttribute("src")})`;
            break;
          case "strong":
          case "b":
            markdown += `**${node.textContent.trim()}**`;
            break;
          case "em":
          case "i":
            markdown += `*${node.textContent.trim()}*`;
            break;
          case "blockquote":
            markdown += "> " + node.textContent.trim() + "\n\n";
            break;
          case "pre":
            if (node.firstChild && node.firstChild.nodeName.toLowerCase() === "code") {
              let code = node.firstChild.textContent.trim();
              markdown += "```\n" + code + "\n```\n\n";
            }
            break;
          case "code":
            markdown += "`" + node.textContent + "`";
            break;
          case "#text":
            markdown += node.textContent.trim();
            break;
          default:
            node.childNodes.forEach((child) => {
              markdown += convertNode(child);
            });
        }
      } else if (node.nodeType === 3) {
        markdown += node.textContent.trim();
      }
      return markdown;
    }
    let md = convertNode(doc.body);
    return md;
  }
  async delay(ms) {
    return new Promise((resolve) => {
      setTimeout(resolve, ms);
    });
  }
  setActiveLeaf(view = this.view) {
    if (!view) {
      return;
    }
    ;
    let leaf = this.allLeaves.filter((x) => x.view == view)[0];
    if (!leaf) {
      return;
    }
    ;
    this.app.workspace.setActiveLeaf(leaf);
  }
  get_safe_ctx(ctx) {
    let safeCtx = JSON.stringify(ctx.replace(/`/g, "~").replace(/\$/g, "\uFFE5"));
    return safeCtx;
  }
  async paste_msg(ctx) {
  }
  async click_btn_of_send() {
  }
  async number_of_receive_msg() {
    return 0;
  }
  async get_last_content() {
    return "";
  }
  async request(ctx, timeout = 60) {
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let ctx2 = await this.get_last_content();
      new import_obsidian2.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return ctx2;
    } else {
      new import_obsidian2.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      console.log("Doubao N:", N1, N2);
      return null;
    }
  }
};

// src/LLM/DeepSeek.ts
var DeepSeek = class extends BaseWebViewer {
  constructor(app, homepage = "https://chat.deepseek.com") {
    super(app, homepage, "DeepSeek");
  }
  async click_btn_of_send() {
    let view = this.view;
    let msg = await this.view.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('div[role="button"]:not(.ds-button)');
				let ariaDisabled = button.getAttribute('aria-disabled');
				while(!ariaDisabled || ariaDisabled == 'false'){
					button.click();
					await delay(100);
					button = document.querySelector('div[role="button"]:not(.ds-button)');
					ariaDisabled =  button.getAttribute('aria-disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					let item = document.querySelector('textarea[id="chat-input"]');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.querySelector('div[role="button"]:not(.ds-button)');
						let ariaDisabled = button.getAttribute('aria-disabled');
						if (!ariaDisabled || ariaDisabled == 'false') {
							console.log('\u590D\u5236\u6210\u529F');
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".ds-markdown");
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let btns = document.querySelectorAll('.ds-flex>.ds-flex >.ds-icon-button:nth-child(4)');
				let N = parseInt(btns.length);
				return N;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async number_of_contents() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items.length;
  }
  async request(ctx, timeout = 60) {
    this.setActiveLeaf();
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    let N2 = await this.number_of_receive_msg();
    await this.click_btn_of_send();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let ctx2 = await this.get_last_response();
      new import_obsidian3.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return ctx2;
    } else {
      new import_obsidian3.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      return null;
    }
  }
};

// src/LLM/Doubao.ts
var import_obsidian4 = require("obsidian");
var Doubao = class extends BaseWebViewer {
  constructor(app, homepage = "https://www.doubao.com") {
    super(app, homepage, "\u8C46\u5305");
  }
  async click_btn_of_send() {
    let msg = await this.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.getElementById('flow-end-msg-send');
				let ariaDisabled = button.getAttribute('aria-disabled');
				while(ariaDisabled=='false'){
					button.click();
					await delay(100);
					button = document.getElementById('flow-end-msg-send');
					ariaDisabled = button.getAttribute('aria-disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					console.log('hrer',document)
					let item = document.querySelector('textarea[data-testid="chat_input_input"]');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.getElementById('flow-end-msg-send');
						let ariaDisabled = button.getAttribute('aria-disabled');
						if (ariaDisabled == 'false') {
							console.log('\u590D\u5236\u6210\u529F');
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll('div[data-testid="receive_message"]');
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let items = document.querySelectorAll('div[data-testid="receive_message"]');
				if(items.length==0){
					return 0;
				}
				item = items[items.length-1]
				if(item.querySelectorAll('button[data-testid="message_action_like"]').length==0){
					msg = items.length-1;
				}else{
					msg = items.length;
				}
				return msg;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async copy_last_content() {
    let msg = await this.webview.executeJavaScript(
      `
			btns = document.querySelectorAll('.segment-actions-content-btn');
			btns = Array.from(btns).filter(x=>x.textContent=='\u590D\u5236');
			if(btns.length>0){
				btns[btns.length-1].click();
				msg = true;
			}else{
				msg = false;
			}
			`
    );
    return msg;
  }
  async number_of_contents() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items.length;
  }
  async get_last_content() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".message-content");
    return items[items.length - 1].textContent;
  }
  async request(ctx, timeout = 60) {
    let view = this.view;
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let doc = await this.document();
      let items = doc.querySelectorAll(".message-content");
      N2 = await this.number_of_contents();
      new import_obsidian4.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      return items[N2 - 1].textContent;
    } else {
      new import_obsidian4.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      console.log("Doubao N:", N1, N2);
      return null;
    }
  }
};

// src/LLM/Kimi.ts
var import_obsidian5 = require("obsidian");
var Kimi = class extends BaseWebViewer {
  constructor(app, homepage = "https://kimi.moonshot.cn/") {
    super(app, homepage, "Kimi");
  }
  async new_chat() {
    let msg = await this.view.webview.executeJavaScript(
      `
			document.querySelector('.new-chat-btn').click()
			`
    );
    return msg;
  }
  async click_btn_of_send() {
    let msg = await this.view.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('.send-button');
				let ariaDisabled = button.parentElement.classList.contains('disabled');
				while(!ariaDisabled){
					button.click();
					await delay(100);
					button = document.querySelector('.send-button');
					ariaDisabled = button.parentElement.classList.contains('disabled');
				}
			}
			click();
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					let item = document.querySelector('.chat-input-editor-container').querySelector('.chat-input-editor');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let button = document.querySelector('.send-button');;
						let ariaDisabled = button.parentElement.classList.contains('disabled');
						if (ariaDisabled == false) {
							break;
						} else {
							await delay(100);
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async get_last_response() {
    let doc = await this.document();
    let items = doc.querySelectorAll(".markdown-container");
    if (items.length < 1) {
      return null;
    }
    let item = items[items.length - 1];
    let ctx = this.html_to_markdown(item.outerHTML);
    return ctx;
  }
  async number_of_copy_btns() {
    let doc = await this.document();
    let btns = doc.querySelectorAll('svg[name="Like"]');
    return btns.length;
  }
  async copy_last_content() {
    let msg = await this.webview.executeJavaScript(
      `
			btns = document.querySelectorAll('.segment-actions-content-btn');
			btns = Array.from(btns).filter(x=>x.textContent=='\u590D\u5236');
			if(btns.length>0){
				btns[btns.length-1].click();
				msg = true;
			}else{
				msg = false;
			}
			`
    );
    return msg;
  }
  async get_last_content() {
    var _a;
    let doc = await this.document();
    let chats = doc.getElementsByClassName("chat-content-item");
    return (_a = chats[chats.length - 1].querySelector(".segment-content-box")) == null ? void 0 : _a.textContent;
  }
  async number_of_receive_msg() {
    let doc = await this.document();
    let btns = doc.querySelectorAll('svg[name="Like"]');
    return btns.length;
  }
  async request(ctx, timeout = 60) {
    var _a;
    let N1 = await this.number_of_receive_msg();
    await this.paste_msg(ctx);
    await this.delay(1e3);
    await this.click_btn_of_send();
    let N2 = await this.number_of_receive_msg();
    while (N2 != N1 + 1) {
      await this.delay(1e3);
      N2 = await this.number_of_receive_msg();
      timeout = timeout - 1;
      if (timeout < 0) {
        break;
      }
    }
    if (N2 == N1 + 1) {
      let doc = await this.document();
      let chats = doc.getElementsByClassName("chat-content-item");
      new import_obsidian5.Notice(`${this.name} \u8BF4\u4E86\u70B9\u4EC0\u4E48`);
      let res = (_a = chats[chats.length - 1].querySelector(".segment-content-box")) == null ? void 0 : _a.textContent;
      if (res == null ? void 0 : res.contains("\u5F53\u524D\u957F\u6587\u672C\u5BF9\u8BDD\u5DF2\u8FBE20\u8F6E")) {
        await this.new_chat();
        return this.request(ctx);
      } else {
        return res;
      }
    } else {
      let res = await this.get_last_content();
      if (res == null ? void 0 : res.contains("\u5F53\u524D\u957F\u6587\u672C\u5BF9\u8BDD\u5DF2\u8FBE20\u8F6E")) {
        await this.new_chat();
        return this.request(ctx);
      }
      new import_obsidian5.Notice(`${this.name} \u4E0D\u8BF4\u8BDD`);
      return null;
    }
  }
};

// src/commands.ts
var cmd_refresh_llms = (plugin) => ({
  id: "cmd_refresh_llms",
  name: plugin.strings.cmd_refresh_llms,
  callback: async () => {
    let views = plugin.basewv.views;
    plugin.llms = plugin.llms.slice(0, 0);
    for (let view of views) {
      if (view.url.startsWith(plugin.deepseek.homepage)) {
        let llm = new DeepSeek(plugin.app);
        llm.view = view;
        plugin.llms.push(llm);
      } else if (view.url.startsWith(plugin.doubao.homepage)) {
        let llm = new Doubao(plugin.app);
        llm.view = view;
        plugin.llms.push(llm);
      } else if (view.url.startsWith(plugin.kimi.homepage)) {
        let llm = new Kimi(plugin.app);
        llm.view = view;
        plugin.llms.push(llm);
      }
    }
  }
});
var cmd_open_new_llm = (plugin) => ({
  id: "cmd_open_new_llm",
  name: plugin.strings.cmd_open_new_llm,
  callback: async () => {
    let hpage = await plugin.easyapi.dialog_suggest(
      plugin.basellms.map((x) => x.name),
      plugin.basellms.map((x) => x.homepage)
    );
    if (hpage) {
      await plugin.basewv.open_homepage(hpage, -1);
    }
  }
});
var commandBuilders = [];
var commandBuildersDesktop = [
  cmd_refresh_llms,
  cmd_open_new_llm
];
function addCommands(plugin) {
  commandBuilders.forEach((c) => {
    plugin.addCommand(c(plugin));
  });
  if (plugin.app.isMobile == false) {
    commandBuildersDesktop.forEach((c) => {
      plugin.addCommand(c(plugin));
    });
  }
}

// src/LLM/Yuanbao.ts
var Yuanbao = class extends BaseWebViewer {
  constructor(app, homepage = "https://yuanbao.tencent.com/chat") {
    super(app, homepage, "\u5143\u5B9D");
  }
  async new_chat() {
    let msg = await this.view.webview.executeJavaScript(
      `
			document.querySelector('.yb-common-nav__new-chat').click()
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					
					let item = document.querySelector('.chat-input-editor  .ql-editor.ql-blank');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let item = document.querySelector('.chat-input-editor').querySelector('.ql-editor.ql-blank')
						if(item){
							await delay(100);
						}else{
							break;
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async click_btn_of_send() {
    let msg = await this.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('a[class^="style__send-btn"]');
				while(!button){
					await delay(100);
					button = document.querySelector('a[class^="style__send-btn"]');
				}
				button.click();
			}
			click();
			`
    );
    return msg;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let btns = document.querySelectorAll('.agent-chat__toolbar > .agent-chat__toolbar__right > .agent-chat__toolbar__item:nth-child(5)');
				let N = parseInt(btns.length);
				return N;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async get_last_content() {
    let doc = await this.document();
    let items = Array.from(doc.querySelectorAll(".hyc-content-md .hyc-common-markdown")).filter(
      (el) => {
        var _a, _b;
        return !((_b = (_a = el.parentElement) == null ? void 0 : _a.parentElement) == null ? void 0 : _b.classList.contains("hyc-component-reasoner__think-content"));
      }
    );
    let ctx = this.html_to_markdown(items[items.length - 1].outerHTML);
    return ctx;
  }
};

// src/LLM/ChatGPT.ts
var ChatGPT = class extends BaseWebViewer {
  constructor(app, homepage = "https://chatgpt.com") {
    super(app, homepage, "ChatGPT");
  }
  async new_chat() {
    let msg = await this.view.webview.executeJavaScript(
      `
			document.querySelector('a[data-testid="create-new-chat-button"]').click()
			`
    );
    return msg;
  }
  async paste_msg(ctx) {
    let msg;
    ctx = this.get_safe_ctx(ctx);
    const maxRetries = 1;
    for (let attempt = 0; attempt < maxRetries; attempt++) {
      msg = await this.webview.executeJavaScript(
        `
				function delay(ms) {
					return new Promise(resolve => {
					setTimeout(resolve, ms);
					});
				}

				// \u5C06\u5F02\u6B65\u903B\u8F91\u5C01\u88C5\u5230\u4E00\u4E2A async \u51FD\u6570\u4E2D
				async function insertTextAndSend(ctx) {
					// \u83B7\u53D6 textarea \u5E76\u805A\u7126
					
					ctx = '\u4F60\u662F\u8C01'
					let item = document.querySelector('div#prompt-textarea.ProseMirror');
					item.focus();

					// \u63D2\u5165\u6587\u672C
					setTimeout(() => {
						document.execCommand('insertText', false, ctx);
					}, 1000);
					let i = 100;
					// \u7B49\u5F85\u6309\u94AE\u53EF\u70B9\u51FB
					while (true) {
						let item = document.querySelector('button#composer-submit-button')
						if(!item){
							await delay(100);
						}else{
							break;
						}
						i = i-1;
						if(i<0){break}
					}
				}

				// \u8C03\u7528 async \u51FD\u6570
				insertTextAndSend(\`${ctx}\`);
				`
      );
      if (msg) {
        break;
      }
      await this.delay(1e3);
    }
    return msg;
  }
  async click_btn_of_send() {
    let msg = await this.webview.executeJavaScript(
      `
			function delay(ms) {
				return new Promise(resolve => {
					setTimeout(resolve, ms);
				});
			}
			async function click(){
				let button = document.querySelector('button#composer-submit-button');
				while(!button){
					await delay(100);
					button = document.querySelector('button#composer-submit-button');
				}
				button.click();
			}
			click();
			`
    );
    return msg;
  }
  async number_of_receive_msg() {
    let msg = await this.webview.executeJavaScript(
      `
			function number_of_receive_msg(){
				let btns = document.querySelectorAll('div.flex.justify-start span[data-state="closed"]:nth-child(5)');
				let N = parseInt(btns.length);
				return N;
			}
			number_of_receive_msg()
			`
    );
    return msg;
  }
  async get_last_content() {
    let doc = await this.document();
    let items = Array.from(doc.querySelectorAll('div[data-message-author-role="assistant"] div.markdown'));
    let ctx = this.html_to_markdown(items[items.length - 1].outerHTML);
    return ctx;
  }
};

// main.ts
var WebViewLLMPlugin = class extends import_obsidian6.Plugin {
  async onload() {
    this.app.workspace.onLayoutReady(
      async () => {
        await this._onload_();
      }
    );
  }
  get easyapi() {
    var _a;
    return (_a = this.app.plugins.plugins["easyapi"]) == null ? void 0 : _a.api;
  }
  async _onload_() {
    this.strings = new Strings();
    await this.loadSettings();
    this.llms = [];
    this.deepseek = new DeepSeek(this.app);
    this.doubao = new Doubao(this.app);
    this.kimi = new Kimi(this.app);
    this.yuanbao = new Yuanbao(this.app);
    this.chatgpt = new ChatGPT(this.app);
    this.basellms = [
      this.yuanbao,
      this.chatgpt,
      this.kimi,
      this.doubao,
      this.deepseek
    ];
    this.basewv = new BaseWebViewer(this.app, "");
    addCommands(this);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvc3RyaW5ncy50cyIsICJzcmMvc2V0dGluZy50cyIsICJzcmMvTExNL0RlZXBTZWVrLnRzIiwgInNyYy9MTE0vQmFzZVdlYlZpZXdlci50cyIsICJzcmMvTExNL0RvdWJhby50cyIsICJzcmMvTExNL0tpbWkudHMiLCAic3JjL2NvbW1hbmRzLnRzIiwgInNyYy9MTE0vWXVhbmJhby50cyIsICJzcmMvTExNL0NoYXRHUFQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7Tm90aWNlLCBQbHVnaW4sIFRGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHsgU3RyaW5ncyB9IGZyb20gJ3NyYy9zdHJpbmdzJztcclxuaW1wb3J0IHtNeVNldHRpbmdzLFdlYlZpZXdMTE1TZXR0aW5nVGFiLERFRkFVTFRfU0VUVElOR1N9IGZyb20gJ3NyYy9zZXR0aW5nJ1xyXG5cclxuaW1wb3J0IHtEZWVwU2Vla30gZnJvbSAnc3JjL0xMTS9EZWVwU2VlaydcclxuaW1wb3J0IHtEb3ViYW99IGZyb20gJ3NyYy9MTE0vRG91YmFvJ1xyXG5pbXBvcnQge0tpbWl9IGZyb20gJ3NyYy9MTE0vS2ltaSdcclxuaW1wb3J0IHtCYXNlV2ViVmlld2VyfSBmcm9tICdzcmMvTExNL0Jhc2VXZWJWaWV3ZXInXHJcbmltcG9ydCB7IGFkZENvbW1hbmRzIH0gZnJvbSAnc3JjL2NvbW1hbmRzJztcclxuaW1wb3J0IHsgWXVhbmJhbyB9IGZyb20gJ3NyYy9MTE0vWXVhbmJhbyc7XHJcbmltcG9ydCB7IENoYXRHUFQgfSBmcm9tICdzcmMvTExNL0NoYXRHUFQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2ViVmlld0xMTVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0c3RyaW5ncyA6IFN0cmluZ3M7XHJcblx0c2V0dGluZ3M6IE15U2V0dGluZ3M7XHJcblx0eWFtbDogc3RyaW5nO1xyXG5cdGRpYWxvZ19zdWdnZXN0OiBGdW5jdGlvblxyXG5cdGRpYWxvZ19wcm9tcHQ6IEZ1bmN0aW9uXHJcblxyXG5cdGxsbXM6IEFycmF5PEJhc2VXZWJWaWV3ZXI+O1xyXG5cdGJhc2VsbG1zOiBBcnJheTxCYXNlV2ViVmlld2VyPjtcclxuXHJcblx0YmFzZXd2OiBCYXNlV2ViVmlld2VyO1xyXG5cdGRlZXBzZWVrOiBEZWVwU2VlaztcclxuXHRkb3ViYW86IERvdWJhbztcclxuXHRraW1pOiBLaW1pO1xyXG5cdHl1YW5iYW86IFl1YW5iYW87XHJcblx0Y2hhdGdwdDogQ2hhdEdQVDtcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeShcclxuXHRcdFx0YXN5bmMoKT0+e1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuX29ubG9hZF8oKVxyXG5cdFx0XHR9XHJcblx0XHQpXHJcblx0fVxyXG5cclxuXHRnZXQgZWFzeWFwaSgpe1xyXG5cdFx0cmV0dXJuICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMucGx1Z2luc1snZWFzeWFwaSddPy5hcGk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBfb25sb2FkXygpIHtcclxuXHRcdC8vIFx1NTIxRFx1NTlDQlx1NTlDQlx1NTMxNlx1RkYwQ1x1NTJBMFx1OEY3RFx1NEUyRFx1ODJGMVx1NjU4N1x1NTQ4Q1x1NTNDMlx1NjU3MFxyXG5cdFx0dGhpcy5zdHJpbmdzID0gbmV3IFN0cmluZ3MoKTtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cclxuXHRcdHRoaXMubGxtcyA9IFtdO1xyXG5cdFx0dGhpcy5kZWVwc2VlayA9IG5ldyBEZWVwU2Vlayh0aGlzLmFwcCk7XHJcblx0XHR0aGlzLmRvdWJhbyA9IG5ldyBEb3ViYW8odGhpcy5hcHApO1xyXG5cdFx0dGhpcy5raW1pID0gbmV3IEtpbWkodGhpcy5hcHApO1xyXG5cdFx0dGhpcy55dWFuYmFvID0gbmV3IFl1YW5iYW8odGhpcy5hcHApO1xyXG5cdFx0dGhpcy5jaGF0Z3B0ID0gbmV3IENoYXRHUFQodGhpcy5hcHApXHJcblx0XHR0aGlzLmJhc2VsbG1zID0gW1xyXG5cdFx0XHR0aGlzLnl1YW5iYW8sXHJcblx0XHRcdHRoaXMuY2hhdGdwdCxcclxuXHRcdFx0dGhpcy5raW1pLFxyXG5cdFx0XHR0aGlzLmRvdWJhbyxcclxuXHRcdFx0dGhpcy5kZWVwc2VlayxcclxuXHRcdF1cclxuXHRcdHRoaXMuYmFzZXd2ID0gbmV3IEJhc2VXZWJWaWV3ZXIodGhpcy5hcHAsJycpO1xyXG5cclxuXHRcdFxyXG5cdFx0Ly8gXHU2REZCXHU1MkEwXHU1NDdEXHU0RUU0XHJcblx0XHRhZGRDb21tYW5kcyh0aGlzKTtcclxuXHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdFxyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblxyXG5cclxufVxyXG4iLCAiXHJcbmV4cG9ydCBjbGFzcyBTdHJpbmdze1xyXG4gICAgbGFuZ3VhZ2U6c3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBsZXQgbGFuZyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2UnKTtcclxuICAgICAgICBpZihsYW5nKXtcclxuICAgICAgICAgICAgdGhpcy5sYW5ndWFnZSA9IGxhbmc7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMubGFuZ3VhZ2UgPSAnZW4nO1xyXG4gICAgICAgIH1cclxuXHR9XHJcblxyXG4gICAgZ2V0IGNtZF9yZWZyZXNoX2xsbXMoKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdTUyMzdcdTY1QjBcdTdGQTRcdTdFQzQnXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAnUmVmcmVzaCBsbG1zJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNtZF9vcGVuX25ld19sbG0oKXtcclxuICAgICAgICBpZih0aGlzLmxhbmd1YWdlPT0nemgnKXtcclxuICAgICAgICAgICAgcmV0dXJuICdcdTYyNTNcdTVGMDBcdTY1QjBBSSdcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuICdPcGVuIG5ldyBsbG0nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGxldCBzdHJpbmdzID0gbmV3IFN0cmluZ3MoKTsiLCAiaW1wb3J0IHsgXHJcblx0QXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLFBsdWdpblxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCBXZWJWaWV3TExNUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNeVNldHRpbmdzIHtcclxuXHRzdHJpY3RfbW9kZTogYm9vbGVhbjtcclxuXHR2YXVsdERpcjpzdHJpbmc7XHJcblx0ZGVlcHNlZWtGb2xkZXI6IHN0cmluZztcclxuXHRkb3ViYW9Gb2xkZXI6IHN0cmluZztcclxuXHRraW1pRm9sZGVyOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVNldHRpbmdzID0ge1xyXG5cdHN0cmljdF9tb2RlOmZhbHNlLFxyXG5cdHZhdWx0RGlyOicnXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXZWJWaWV3TExNU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogV2ViVmlld0xMTVBsdWdpbjtcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBXZWJWaWV3TExNUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGdldFNldHRpbmdWYWx1ZShmaWVsZDoga2V5b2YgTXlTZXR0aW5ncykge1xyXG5cdFx0cmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzW2ZpZWxkXTtcclxuXHR9XHJcblxyXG5cdGFkZF90b2dnbGUobmFtZTpzdHJpbmcsZGVzYzpzdHJpbmcsZmllbGQ6a2V5b2YgTXlTZXR0aW5ncyl7XHJcblx0XHRsZXQge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblx0XHRsZXQgdmFsdWUgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgYW55KVtmaWVsZF0gYXMgYm9vbGVhbjtcclxuXHRcdGxldCBpdGVtID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpICBcclxuXHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0LnNldERlc2MoZGVzYylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodmFsdWUpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTpuZXZlcikgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NbZmllbGRdID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0cmV0dXJuIGl0ZW07XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUodGhpcy5wbHVnaW4uc3RyaW5ncy5zZXR0aW5nX3ZhdWx0X2RpcilcclxuXHRcdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudmF1bHREaXIpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnZhdWx0RGlyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHR0aGlzLmFkZF90b2dnbGUoXHJcblx0XHRcdHRoaXMucGx1Z2luLnN0cmluZ3Muc2V0dGluZ19zdHJpY3RfbW9kZSxcclxuXHRcdFx0dGhpcy5wbHVnaW4uc3RyaW5ncy5zZXR0aW5nX3N0cmljdF9tb2RlX2Rlc2MsXHJcblx0XHRcdCdzdHJpY3RfbW9kZSdcclxuXHRcdCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBCYXNlV2ViVmlld2VyIH0gZnJvbSAnLi9CYXNlV2ViVmlld2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEZWVwU2VlayBleHRlbmRzIEJhc2VXZWJWaWV3ZXIge1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLGhvbWVwYWdlPSdodHRwczovL2NoYXQuZGVlcHNlZWsuY29tJykge1xyXG5cdFx0c3VwZXIoYXBwLCBob21lcGFnZSwnRGVlcFNlZWsnKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNsaWNrX2J0bl9vZl9zZW5kKCkge1xyXG5cdFx0bGV0IHZpZXcgPSB0aGlzLnZpZXc7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgKHRoaXMudmlldyBhcyBhbnkpLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRhc3luYyBmdW5jdGlvbiBjbGljaygpe1xyXG5cdFx0XHRcdGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbcm9sZT1cImJ1dHRvblwiXTpub3QoLmRzLWJ1dHRvbiknKTtcclxuXHRcdFx0XHRsZXQgYXJpYURpc2FibGVkID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHRcdHdoaWxlKCFhcmlhRGlzYWJsZWQgfHwgYXJpYURpc2FibGVkID09ICdmYWxzZScpe1xyXG5cdFx0XHRcdFx0YnV0dG9uLmNsaWNrKCk7XHJcblx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0YnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3JvbGU9XCJidXR0b25cIl06bm90KC5kcy1idXR0b24pJyk7XHJcblx0XHRcdFx0XHRhcmlhRGlzYWJsZWQgPSAgYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRjbGljaygpO1xyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgcGFzdGVfbXNnKGN0eDpzdHJpbmcpIHtcclxuXHRcdGxldCBtc2c7XHJcblx0XHRjdHggPSB0aGlzLmdldF9zYWZlX2N0eChjdHgpO1xyXG5cdFx0Y29uc3QgbWF4UmV0cmllcyA9IDE7IC8vIFx1NjcwMFx1NTkyN1x1OTFDRFx1OEJENVx1NkIyMVx1NjU3MFxyXG5cdFx0Zm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcclxuXHRcdFx0bXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRcdGBcclxuXHRcdFx0XHRmdW5jdGlvbiBkZWxheShtcykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1NUMwNlx1NUYwMlx1NkI2NVx1OTAzQlx1OEY5MVx1NUMwMVx1ODhDNVx1NTIzMFx1NEUwMFx1NEUyQSBhc3luYyBcdTUxRkRcdTY1NzBcdTRFMkRcclxuXHRcdFx0XHRhc3luYyBmdW5jdGlvbiBpbnNlcnRUZXh0QW5kU2VuZChjdHgpIHtcclxuXHRcdFx0XHRcdC8vIFx1ODNCN1x1NTNENiB0ZXh0YXJlYSBcdTVFNzZcdTgwNUFcdTcxMjZcclxuXHRcdFx0XHRcdGxldCBpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWFbaWQ9XCJjaGF0LWlucHV0XCJdJyk7XHJcblx0XHRcdFx0XHRpdGVtLmZvY3VzKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gXHU2M0QyXHU1MTY1XHU2NTg3XHU2NzJDXHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFRleHQnLCBmYWxzZSwgY3R4KTtcclxuXHRcdFx0XHRcdH0sIDEwMDApO1xyXG5cdFx0XHRcdFx0bGV0IGkgPSAxMDA7XHJcblx0XHRcdFx0XHQvLyBcdTdCNDlcdTVGODVcdTYzMDlcdTk0QUVcdTUzRUZcdTcwQjlcdTUxRkJcclxuXHRcdFx0XHRcdHdoaWxlICh0cnVlKSB7XHJcblx0XHRcdFx0XHRcdGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbcm9sZT1cImJ1dHRvblwiXTpub3QoLmRzLWJ1dHRvbiknKTtcclxuXHRcdFx0XHRcdFx0bGV0IGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnKTtcclxuXHRcdFx0XHRcdFx0aWYgKCFhcmlhRGlzYWJsZWQgfHwgYXJpYURpc2FibGVkID09ICdmYWxzZScpIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnXHU1OTBEXHU1MjM2XHU2MjEwXHU1MjlGJyk7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpID0gaS0xO1xyXG5cdFx0XHRcdFx0XHRpZihpPDApe2JyZWFrfVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU4QzAzXHU3NTI4IGFzeW5jIFx1NTFGRFx1NjU3MFxyXG5cdFx0XHRcdGluc2VydFRleHRBbmRTZW5kKFxcYCR7Y3R4fVxcYCk7XHJcblx0XHRcdFx0YFxyXG5cdFx0XHQpO1xyXG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTYyMTBcdTUyOUZcdTdDOThcdThEMzRcclxuXHRcdFx0aWYgKG1zZykge1xyXG5cdFx0XHRcdGJyZWFrOyAvLyBcdTU5ODJcdTY3OUNcdTYyMTBcdTUyOUZcdUZGMENcdTkwMDBcdTUxRkFcdTkxQ0RcdThCRDVcdTVGQUFcdTczQUZcclxuXHRcdFx0fVxyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApOyAvLyBcdTdCNDlcdTVGODVcdTRFMDBcdTZCQjVcdTY1RjZcdTk1RjRcdTU0MEVcdTkxQ0RcdThCRDVcclxuXHRcdH1cclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXRfbGFzdF9yZXNwb25zZSgpIHtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgaXRlbXMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLmRzLW1hcmtkb3duJyk7XHJcblx0XHRpZihpdGVtcy5sZW5ndGg8MSl7cmV0dXJuIG51bGx9XHJcblx0XHRcclxuXHRcdGxldCBpdGVtID0gaXRlbXNbaXRlbXMubGVuZ3RoLTFdXHJcblx0XHRsZXQgY3R4ID0gdGhpcy5odG1sX3RvX21hcmtkb3duKGl0ZW0ub3V0ZXJIVE1MKTtcclxuXHRcdHJldHVybiBjdHg7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKSB7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIG51bWJlcl9vZl9yZWNlaXZlX21zZygpe1xyXG5cdFx0XHRcdGxldCBidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRzLWZsZXg+LmRzLWZsZXggPi5kcy1pY29uLWJ1dHRvbjpudGgtY2hpbGQoNCknKTtcclxuXHRcdFx0XHRsZXQgTiA9IHBhcnNlSW50KGJ0bnMubGVuZ3RoKTtcclxuXHRcdFx0XHRyZXR1cm4gTjtcclxuXHRcdFx0fVxyXG5cdFx0XHRudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbnVtYmVyX29mX2NvbnRlbnRzKCkge1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcubWVzc2FnZS1jb250ZW50JylcclxuXHRcdHJldHVybiBpdGVtcy5sZW5ndGg7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZXF1ZXN0KGN0eDpzdHJpbmcsdGltZW91dD02MCkge1xyXG5cdFx0dGhpcy5zZXRBY3RpdmVMZWFmKCk7XHJcblx0XHRsZXQgTjEgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMucGFzdGVfbXNnKGN0eCk7XHJcblx0XHRsZXQgTjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHJcblx0XHRhd2FpdCB0aGlzLmNsaWNrX2J0bl9vZl9zZW5kKCk7XHJcblxyXG5cdFx0d2hpbGUoTjIhPU4xKzEpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xyXG5cdFx0XHROMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcdHRpbWVvdXQgPSB0aW1lb3V0LTE7XHJcblx0XHRcdGlmKHRpbWVvdXQ8MCl7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmKE4yPT1OMSsxKXtcclxuXHRcdFx0bGV0IGN0eCA9IGF3YWl0IHRoaXMuZ2V0X2xhc3RfcmVzcG9uc2UoKTtcclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1OEJGNFx1NEU4Nlx1NzBCOVx1NEVDMFx1NEU0OGApXHJcblx0XHRcdHJldHVybiBjdHg7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1NEUwRFx1OEJGNFx1OEJERGApXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiXHJcbmltcG9ydCB7IEFwcCwgVmlldywgV29ya3NwYWNlTGVhZiwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNlV2ViVmlld2VyIHtcclxuICAgIGFwcDogQXBwO1xyXG4gICAgaG9tZXBhZ2U6IGFueTtcclxuICAgIHZpZXc6IFZpZXcgfCBudWxsOyAvLyBEZWNsYXJlIHRoZSB0eXBlIG9mIHZpZXdcclxuICAgIG5hbWU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaG9tZXBhZ2U6IHN0cmluZyA9ICcnLCBuYW1lOnN0cmluZz0nJykge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuaG9tZXBhZ2UgPSBob21lcGFnZTtcclxuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmdldF93ZWJ2aWV3cyh0aGlzLmhvbWVwYWdlKVswXTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhbGxMZWF2ZXMoKSB7XHJcbiAgICAgICAgbGV0IGxlYXZlczogQXJyYXk8V29ya3NwYWNlTGVhZj4gPSBbXTtcclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcyh4ID0+IHtcclxuICAgICAgICAgICAgbGVhdmVzLnB1c2goeCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGxlYXZlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWxsVmlld3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxsTGVhdmVzLm1hcChcclxuICAgICAgICAgICAgeCA9PiB4LnZpZXdcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU2MjQwXHU2NzA5IHdlYnZpZXcgXHU2ODA3XHU3QjdFXHJcbiAgICBnZXQgbGVhdmVzKCkge1xyXG4gICAgICAgIGxldCBsZWF2ZXMgPSB0aGlzLmFsbExlYXZlcy5maWx0ZXIoXHJcbiAgICAgICAgICAgIHggPT4gKHgudmlldyBhcyBhbnkpLndlYnZpZXdcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBsZWF2ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU2MjQwXHU2NzA5IHdlYnZpZXcgXHU4OUM2XHU1NkZFXHJcbiAgICBnZXQgdmlld3MoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5sZWF2ZXMubWFwKFxyXG4gICAgICAgICAgICB4ID0+IHgudmlld1xyXG4gICAgICAgIClcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0IGFjdGl2ZUxlYWYoKXtcclxuICAgICAgICBsZXQgbGVhdmVzID0gdGhpcy5sZWF2ZXMuZmlsdGVyKFxyXG4gICAgICAgICAgICB4ID0+ICh4IGFzIGFueSkuY29udGFpbmVyRWwuY2xhc3NOYW1lLmNvbnRhaW5zKCdtb2QtYWN0aXZlJylcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmKGxlYXZlcy5sZW5ndGghPTEpe1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIGxlYXZlc1swXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdGl2ZVZpZXcoKXtcclxuICAgICAgICBsZXQgbGVhZiA9IHRoaXMuYWN0aXZlTGVhZjtcclxuICAgICAgICBpZihsZWFmKXtcclxuICAgICAgICAgICAgcmV0dXJuIGxlYWYudmlldztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCB3ZWJ2aWV3c19ibGFuaygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRfd2Vidmlld3MoJ2Fib3V0OmJsYW5rJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHdlYnZpZXcoKXtcclxuICAgICAgICBpZih0aGlzLnZpZXcpe1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMudmlldyBhcyBhbnkpLndlYnZpZXc7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTYzMDdcdTVCOUFcdTY4MDdcdTdCN0VcclxuICAgIGdldF93ZWJ2aWV3cyhwcmVmaXg6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdzLmZpbHRlcihcclxuICAgICAgICAgICAgKHg6IGFueSkgPT4geC51cmwuc3RhcnRzV2l0aChwcmVmaXgpXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9wZW5faG9tZXBhZ2UodXJsID0gdGhpcy5ob21lcGFnZSwgaWR4ID0gMCkge1xyXG4gICAgICAgIGxldCB2aWV3cyA9IHRoaXMuZ2V0X3dlYnZpZXdzKHVybCk7XHJcbiAgICAgICAgaWYoaWR4PT0tMSl7XHJcbiAgICAgICAgICAgIGlkeCA9IHZpZXdzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKHZpZXdzLmxlbmd0aCA8IGlkeCArIDEpIHtcclxuICAgICAgICAgICAgbGV0IGJsYW5rID0gdGhpcy53ZWJ2aWV3c19ibGFuaztcclxuICAgICAgICAgICAgaWYgKGJsYW5rLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCAodGhpcy5hcHAgYXMgYW55KS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoJ3dlYnZpZXdlcjpvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDMwMDApO1xyXG4gICAgICAgICAgICAgICAgYmxhbmsgPSB0aGlzLndlYnZpZXdzX2JsYW5rO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChibGFuay5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IChibGFua1swXSBhcyBhbnkpLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoYFxyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnJHt1cmx9JztcclxuICAgICAgICAgICAgYCk7XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgKGJsYW5rWzBdIGFzIGFueSkud2Vidmlldy5zZXRBdHRyKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDMwMDApO1xyXG4gICAgICAgICAgICB2aWV3cyA9IHRoaXMuZ2V0X3dlYnZpZXdzKHVybCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmlld3MubGVuZ3RoID49IGlkeCArIDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZpZXdzW2lkeF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhc3luYyBzZXRfaG9tZXBhZ2UodXJsID0gdGhpcy5ob21lcGFnZSwgaWR4ID0gMCkge1xyXG4gICAgICAgIHRoaXMudmlldyA9IGF3YWl0IHRoaXMub3Blbl9ob21lcGFnZSh1cmwsIGlkeCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc291cmNlKHZpZXcgPSB0aGlzLnZpZXcpIHtcclxuICAgICAgICBpZiAoIXZpZXcgfHwgISh2aWV3IGFzIGFueSkud2VidmlldykgeyByZXR1cm4gJyc7IH1cclxuICAgICAgICBsZXQgaHRtbCA9IGF3YWl0ICh2aWV3IGFzIGFueSkud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTGApO1xyXG4gICAgICAgIHJldHVybiBodG1sO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRvY3VtZW50KHZpZXcgPSB0aGlzLnZpZXcpIHtcclxuICAgICAgICBsZXQgaHRtbCA9IGF3YWl0IHRoaXMuc291cmNlKHRoaXMudmlldyk7XHJcbiAgICAgICAgbGV0IGRvYyA9IHRoaXMuaHRtbF90b19kb20oaHRtbCk7XHJcbiAgICAgICAgcmV0dXJuIGRvYztcclxuICAgIH1cclxuXHJcbiAgICBodG1sX3RvX2RvbShodG1sOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xyXG4gICAgICAgIGxldCBkb20gPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGh0bWwsIFwidGV4dC9odG1sXCIpO1xyXG4gICAgICAgIHJldHVybiBkb207XHJcbiAgICB9XHJcblxyXG4gICAgaHRtbF90b19tYXJrZG93bihodG1sOnN0cmluZykge1xyXG4gICAgICAgIGxldCBkb2MgPSB0aGlzLmh0bWxfdG9fZG9tKGh0bWwpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB0cmVlKG5vZGU6YW55LCBsZXZlbCA9IDEpIHtcclxuICAgICAgICAgICAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkOmFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJlZShjaGlsZCwgbGV2ZWwgKyAxKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyZWUoZG9jKVxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbnZlcnROb2RlKG5vZGU6YW55KSB7XHJcbiAgICAgICAgICAgIGxldCBtYXJrZG93biA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkgeyAvLyBOb2RlLkVMRU1FTlRfTk9ERVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDFcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDJcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDNcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDRcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDVcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaDZcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxldmVsID0gcGFyc2VJbnQobm9kZS5ub2RlTmFtZS5jaGFyQXQoMSksIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gXCIjXCIucmVwZWF0KGxldmVsKSArIFwiIFwiICsgbm9kZS50ZXh0Q29udGVudC50cmltKCkgKyBcIlxcblxcblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gbm9kZS50ZXh0Q29udGVudC50cmltKCkgKyBcIlxcblxcblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm9sXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZDphbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImxpXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBcIi0gXCIgKyBjaGlsZC50ZXh0Q29udGVudC50cmltKCkgKyBcIlxcblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gXCJcXG5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duICs9IGBbJHtub2RlLnRleHRDb250ZW50LnRyaW0oKX1dKCR7bm9kZS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSlgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImltZ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBgIVske25vZGUuZ2V0QXR0cmlidXRlKFwiYWx0XCIpIHx8IFwiSW1hZ2VcIn1dKCR7bm9kZS5nZXRBdHRyaWJ1dGUoXCJzcmNcIil9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3Ryb25nXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gYCoqJHtub2RlLnRleHRDb250ZW50LnRyaW0oKX0qKmA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW1cIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBgKiR7bm9kZS50ZXh0Q29udGVudC50cmltKCl9KmA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmxvY2txdW90ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBcIj4gXCIgKyBub2RlLnRleHRDb250ZW50LnRyaW0oKSArIFwiXFxuXFxuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicHJlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmZpcnN0Q2hpbGQgJiYgbm9kZS5maXJzdENoaWxkLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiY29kZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29kZSA9IG5vZGUuZmlyc3RDaGlsZC50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBcImBgYFwiICsgXCJcXG5cIiArIGNvZGUgKyBcIlxcblwiICsgXCJgYGBcIiArIFwiXFxuXFxuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvZGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBcImBcIiArIG5vZGUudGV4dENvbnRlbnQgKyBcImBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJyN0ZXh0JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gbm9kZS50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGQ6YW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZG93biArPSBjb252ZXJ0Tm9kZShjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHsgLy9Ob2RlLlRFWFRfTk9ERVxyXG4gICAgICAgICAgICAgICAgbWFya2Rvd24gKz0gbm9kZS50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1hcmtkb3duO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbWQgPSBjb252ZXJ0Tm9kZShkb2MuYm9keSk7XHJcbiAgICAgICAgcmV0dXJuIG1kO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGF5KG1zOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFjdGl2ZUxlYWYodmlldz10aGlzLnZpZXcpe1xyXG4gICAgICAgIGlmKCF2aWV3KXtyZXR1cm59O1xyXG4gICAgICAgIGxldCBsZWFmID0gdGhpcy5hbGxMZWF2ZXMuZmlsdGVyKHg9Pngudmlldz09dmlldylbMF07XHJcbiAgICAgICAgaWYoIWxlYWYpe3JldHVybn07XHJcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobGVhZik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0X3NhZmVfY3R4KGN0eDpzdHJpbmcpe1xyXG4gICAgICAgIGxldCBzYWZlQ3R4ID0gSlNPTi5zdHJpbmdpZnkoY3R4LnJlcGxhY2UoL2AvZywnficpLnJlcGxhY2UoL1xcJC9nLCdcdUZGRTUnKSk7XHJcbiAgICAgICAgcmV0dXJuIHNhZmVDdHg7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFzeW5jIHBhc3RlX21zZyhjdHg6c3RyaW5nKXtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY2xpY2tfYnRuX29mX3NlbmQoKXtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0X2xhc3RfY29udGVudCgpe1xyXG4gICAgICAgIHJldHVybiAnJ1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlcXVlc3QoY3R4OnN0cmluZyx0aW1lb3V0PTYwKXtcclxuXHJcblx0XHRsZXQgTjEgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMucGFzdGVfbXNnKGN0eCk7XHJcblx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xyXG5cdFx0YXdhaXQgdGhpcy5jbGlja19idG5fb2Zfc2VuZCgpO1xyXG5cdFx0bGV0IE4yID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHRcdFxyXG5cdFx0d2hpbGUoTjIhPU4xKzEpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xyXG5cdFx0XHROMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcdHRpbWVvdXQgPSB0aW1lb3V0LTE7XHJcblx0XHRcdGlmKHRpbWVvdXQ8MCl7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZihOMj09TjErMSl7XHJcblx0XHRcdGxldCBjdHggPSBhd2FpdCB0aGlzLmdldF9sYXN0X2NvbnRlbnQoKTtcclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1OEJGNFx1NEU4Nlx1NzBCOVx1NEVDMFx1NEU0OGApXHJcblx0XHRcdHJldHVybiBjdHg7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1NEUwRFx1OEJGNFx1OEJERGApXHJcblx0XHRcdGNvbnNvbGUubG9nKCdEb3ViYW8gTjonLE4xLE4yKVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG59ICIsICJpbXBvcnQgeyBBcHAsTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHsgQmFzZVdlYlZpZXdlciB9IGZyb20gJy4vQmFzZVdlYlZpZXdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgRG91YmFvIGV4dGVuZHMgQmFzZVdlYlZpZXdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCxob21lcGFnZT0naHR0cHM6Ly93d3cuZG91YmFvLmNvbScpIHtcclxuXHRcdHN1cGVyKGFwcCwgaG9tZXBhZ2UsJ1x1OEM0Nlx1NTMwNScpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY2xpY2tfYnRuX29mX3NlbmQoKSB7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0YXN5bmMgZnVuY3Rpb24gY2xpY2soKXtcclxuXHRcdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zsb3ctZW5kLW1zZy1zZW5kJyk7XHJcblx0XHRcdFx0bGV0IGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnKTtcclxuXHRcdFx0XHR3aGlsZShhcmlhRGlzYWJsZWQ9PSdmYWxzZScpe1xyXG5cdFx0XHRcdFx0YnV0dG9uLmNsaWNrKCk7XHJcblx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0YnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zsb3ctZW5kLW1zZy1zZW5kJyk7XHJcblx0XHRcdFx0XHRhcmlhRGlzYWJsZWQgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGNsaWNrKCk7XHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBwYXN0ZV9tc2coY3R4OnN0cmluZykge1xyXG5cdFx0bGV0IG1zZztcclxuXHRcdGN0eCA9IHRoaXMuZ2V0X3NhZmVfY3R4KGN0eCk7XHJcblx0XHRjb25zdCBtYXhSZXRyaWVzID0gMTsgLy8gXHU2NzAwXHU1OTI3XHU5MUNEXHU4QkQ1XHU2QjIxXHU2NTcwXHJcblx0XHRmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xyXG5cdFx0XHRtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdFx0YFxyXG5cdFx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU1QzA2XHU1RjAyXHU2QjY1XHU5MDNCXHU4RjkxXHU1QzAxXHU4OEM1XHU1MjMwXHU0RTAwXHU0RTJBIGFzeW5jIFx1NTFGRFx1NjU3MFx1NEUyRFxyXG5cdFx0XHRcdGFzeW5jIGZ1bmN0aW9uIGluc2VydFRleHRBbmRTZW5kKGN0eCkge1xyXG5cdFx0XHRcdFx0Ly8gXHU4M0I3XHU1M0Q2IHRleHRhcmVhIFx1NUU3Nlx1ODA1QVx1NzEyNlxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2hyZXInLGRvY3VtZW50KVxyXG5cdFx0XHRcdFx0bGV0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYVtkYXRhLXRlc3RpZD1cImNoYXRfaW5wdXRfaW5wdXRcIl0nKTtcclxuXHRcdFx0XHRcdGl0ZW0uZm9jdXMoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBcdTYzRDJcdTUxNjVcdTY1ODdcdTY3MkNcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VGV4dCcsIGZhbHNlLCBjdHgpO1xyXG5cdFx0XHRcdFx0fSwgMTAwMCk7XHJcblx0XHRcdFx0XHRsZXQgaSA9IDEwMDtcclxuXHRcdFx0XHRcdC8vIFx1N0I0OVx1NUY4NVx1NjMwOVx1OTRBRVx1NTNFRlx1NzBCOVx1NTFGQlxyXG5cdFx0XHRcdFx0d2hpbGUgKHRydWUpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbG93LWVuZC1tc2ctc2VuZCcpO1xyXG5cdFx0XHRcdFx0XHRsZXQgYXJpYURpc2FibGVkID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHRcdFx0XHRpZiAoYXJpYURpc2FibGVkID09ICdmYWxzZScpIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnXHU1OTBEXHU1MjM2XHU2MjEwXHU1MjlGJyk7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpID0gaS0xO1xyXG5cdFx0XHRcdFx0XHRpZihpPDApe2JyZWFrfVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU4QzAzXHU3NTI4IGFzeW5jIFx1NTFGRFx1NjU3MFxyXG5cdFx0XHRcdGluc2VydFRleHRBbmRTZW5kKFxcYCR7Y3R4fVxcYCk7XHJcblx0XHRcdFx0YFxyXG5cdFx0XHQpO1xyXG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTYyMTBcdTUyOUZcdTdDOThcdThEMzRcclxuXHRcdFx0aWYgKG1zZykge1xyXG5cdFx0XHRcdGJyZWFrOyAvLyBcdTU5ODJcdTY3OUNcdTYyMTBcdTUyOUZcdUZGMENcdTkwMDBcdTUxRkFcdTkxQ0RcdThCRDVcdTVGQUFcdTczQUZcclxuXHRcdFx0fVxyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApOyAvLyBcdTdCNDlcdTVGODVcdTRFMDBcdTZCQjVcdTY1RjZcdTk1RjRcdTU0MEVcdTkxQ0RcdThCRDVcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIGdldF9sYXN0X3Jlc3BvbnNlKCkge1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbZGF0YS10ZXN0aWQ9XCJyZWNlaXZlX21lc3NhZ2VcIl0nKTtcclxuXHRcdGlmKGl0ZW1zLmxlbmd0aDwxKXtyZXR1cm4gbnVsbH1cclxuXHRcdFxyXG5cdFx0bGV0IGl0ZW0gPSBpdGVtc1tpdGVtcy5sZW5ndGgtMV1cclxuXHRcdGxldCBjdHggPSB0aGlzLmh0bWxfdG9fbWFya2Rvd24oaXRlbS5vdXRlckhUTUwpO1xyXG5cdFx0cmV0dXJuIGN0eDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIG51bWJlcl9vZl9yZWNlaXZlX21zZygpe1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRmdW5jdGlvbiBudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKXtcclxuXHRcdFx0XHRsZXQgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbZGF0YS10ZXN0aWQ9XCJyZWNlaXZlX21lc3NhZ2VcIl0nKTtcclxuXHRcdFx0XHRpZihpdGVtcy5sZW5ndGg9PTApe1xyXG5cdFx0XHRcdFx0cmV0dXJuIDA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGl0ZW0gPSBpdGVtc1tpdGVtcy5sZW5ndGgtMV1cclxuXHRcdFx0XHRpZihpdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltkYXRhLXRlc3RpZD1cIm1lc3NhZ2VfYWN0aW9uX2xpa2VcIl0nKS5sZW5ndGg9PTApe1xyXG5cdFx0XHRcdFx0bXNnID0gaXRlbXMubGVuZ3RoLTE7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRtc2cgPSBpdGVtcy5sZW5ndGg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBtc2c7XHJcblx0XHRcdH1cclxuXHRcdFx0bnVtYmVyX29mX3JlY2VpdmVfbXNnKClcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNvcHlfbGFzdF9jb250ZW50KCl7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VnbWVudC1hY3Rpb25zLWNvbnRlbnQtYnRuJyk7XHJcblx0XHRcdGJ0bnMgPSBBcnJheS5mcm9tKGJ0bnMpLmZpbHRlcih4PT54LnRleHRDb250ZW50PT0nXHU1OTBEXHU1MjM2Jyk7XHJcblx0XHRcdGlmKGJ0bnMubGVuZ3RoPjApe1xyXG5cdFx0XHRcdGJ0bnNbYnRucy5sZW5ndGgtMV0uY2xpY2soKTtcclxuXHRcdFx0XHRtc2cgPSB0cnVlO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRtc2cgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbnVtYmVyX29mX2NvbnRlbnRzKCl7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlLWNvbnRlbnQnKVxyXG5cdFx0cmV0dXJuIGl0ZW1zLmxlbmd0aDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGdldF9sYXN0X2NvbnRlbnQoKXtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgaXRlbXMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLm1lc3NhZ2UtY29udGVudCcpXHJcblx0XHRyZXR1cm4gaXRlbXNbaXRlbXMubGVuZ3RoLTFdLnRleHRDb250ZW50XHJcblx0fVxyXG5cclxuXHRhc3luYyByZXF1ZXN0KGN0eDpzdHJpbmcsdGltZW91dD02MCl7XHJcblx0XHRsZXQgdmlldyA9IHRoaXMudmlldztcclxuXHRcdGxldCBOMSA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5wYXN0ZV9tc2coY3R4KTtcclxuXHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7XHJcblx0XHRhd2FpdCB0aGlzLmNsaWNrX2J0bl9vZl9zZW5kKCk7XHJcblx0XHRsZXQgTjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHJcblx0XHR3aGlsZShOMiE9TjErMSl7XHJcblx0XHRcdGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7XHJcblx0XHRcdE4yID0gYXdhaXQgdGhpcy5udW1iZXJfb2ZfcmVjZWl2ZV9tc2coKTtcclxuXHRcdFx0dGltZW91dCA9IHRpbWVvdXQtMTtcclxuXHRcdFx0aWYodGltZW91dDwwKXtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmKE4yPT1OMSsxKXtcclxuXHRcdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdFx0bGV0IGl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlLWNvbnRlbnQnKVxyXG5cdFx0XHROMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX2NvbnRlbnRzKClcclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1OEJGNFx1NEU4Nlx1NzBCOVx1NEVDMFx1NEU0OGApXHJcblx0XHRcdHJldHVybiBpdGVtc1tOMi0xXS50ZXh0Q29udGVudDtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRuZXcgTm90aWNlKGAke3RoaXMubmFtZX0gXHU0RTBEXHU4QkY0XHU4QkREYClcclxuXHRcdFx0Y29uc29sZS5sb2coJ0RvdWJhbyBOOicsTjEsTjIpXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IEJhc2VXZWJWaWV3ZXIgfSBmcm9tICcuL0Jhc2VXZWJWaWV3ZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIEtpbWkgZXh0ZW5kcyBCYXNlV2ViVmlld2VyIHtcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCxob21lcGFnZT0naHR0cHM6Ly9raW1pLm1vb25zaG90LmNuLycpIHtcclxuXHRcdHN1cGVyKGFwcCwgaG9tZXBhZ2UsJ0tpbWknKTtcclxuXHR9XHJcblx0YXN5bmMgbmV3X2NoYXQoKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCAodGhpcy52aWV3IGFzIGFueSkud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LWNoYXQtYnRuJykuY2xpY2soKVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHRhc3luYyBjbGlja19idG5fb2Zfc2VuZCgpe1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0ICh0aGlzLnZpZXcgYXMgYW55KS53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0YXN5bmMgZnVuY3Rpb24gY2xpY2soKXtcclxuXHRcdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbmQtYnV0dG9uJyk7XHJcblx0XHRcdFx0bGV0IGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKTtcclxuXHRcdFx0XHR3aGlsZSghYXJpYURpc2FibGVkKXtcclxuXHRcdFx0XHRcdGJ1dHRvbi5jbGljaygpO1xyXG5cdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kLWJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0YXJpYURpc2FibGVkID0gYnV0dG9uLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRjbGljaygpO1xyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblxyXG5cdGFzeW5jIHBhc3RlX21zZyhjdHg6c3RyaW5nKSB7XHJcblx0XHRsZXQgbXNnO1xyXG5cdFx0Y3R4ID0gdGhpcy5nZXRfc2FmZV9jdHgoY3R4KTtcclxuXHRcdGNvbnN0IG1heFJldHJpZXMgPSAxOyAvLyBcdTY3MDBcdTU5MjdcdTkxQ0RcdThCRDVcdTZCMjFcdTY1NzBcclxuXHRcdGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgbWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XHJcblx0XHRcdG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0XHRgXHJcblx0XHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBcdTVDMDZcdTVGMDJcdTZCNjVcdTkwM0JcdThGOTFcdTVDMDFcdTg4QzVcdTUyMzBcdTRFMDBcdTRFMkEgYXN5bmMgXHU1MUZEXHU2NTcwXHU0RTJEXHJcblx0XHRcdFx0YXN5bmMgZnVuY3Rpb24gaW5zZXJ0VGV4dEFuZFNlbmQoY3R4KSB7XHJcblx0XHRcdFx0XHQvLyBcdTgzQjdcdTUzRDYgdGV4dGFyZWEgXHU1RTc2XHU4MDVBXHU3MTI2XHJcblx0XHRcdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWlucHV0LWVkaXRvci1jb250YWluZXInKS5xdWVyeVNlbGVjdG9yKCcuY2hhdC1pbnB1dC1lZGl0b3InKTtcclxuXHRcdFx0XHRcdGl0ZW0uZm9jdXMoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBcdTYzRDJcdTUxNjVcdTY1ODdcdTY3MkNcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VGV4dCcsIGZhbHNlLCBjdHgpO1xyXG5cdFx0XHRcdFx0fSwgMTAwMCk7XHJcblx0XHRcdFx0XHRsZXQgaSA9IDEwMDtcclxuXHRcdFx0XHRcdC8vIFx1N0I0OVx1NUY4NVx1NjMwOVx1OTRBRVx1NTNFRlx1NzBCOVx1NTFGQlxyXG5cdFx0XHRcdFx0d2hpbGUgKHRydWUpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kLWJ1dHRvbicpOztcclxuXHRcdFx0XHRcdFx0bGV0IGFyaWFEaXNhYmxlZCA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKTtcclxuXHRcdFx0XHRcdFx0aWYgKGFyaWFEaXNhYmxlZCA9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IGRlbGF5KDEwMCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aSA9IGktMTtcclxuXHRcdFx0XHRcdFx0aWYoaTwwKXticmVha31cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1OEMwM1x1NzUyOCBhc3luYyBcdTUxRkRcdTY1NzBcclxuXHRcdFx0XHRpbnNlcnRUZXh0QW5kU2VuZChcXGAke2N0eH1cXGApO1xyXG5cdFx0XHRcdGBcclxuXHRcdFx0KTtcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2MjEwXHU1MjlGXHU3Qzk4XHU4RDM0XHJcblx0XHRcdGlmIChtc2cpIHtcclxuXHRcdFx0XHRicmVhazsgLy8gXHU1OTgyXHU2NzlDXHU2MjEwXHU1MjlGXHVGRjBDXHU5MDAwXHU1MUZBXHU5MUNEXHU4QkQ1XHU1RkFBXHU3M0FGXHJcblx0XHRcdH1cclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTsgLy8gXHU3QjQ5XHU1Rjg1XHU0RTAwXHU2QkI1XHU2NUY2XHU5NUY0XHU1NDBFXHU5MUNEXHU4QkQ1XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblxyXG5cdGFzeW5jIGdldF9sYXN0X3Jlc3BvbnNlKCkge1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcubWFya2Rvd24tY29udGFpbmVyJyk7XHJcblx0XHRpZihpdGVtcy5sZW5ndGg8MSl7cmV0dXJuIG51bGx9XHJcblx0XHRcclxuXHRcdGxldCBpdGVtID0gaXRlbXNbaXRlbXMubGVuZ3RoLTFdXHJcblx0XHRsZXQgY3R4ID0gdGhpcy5odG1sX3RvX21hcmtkb3duKGl0ZW0ub3V0ZXJIVE1MKTtcclxuXHRcdHJldHVybiBjdHg7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfY29weV9idG5zKCl7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGJ0bnMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnc3ZnW25hbWU9XCJMaWtlXCJdJylcclxuXHRcdHJldHVybiBidG5zLmxlbmd0aDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNvcHlfbGFzdF9jb250ZW50KCl7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgdGhpcy53ZWJ2aWV3LmV4ZWN1dGVKYXZhU2NyaXB0KFxyXG5cdFx0XHRgXHJcblx0XHRcdGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VnbWVudC1hY3Rpb25zLWNvbnRlbnQtYnRuJyk7XHJcblx0XHRcdGJ0bnMgPSBBcnJheS5mcm9tKGJ0bnMpLmZpbHRlcih4PT54LnRleHRDb250ZW50PT0nXHU1OTBEXHU1MjM2Jyk7XHJcblx0XHRcdGlmKGJ0bnMubGVuZ3RoPjApe1xyXG5cdFx0XHRcdGJ0bnNbYnRucy5sZW5ndGgtMV0uY2xpY2soKTtcclxuXHRcdFx0XHRtc2cgPSB0cnVlO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRtc2cgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfY29udGVudCgpe1xyXG5cdFx0bGV0IGRvYz1hd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgY2hhdHMgPSBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNoYXQtY29udGVudC1pdGVtXCIpO1xyXG5cdFx0cmV0dXJuIGNoYXRzW2NoYXRzLmxlbmd0aC0xXS5xdWVyeVNlbGVjdG9yKCcuc2VnbWVudC1jb250ZW50LWJveCcpPy50ZXh0Q29udGVudFxyXG5cdH1cclxuXHJcblx0YXN5bmMgbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcblx0XHRsZXQgZG9jID0gYXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0bGV0IGJ0bnMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnc3ZnW25hbWU9XCJMaWtlXCJdJylcclxuXHRcdHJldHVybiBidG5zLmxlbmd0aDtcclxuXHR9XHJcblxyXG5cclxuXHRhc3luYyByZXF1ZXN0KGN0eDpzdHJpbmcsdGltZW91dD02MCl7XHJcblx0XHRsZXQgTjEgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHJcblx0XHRhd2FpdCB0aGlzLnBhc3RlX21zZyhjdHgpO1xyXG5cdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuXHRcdGF3YWl0IHRoaXMuY2xpY2tfYnRuX29mX3NlbmQoKTtcclxuXHRcdGxldCBOMiA9IGF3YWl0IHRoaXMubnVtYmVyX29mX3JlY2VpdmVfbXNnKCk7XHJcblx0XHRcclxuXHRcdHdoaWxlKE4yIT1OMSsxKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuXHRcdFx0TjIgPSBhd2FpdCB0aGlzLm51bWJlcl9vZl9yZWNlaXZlX21zZygpO1xyXG5cdFx0XHR0aW1lb3V0ID0gdGltZW91dC0xO1xyXG5cdFx0XHRpZih0aW1lb3V0PDApe1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZihOMj09TjErMSl7XHJcblx0XHRcdGxldCBkb2M9YXdhaXQgdGhpcy5kb2N1bWVudCgpO1xyXG5cdFx0XHRsZXQgY2hhdHMgPSBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNoYXQtY29udGVudC1pdGVtXCIpO1xyXG5cdFx0XHRuZXcgTm90aWNlKGAke3RoaXMubmFtZX0gXHU4QkY0XHU0RTg2XHU3MEI5XHU0RUMwXHU0RTQ4YClcclxuXHRcdFx0bGV0IHJlcyA9IGNoYXRzW2NoYXRzLmxlbmd0aC0xXS5xdWVyeVNlbGVjdG9yKCcuc2VnbWVudC1jb250ZW50LWJveCcpPy50ZXh0Q29udGVudDtcclxuXHRcdFx0aWYocmVzPy5jb250YWlucygnXHU1RjUzXHU1MjREXHU5NTdGXHU2NTg3XHU2NzJDXHU1QkY5XHU4QkREXHU1REYyXHU4RkJFMjBcdThGNkUnKSl7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5uZXdfY2hhdCgpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLnJlcXVlc3QoY3R4KTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmV0dXJuIHJlcztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRsZXQgcmVzID0gYXdhaXQgdGhpcy5nZXRfbGFzdF9jb250ZW50KCk7XHJcblx0XHRcdGlmKHJlcz8uY29udGFpbnMoJ1x1NUY1M1x1NTI0RFx1OTU3Rlx1NjU4N1x1NjcyQ1x1NUJGOVx1OEJERFx1NURGMlx1OEZCRTIwXHU4RjZFJykpe1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMubmV3X2NoYXQoKTtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5yZXF1ZXN0KGN0eCk7XHJcblx0XHRcdH1cclxuXHRcdFx0bmV3IE5vdGljZShgJHt0aGlzLm5hbWV9IFx1NEUwRFx1OEJGNFx1OEJERGApXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn1cclxuIiwgImltcG9ydCB7IFxyXG5cdE5vdGljZSwgVEZpbGVcclxufSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgV2ViVmlld0xMTVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgRGVlcFNlZWsgfSBmcm9tICcuL0xMTS9EZWVwU2Vlayc7XHJcbmltcG9ydCB7IERvdWJhbyB9IGZyb20gJy4vTExNL0RvdWJhbyc7XHJcbmltcG9ydCB7IEtpbWkgfSBmcm9tICcuL0xMTS9LaW1pJztcclxuXHJcbmNvbnN0IGNtZF9yZWZyZXNoX2xsbXMgPSAocGx1Z2luOldlYlZpZXdMTE1QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdjbWRfcmVmcmVzaF9sbG1zJyxcclxuXHRuYW1lOiBwbHVnaW4uc3RyaW5ncy5jbWRfcmVmcmVzaF9sbG1zLFxyXG5cdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcblx0XHRsZXQgdmlld3MgPSBwbHVnaW4uYmFzZXd2LnZpZXdzO1xyXG5cdFx0cGx1Z2luLmxsbXMgPSBwbHVnaW4ubGxtcy5zbGljZSgwLDApO1xyXG5cdFx0Zm9yKGxldCB2aWV3IG9mIHZpZXdzKXtcclxuXHRcdFx0aWYoKHZpZXcgYXMgYW55KS51cmwuc3RhcnRzV2l0aChwbHVnaW4uZGVlcHNlZWsuaG9tZXBhZ2UpKXtcclxuXHRcdFx0XHRsZXQgbGxtID0gbmV3IERlZXBTZWVrKHBsdWdpbi5hcHApO1xyXG5cdFx0XHRcdGxsbS52aWV3ID0gdmlldztcclxuXHRcdFx0XHRwbHVnaW4ubGxtcy5wdXNoKGxsbSk7XHJcblx0XHRcdH1lbHNlIGlmKCh2aWV3IGFzIGFueSkudXJsLnN0YXJ0c1dpdGgocGx1Z2luLmRvdWJhby5ob21lcGFnZSkpe1xyXG5cdFx0XHRcdGxldCBsbG0gPSBuZXcgRG91YmFvKHBsdWdpbi5hcHApO1xyXG5cdFx0XHRcdGxsbS52aWV3ID0gdmlldztcclxuXHRcdFx0XHRwbHVnaW4ubGxtcy5wdXNoKGxsbSk7XHJcblx0XHRcdH1lbHNlIGlmKCh2aWV3IGFzIGFueSkudXJsLnN0YXJ0c1dpdGgocGx1Z2luLmtpbWkuaG9tZXBhZ2UpKXtcclxuXHRcdFx0XHRsZXQgbGxtID0gbmV3IEtpbWkocGx1Z2luLmFwcCk7XHJcblx0XHRcdFx0bGxtLnZpZXcgPSB2aWV3O1xyXG5cdFx0XHRcdHBsdWdpbi5sbG1zLnB1c2gobGxtKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG5cclxuY29uc3QgY21kX29wZW5fbmV3X2xsbSA9IChwbHVnaW46V2ViVmlld0xMTVBsdWdpbikgPT4gKHtcclxuXHRpZDogJ2NtZF9vcGVuX25ld19sbG0nLFxyXG5cdG5hbWU6IHBsdWdpbi5zdHJpbmdzLmNtZF9vcGVuX25ld19sbG0sXHJcblx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdGxldCBocGFnZSA9IGF3YWl0IHBsdWdpbi5lYXN5YXBpLmRpYWxvZ19zdWdnZXN0KFxyXG5cdFx0XHRwbHVnaW4uYmFzZWxsbXMubWFwKHg9PngubmFtZSksXHJcblx0XHRcdHBsdWdpbi5iYXNlbGxtcy5tYXAoeD0+eC5ob21lcGFnZSlcclxuXHRcdClcclxuXHRcdGlmKGhwYWdlKXtcclxuXHRcdFx0YXdhaXQgcGx1Z2luLmJhc2V3di5vcGVuX2hvbWVwYWdlKGhwYWdlLC0xKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxuY29uc3QgY29tbWFuZEJ1aWxkZXJzOkFycmF5PEZ1bmN0aW9uPiA9IFtcclxuICAgIFxyXG5dO1xyXG5cclxuY29uc3QgY29tbWFuZEJ1aWxkZXJzRGVza3RvcDpBcnJheTxGdW5jdGlvbj4gPSBbXHJcblx0Y21kX3JlZnJlc2hfbGxtcyxcclxuXHRjbWRfb3Blbl9uZXdfbGxtXHJcbl07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29tbWFuZHMocGx1Z2luOldlYlZpZXdMTE1QbHVnaW4pIHtcclxuICAgIGNvbW1hbmRCdWlsZGVycy5mb3JFYWNoKChjKSA9PiB7XHJcbiAgICAgICAgcGx1Z2luLmFkZENvbW1hbmQoYyhwbHVnaW4pKTtcclxuICAgIH0pO1xyXG5cdGlmKChwbHVnaW4uYXBwIGFzIGFueSkuaXNNb2JpbGU9PWZhbHNlKXtcclxuXHRcdGNvbW1hbmRCdWlsZGVyc0Rlc2t0b3AuZm9yRWFjaCgoYykgPT4ge1xyXG5cdFx0XHRwbHVnaW4uYWRkQ29tbWFuZChjKHBsdWdpbikpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59IiwgImltcG9ydCB7IEFwcCxOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBCYXNlV2ViVmlld2VyIH0gZnJvbSAnLi9CYXNlV2ViVmlld2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBZdWFuYmFvIGV4dGVuZHMgQmFzZVdlYlZpZXdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCxob21lcGFnZT0naHR0cHM6Ly95dWFuYmFvLnRlbmNlbnQuY29tL2NoYXQnKSB7XHJcblx0XHRzdXBlcihhcHAsIGhvbWVwYWdlLCdcdTUxNDNcdTVCOUQnKTtcclxuXHR9XHJcblx0XHJcblx0YXN5bmMgbmV3X2NoYXQoKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCAodGhpcy52aWV3IGFzIGFueSkud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueWItY29tbW9uLW5hdl9fbmV3LWNoYXQnKS5jbGljaygpXHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBwYXN0ZV9tc2coY3R4OnN0cmluZykge1xyXG5cdFx0bGV0IG1zZztcclxuXHRcdGN0eCA9IHRoaXMuZ2V0X3NhZmVfY3R4KGN0eCk7XHJcblx0XHRjb25zdCBtYXhSZXRyaWVzID0gMTsgLy8gXHU2NzAwXHU1OTI3XHU5MUNEXHU4QkQ1XHU2QjIxXHU2NTcwXHJcblx0XHRmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xyXG5cdFx0XHRtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdFx0YFxyXG5cdFx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU1QzA2XHU1RjAyXHU2QjY1XHU5MDNCXHU4RjkxXHU1QzAxXHU4OEM1XHU1MjMwXHU0RTAwXHU0RTJBIGFzeW5jIFx1NTFGRFx1NjU3MFx1NEUyRFxyXG5cdFx0XHRcdGFzeW5jIGZ1bmN0aW9uIGluc2VydFRleHRBbmRTZW5kKGN0eCkge1xyXG5cdFx0XHRcdFx0Ly8gXHU4M0I3XHU1M0Q2IHRleHRhcmVhIFx1NUU3Nlx1ODA1QVx1NzEyNlxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWlucHV0LWVkaXRvciAgLnFsLWVkaXRvci5xbC1ibGFuaycpO1xyXG5cdFx0XHRcdFx0aXRlbS5mb2N1cygpO1xyXG5cclxuXHRcdFx0XHRcdC8vIFx1NjNEMlx1NTE2NVx1NjU4N1x1NjcyQ1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRUZXh0JywgZmFsc2UsIGN0eCk7XHJcblx0XHRcdFx0XHR9LCAxMDAwKTtcclxuXHRcdFx0XHRcdGxldCBpID0gMTAwO1xyXG5cdFx0XHRcdFx0Ly8gXHU3QjQ5XHU1Rjg1XHU2MzA5XHU5NEFFXHU1M0VGXHU3MEI5XHU1MUZCXHJcblx0XHRcdFx0XHR3aGlsZSAodHJ1ZSkge1xyXG5cdFx0XHRcdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWlucHV0LWVkaXRvcicpLnF1ZXJ5U2VsZWN0b3IoJy5xbC1lZGl0b3IucWwtYmxhbmsnKVxyXG5cdFx0XHRcdFx0XHRpZihpdGVtKXtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpID0gaS0xO1xyXG5cdFx0XHRcdFx0XHRpZihpPDApe2JyZWFrfVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU4QzAzXHU3NTI4IGFzeW5jIFx1NTFGRFx1NjU3MFxyXG5cdFx0XHRcdGluc2VydFRleHRBbmRTZW5kKFxcYCR7Y3R4fVxcYCk7XHJcblx0XHRcdFx0YFxyXG5cdFx0XHQpO1xyXG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTYyMTBcdTUyOUZcdTdDOThcdThEMzRcclxuXHRcdFx0aWYgKG1zZykge1xyXG5cdFx0XHRcdGJyZWFrOyAvLyBcdTU5ODJcdTY3OUNcdTYyMTBcdTUyOUZcdUZGMENcdTkwMDBcdTUxRkFcdTkxQ0RcdThCRDVcdTVGQUFcdTczQUZcclxuXHRcdFx0fVxyXG5cdFx0XHRhd2FpdCB0aGlzLmRlbGF5KDEwMDApOyAvLyBcdTdCNDlcdTVGODVcdTRFMDBcdTZCQjVcdTY1RjZcdTk1RjRcdTU0MEVcdTkxQ0RcdThCRDVcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNsaWNrX2J0bl9vZl9zZW5kKCkge1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRmdW5jdGlvbiBkZWxheShtcykge1xyXG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGFzeW5jIGZ1bmN0aW9uIGNsaWNrKCl7XHJcblx0XHRcdFx0bGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2FbY2xhc3NePVwic3R5bGVfX3NlbmQtYnRuXCJdJyk7XHJcblx0XHRcdFx0d2hpbGUoIWJ1dHRvbil7XHJcblx0XHRcdFx0XHRhd2FpdCBkZWxheSgxMDApO1xyXG5cdFx0XHRcdFx0YnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYVtjbGFzc149XCJzdHlsZV9fc2VuZC1idG5cIl0nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YnV0dG9uLmNsaWNrKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Y2xpY2soKTtcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIG51bWJlcl9vZl9yZWNlaXZlX21zZygpe1xyXG5cdFx0bGV0IG1zZyA9IGF3YWl0IHRoaXMud2Vidmlldy5leGVjdXRlSmF2YVNjcmlwdChcclxuXHRcdFx0YFxyXG5cdFx0XHRmdW5jdGlvbiBudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKXtcclxuXHRcdFx0XHRsZXQgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hZ2VudC1jaGF0X190b29sYmFyID4gLmFnZW50LWNoYXRfX3Rvb2xiYXJfX3JpZ2h0ID4gLmFnZW50LWNoYXRfX3Rvb2xiYXJfX2l0ZW06bnRoLWNoaWxkKDUpJyk7XHJcblx0XHRcdFx0bGV0IE4gPSBwYXJzZUludChidG5zLmxlbmd0aCk7XHJcblx0XHRcdFx0cmV0dXJuIE47XHJcblx0XHRcdH1cclxuXHRcdFx0bnVtYmVyX29mX3JlY2VpdmVfbXNnKClcclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIG1zZztcclxuXHR9XHJcblxyXG5cdGFzeW5jIGdldF9sYXN0X2NvbnRlbnQoKXtcclxuXHRcdGxldCBkb2MgPSBhd2FpdCB0aGlzLmRvY3VtZW50KCk7XHJcblx0XHRsZXQgaXRlbXMgPSBBcnJheS5mcm9tKGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcuaHljLWNvbnRlbnQtbWQgLmh5Yy1jb21tb24tbWFya2Rvd24nKSkuZmlsdGVyKFxyXG5cdFx0XHRlbCA9PiAhZWwucGFyZW50RWxlbWVudD8ucGFyZW50RWxlbWVudD8uY2xhc3NMaXN0LmNvbnRhaW5zKCdoeWMtY29tcG9uZW50LXJlYXNvbmVyX190aGluay1jb250ZW50JylcclxuXHRcdCk7XHJcblx0XHRsZXQgY3R4ID0gdGhpcy5odG1sX3RvX21hcmtkb3duKGl0ZW1zW2l0ZW1zLmxlbmd0aC0xXS5vdXRlckhUTUwpO1xyXG5cdFx0cmV0dXJuIGN0eDtcclxuXHR9XHJcblxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHsgQmFzZVdlYlZpZXdlciB9IGZyb20gJy4vQmFzZVdlYlZpZXdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hhdEdQVCBleHRlbmRzIEJhc2VXZWJWaWV3ZXIge1xyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsaG9tZXBhZ2U9J2h0dHBzOi8vY2hhdGdwdC5jb20nKSB7XHJcblx0XHRzdXBlcihhcHAsIGhvbWVwYWdlLCdDaGF0R1BUJyk7XHJcblx0fVxyXG5cdFxyXG5cdGFzeW5jIG5ld19jaGF0KCl7XHJcblx0XHRsZXQgbXNnID0gYXdhaXQgKHRoaXMudmlldyBhcyBhbnkpLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYVtkYXRhLXRlc3RpZD1cImNyZWF0ZS1uZXctY2hhdC1idXR0b25cIl0nKS5jbGljaygpXHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBwYXN0ZV9tc2coY3R4OnN0cmluZykge1xyXG5cdFx0bGV0IG1zZztcclxuXHRcdGN0eCA9IHRoaXMuZ2V0X3NhZmVfY3R4KGN0eCk7XHJcblx0XHRjb25zdCBtYXhSZXRyaWVzID0gMTsgLy8gXHU2NzAwXHU1OTI3XHU5MUNEXHU4QkQ1XHU2QjIxXHU2NTcwXHJcblx0XHRmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xyXG5cdFx0XHRtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdFx0YFxyXG5cdFx0XHRcdGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gXHU1QzA2XHU1RjAyXHU2QjY1XHU5MDNCXHU4RjkxXHU1QzAxXHU4OEM1XHU1MjMwXHU0RTAwXHU0RTJBIGFzeW5jIFx1NTFGRFx1NjU3MFx1NEUyRFxyXG5cdFx0XHRcdGFzeW5jIGZ1bmN0aW9uIGluc2VydFRleHRBbmRTZW5kKGN0eCkge1xyXG5cdFx0XHRcdFx0Ly8gXHU4M0I3XHU1M0Q2IHRleHRhcmVhIFx1NUU3Nlx1ODA1QVx1NzEyNlxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjdHggPSAnXHU0RjYwXHU2NjJGXHU4QzAxJ1xyXG5cdFx0XHRcdFx0bGV0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYjcHJvbXB0LXRleHRhcmVhLlByb3NlTWlycm9yJyk7XHJcblx0XHRcdFx0XHRpdGVtLmZvY3VzKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gXHU2M0QyXHU1MTY1XHU2NTg3XHU2NzJDXHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFRleHQnLCBmYWxzZSwgY3R4KTtcclxuXHRcdFx0XHRcdH0sIDEwMDApO1xyXG5cdFx0XHRcdFx0bGV0IGkgPSAxMDA7XHJcblx0XHRcdFx0XHQvLyBcdTdCNDlcdTVGODVcdTYzMDlcdTk0QUVcdTUzRUZcdTcwQjlcdTUxRkJcclxuXHRcdFx0XHRcdHdoaWxlICh0cnVlKSB7XHJcblx0XHRcdFx0XHRcdGxldCBpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uI2NvbXBvc2VyLXN1Ym1pdC1idXR0b24nKVxyXG5cdFx0XHRcdFx0XHRpZighaXRlbSl7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aSA9IGktMTtcclxuXHRcdFx0XHRcdFx0aWYoaTwwKXticmVha31cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFx1OEMwM1x1NzUyOCBhc3luYyBcdTUxRkRcdTY1NzBcclxuXHRcdFx0XHRpbnNlcnRUZXh0QW5kU2VuZChcXGAke2N0eH1cXGApO1xyXG5cdFx0XHRcdGBcclxuXHRcdFx0KTtcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2MjEwXHU1MjlGXHU3Qzk4XHU4RDM0XHJcblx0XHRcdGlmIChtc2cpIHtcclxuXHRcdFx0XHRicmVhazsgLy8gXHU1OTgyXHU2NzlDXHU2MjEwXHU1MjlGXHVGRjBDXHU5MDAwXHU1MUZBXHU5MUNEXHU4QkQ1XHU1RkFBXHU3M0FGXHJcblx0XHRcdH1cclxuXHRcdFx0YXdhaXQgdGhpcy5kZWxheSgxMDAwKTsgLy8gXHU3QjQ5XHU1Rjg1XHU0RTAwXHU2QkI1XHU2NUY2XHU5NUY0XHU1NDBFXHU5MUNEXHU4QkQ1XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjbGlja19idG5fb2Zfc2VuZCgpIHtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRhc3luYyBmdW5jdGlvbiBjbGljaygpe1xyXG5cdFx0XHRcdGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24jY29tcG9zZXItc3VibWl0LWJ1dHRvbicpO1xyXG5cdFx0XHRcdHdoaWxlKCFidXR0b24pe1xyXG5cdFx0XHRcdFx0YXdhaXQgZGVsYXkoMTAwKTtcclxuXHRcdFx0XHRcdGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbiNjb21wb3Nlci1zdWJtaXQtYnV0dG9uJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJ1dHRvbi5jbGljaygpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNsaWNrKCk7XHJcblx0XHRcdGBcclxuXHRcdClcclxuXHRcdHJldHVybiBtc2c7XHJcblx0fVxyXG5cclxuXHRhc3luYyBudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKXtcclxuXHRcdGxldCBtc2cgPSBhd2FpdCB0aGlzLndlYnZpZXcuZXhlY3V0ZUphdmFTY3JpcHQoXHJcblx0XHRcdGBcclxuXHRcdFx0ZnVuY3Rpb24gbnVtYmVyX29mX3JlY2VpdmVfbXNnKCl7XHJcblx0XHRcdFx0bGV0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYuZmxleC5qdXN0aWZ5LXN0YXJ0IHNwYW5bZGF0YS1zdGF0ZT1cImNsb3NlZFwiXTpudGgtY2hpbGQoNSknKTtcclxuXHRcdFx0XHRsZXQgTiA9IHBhcnNlSW50KGJ0bnMubGVuZ3RoKTtcclxuXHRcdFx0XHRyZXR1cm4gTjtcclxuXHRcdFx0fVxyXG5cdFx0XHRudW1iZXJfb2ZfcmVjZWl2ZV9tc2coKVxyXG5cdFx0XHRgXHJcblx0XHQpXHJcblx0XHRyZXR1cm4gbXNnO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0X2xhc3RfY29udGVudCgpe1xyXG5cdFx0bGV0IGRvYyA9IGF3YWl0IHRoaXMuZG9jdW1lbnQoKTtcclxuXHRcdGxldCBpdGVtcyA9IEFycmF5LmZyb20oZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltkYXRhLW1lc3NhZ2UtYXV0aG9yLXJvbGU9XCJhc3Npc3RhbnRcIl0gZGl2Lm1hcmtkb3duJykpO1xyXG5cdFx0bGV0IGN0eCA9IHRoaXMuaHRtbF90b19tYXJrZG93bihpdGVtc1tpdGVtcy5sZW5ndGgtMV0ub3V0ZXJIVE1MKTtcclxuXHRcdHJldHVybiBjdHg7XHJcblx0fVxyXG5cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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Q3JCO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFBQSxFQUVBLElBQUksVUFBUztBQXZDZDtBQXdDRSxZQUFRLFVBQUssSUFBWSxRQUFRLFFBQVEsU0FBUyxNQUExQyxtQkFBNkM7QUFBQSxFQUN0RDtBQUFBLEVBRUEsTUFBTSxXQUFXO0FBRWhCLFNBQUssVUFBVSxJQUFJLFFBQVE7QUFDM0IsVUFBTSxLQUFLLGFBQWE7QUFHeEIsU0FBSyxPQUFPLENBQUM7QUFDYixTQUFLLFdBQVcsSUFBSSxTQUFTLEtBQUssR0FBRztBQUNyQyxTQUFLLFNBQVMsSUFBSSxPQUFPLEtBQUssR0FBRztBQUNqQyxTQUFLLE9BQU8sSUFBSSxLQUFLLEtBQUssR0FBRztBQUM3QixTQUFLLFVBQVUsSUFBSSxRQUFRLEtBQUssR0FBRztBQUNuQyxTQUFLLFVBQVUsSUFBSSxRQUFRLEtBQUssR0FBRztBQUNuQyxTQUFLLFdBQVc7QUFBQSxNQUNmLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxJQUNOO0FBQ0EsU0FBSyxTQUFTLElBQUksY0FBYyxLQUFLLEtBQUksRUFBRTtBQUkzQyxnQkFBWSxJQUFJO0FBQUEsRUFFakI7QUFBQSxFQUVBLFdBQVc7QUFBQSxFQUVYO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUMxRTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBSUQ7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImN0eCIsICJjdHgiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
